import{r as e,a as t,R as s,g as r,c as i}from"./vendor-9mwbaf1v.js";import{G as a,M as n,P as o,a as l,X as c,b as d,B as u,U as h,S as m,c as p,F as g,d as b,e as f,C as x,f as v,g as y,h as w,W as j,i as N,A as C,j as _,k,H as S,l as T,m as P,n as E,o as A,p as R,q as O,r as M,s as $,t as I,N as L,u as q,v as B,w as z,D,x as U,y as H,R as G,z as F,E as K,I as V,T as W,J,K as Y,L as Z,O as Q,Q as X,V as ee,Y as te,Z as se,_ as re}from"./ui-CErMxKYQ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ie={exports:{}},ae={},ne=e,oe=Symbol.for("react.element"),le=Symbol.for("react.fragment"),ce=Object.prototype.hasOwnProperty,de=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ue={key:!0,ref:!0,__self:!0,__source:!0};function he(e,t,s){var r,i={},a=null,n=null;for(r in void 0!==s&&(a=""+s),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(n=t.ref),t)ce.call(t,r)&&!ue.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:oe,type:e,key:a,ref:n,props:i,_owner:de.current}}ae.Fragment=le,ae.jsx=he,ae.jsxs=he,ie.exports=ae;var me,pe=ie.exports,ge=t;me=ge.createRoot,ge.hydrateRoot;const be={appName:{fr:"daliltounes",ar:"daliltounes",en:"daliltounes",ru:"daliltounes",es:"daliltounes",it:"daliltounes"},appSubtitle:{fr:"Guide des établissements tunisiens",ar:"دليل المؤسسات التونسية",en:"Guide to Tunisian establishments",ru:"Справочник тунисских заведений",es:"Guía de establecimientos tunecinos",it:"Guida agli stabilimenti tunisini"},home:{fr:"Accueil",ar:"الرئيسية",en:"Home",ru:"Главная",es:"Inicio",it:"Home"},establishments:{fr:"Établissements",ar:"المؤسسات",en:"Establishments",ru:"Заведения",es:"Establecimientos",it:"Stabilimenti"},subscriptions:{fr:"Abonnements",ar:"الاشتراكات",en:"Subscriptions",ru:"Подписки",es:"Suscripciones",it:"Abbonamenti"},contact:{fr:"Contact",ar:"اتصل بنا",en:"Contact",ru:"Контакт",es:"Contacto",it:"Contatto"},suggestEstablishment:{fr:"Suggérer un établissement",ar:"اقتراح مؤسسة",en:"Suggest an establishment",ru:"Предложить заведение",es:"Sugerir un establecimiento",it:"Suggerisci uno stabilimento"},searchPlaceholder:{fr:"Rechercher un établissement en Tunisie...",ar:"البحث عن مؤسسة في تونس...",en:"Search for an establishment in Tunisia...",ru:"Поиск заведения в Тунисе...",es:"Buscar un establecimiento en Túnez...",it:"Cerca uno stabilimento in Tunisia..."},listening:{fr:"🎤 Écoute en cours... Parlez maintenant",ar:"🎤 جاري الاستماع... تحدث الآن",en:"🎤 Listening... Speak now",ru:"🎤 Слушаю... Говорите сейчас",es:"🎤 Escuchando... Habla ahora",it:"🎤 In ascolto... Parla ora"},all:{fr:"Tous",ar:"الكل",en:"All",ru:"Все",es:"Todos",it:"Tutti"},hotel:{fr:"Hôtelier",ar:"فندقي",en:"Hotel",ru:"Отель",es:"Hotel",it:"Hotel"},cultural:{fr:"Culturel",ar:"ثقافي",en:"Cultural",ru:"Культурный",es:"Cultural",it:"Culturale"},administrative:{fr:"Administratif",ar:"إداري",en:"Administrative",ru:"Административный",es:"Administrativo",it:"Amministrativo"},sport:{fr:"Sport",ar:"رياضة",en:"Sport",ru:"Спорт",es:"Deporte",it:"Sport"},animal:{fr:"Animalier",ar:"حيواني",en:"Animal",ru:"Животные",es:"Animal",it:"Animale"},construction:{fr:"Construction",ar:"بناء",en:"Construction",ru:"Строительство",es:"Construcción",it:"Costruzione"},alimentation:{fr:"Alimentation",ar:"غذاء",en:"Food",ru:"Питание",es:"Alimentación",it:"Alimentazione"},sante:{fr:"Santé",ar:"صحة",en:"Health",ru:"Здоровье",es:"Salud",it:"Salute"},justice:{fr:"Justice",ar:"عدالة",en:"Justice",ru:"Юстиция",es:"Justicia",it:"Giustizia"},ecole:{fr:"École",ar:"مدرسة",en:"School",ru:"Школа",es:"Escuela",it:"Scuola"},taxi:{fr:"Taxi",ar:"تاكسي",en:"Taxi",ru:"Такси",es:"Taxi",it:"Taxi"},tourism:{fr:"Tourisme",ar:"سياحة",en:"Tourism",ru:"Туризм",es:"Turismo",it:"Turismo"},divers:{fr:"Divers",ar:"متنوع",en:"Various",ru:"Разное",es:"Varios",it:"Vari"},medina:{fr:"Médina",ar:"المدينة العتيقة",en:"Medina",ru:"Медина",es:"Medina",it:"Medina"},"bab-bhar":{fr:"Bab Bhar",ar:"باب بحر",en:"Bab Bhar",ru:"Баб Бхар",es:"Bab Bhar",it:"Bab Bhar"},"bab-souika":{fr:"Bab Souika",ar:"باب سويقة",en:"Bab Souika",ru:"Баб Суика",es:"Bab Souika",it:"Bab Souika"},halfaouine:{fr:"Halfaouine",ar:"حلفاوين",en:"Halfaouine",ru:"Халфауин",es:"Halfaouine",it:"Halfaouine"},omrane:{fr:"Omrane",ar:"عمران",en:"Omrane",ru:"Омран",es:"Omrane",it:"Omrane"},"omrane-superieur":{fr:"Omrane Supérieur",ar:"عمران الأعلى",en:"Omrane Superieur",ru:"Омран Супериор",es:"Omrane Superior",it:"Omrane Superiore"},"cite-olympique":{fr:"Cité Olympique",ar:"المدينة الأولمبية",en:"Olympic City",ru:"Олимпийский город",es:"Ciudad Olímpica",it:"Città Olimpica"},"el-menzah":{fr:"El Menzah",ar:"المنزه",en:"El Menzah",ru:"Эль Мензах",es:"El Menzah",it:"El Menzah"},"ariana-ville":{fr:"Ariana Ville",ar:"مدينة أريانة",en:"Ariana City",ru:"Город Ариана",es:"Ciudad Ariana",it:"Città di Ariana"},ennasr:{fr:"Ennasr",ar:"النصر",en:"Ennasr",ru:"Эннаср",es:"Ennasr",it:"Ennasr"},manar:{fr:"Manar",ar:"المنار",en:"Manar",ru:"Манар",es:"Manar",it:"Manar"},"centre-ville":{fr:"Centre-ville",ar:"وسط المدينة",en:"City Center",ru:"Центр города",es:"Centro de la ciudad",it:"Centro città"},lafayette:{fr:"Lafayette",ar:"لافاييت",en:"Lafayette",ru:"Лафайет",es:"Lafayette",it:"Lafayette"},passage:{fr:"Passage",ar:"الممر",en:"Passage",ru:"Пассаж",es:"Pasaje",it:"Passaggio"},"belvédère":{fr:"Belvédère",ar:"بلفيدير",en:"Belvedere",ru:"Бельведер",es:"Belvedere",it:"Belvedere"},mutuelleville:{fr:"Mutuelleville",ar:"موتيولفيل",en:"Mutuelleville",ru:"Мютюэльвиль",es:"Mutuelleville",it:"Mutuelleville"},montplaisir:{fr:"Montplaisir",ar:"مونبليزير",en:"Montplaisir",ru:"Монплезир",es:"Montplaisir",it:"Montplaisir"},monfleury:{fr:"Monfleury",ar:"مونفلوري",en:"Monfleury",ru:"Монфлери",es:"Monfleury",it:"Monfleury"},"notre-dame":{fr:"Notre Dame",ar:"نوتردام",en:"Notre Dame",ru:"Нотр-Дам",es:"Notre Dame",it:"Notre Dame"},bardo:{fr:"Bardo",ar:"باردو",en:"Bardo",ru:"Бардо",es:"Bardo",it:"Bardo"},zahrouni:{fr:"Zahrouni",ar:"الزهروني",en:"Zahrouni",ru:"Захруни",es:"Zahrouni",it:"Zahrouni"},kabaria:{fr:"Kabaria",ar:"القبارية",en:"Kabaria",ru:"Кабария",es:"Kabaria",it:"Kabaria"},mellassine:{fr:"Mellassine",ar:"الملاسين",en:"Mellassine",ru:"Мелласин",es:"Mellassine",it:"Mellassine"},hrairia:{fr:"Hrairia",ar:"الهرايرية",en:"Hrairia",ru:"Храйрия",es:"Hrairia",it:"Hrairia"},"sidi-hassine":{fr:"Sidi Hassine",ar:"سيدي حسين",en:"Sidi Hassine",ru:"Сиди Хассин",es:"Sidi Hassine",it:"Sidi Hassine"},intilaka:{fr:"Intilaka",ar:"الانطلاقة",en:"Intilaka",ru:"Интилака",es:"Intilaka",it:"Intilaka"},khadra:{fr:"Khadra",ar:"الخضراء",en:"Khadra",ru:"Хадра",es:"Khadra",it:"Khadra"},sijoumi:{fr:"Sijoumi",ar:"السيجومي",en:"Sijoumi",ru:"Сижуми",es:"Sijoumi",it:"Sijoumi"},tunis:{fr:"Tunis",ar:"تونس",en:"Tunis",ru:"Тунис",es:"Túnez",it:"Tunisi"},ariana:{fr:"Ariana",ar:"أريانة",en:"Ariana",ru:"Ариана",es:"Ariana",it:"Ariana"},"ben-arous":{fr:"Ben Arous",ar:"بن عروس",en:"Ben Arous",ru:"Бен Арус",es:"Ben Arous",it:"Ben Arous"},manouba:{fr:"Manouba",ar:"منوبة",en:"Manouba",ru:"Мануба",es:"Manouba",it:"Manouba"},nabeul:{fr:"Nabeul",ar:"نابل",en:"Nabeul",ru:"Набель",es:"Nabeul",it:"Nabeul"},zaghouan:{fr:"Zaghouan",ar:"زغوان",en:"Zaghouan",ru:"Загуан",es:"Zaghouan",it:"Zaghouan"},bizerte:{fr:"Bizerte",ar:"بنزرت",en:"Bizerte",ru:"Бизерта",es:"Bizerta",it:"Biserta"},beja:{fr:"Béja",ar:"باجة",en:"Beja",ru:"Беджа",es:"Béja",it:"Béja"},jendouba:{fr:"Jendouba",ar:"جندوبة",en:"Jendouba",ru:"Джендуба",es:"Jendouba",it:"Jendouba"},kef:{fr:"Le Kef",ar:"الكاف",en:"Le Kef",ru:"Ле Кеф",es:"Le Kef",it:"Le Kef"},siliana:{fr:"Siliana",ar:"سليانة",en:"Siliana",ru:"Силиана",es:"Siliana",it:"Siliana"},sousse:{fr:"Sousse",ar:"سوسة",en:"Sousse",ru:"Сусс",es:"Susa",it:"Susa"},monastir:{fr:"Monastir",ar:"المنستير",en:"Monastir",ru:"Монастир",es:"Monastir",it:"Monastir"},mahdia:{fr:"Mahdia",ar:"المهدية",en:"Mahdia",ru:"Махдия",es:"Mahdia",it:"Mahdia"},sfax:{fr:"Sfax",ar:"صفاقس",en:"Sfax",ru:"Сфакс",es:"Sfax",it:"Sfax"},kairouan:{fr:"Kairouan",ar:"القيروان",en:"Kairouan",ru:"Кайруан",es:"Kairuán",it:"Kairouan"},kasserine:{fr:"Kasserine",ar:"القصرين",en:"Kasserine",ru:"Кассерин",es:"Kasserine",it:"Kasserine"},"sidi-bouzid":{fr:"Sidi Bouzid",ar:"سيدي بوزيد",en:"Sidi Bouzid",ru:"Сиди Бузид",es:"Sidi Bouzid",it:"Sidi Bouzid"},gabes:{fr:"Gabès",ar:"قابس",en:"Gabes",ru:"Габес",es:"Gabés",it:"Gabès"},medenine:{fr:"Médenine",ar:"مدنين",en:"Medenine",ru:"Меденин",es:"Medenine",it:"Medenine"},tataouine:{fr:"Tataouine",ar:"تطاوين",en:"Tataouine",ru:"Татауин",es:"Tataouine",it:"Tataouine"},gafsa:{fr:"Gafsa",ar:"قفصة",en:"Gafsa",ru:"Гафса",es:"Gafsa",it:"Gafsa"},tozeur:{fr:"Tozeur",ar:"توزر",en:"Tozeur",ru:"Тозер",es:"Tozeur",it:"Tozeur"},kebili:{fr:"Kébili",ar:"قبلي",en:"Kebili",ru:"Кебили",es:"Kébili",it:"Kébili"},verified:{fr:"Vérifié",ar:"موثق",en:"Verified",ru:"Проверено",es:"Verificado",it:"Verificato"},premium:{fr:"Premium",ar:"مميز",en:"Premium",ru:"Премиум",es:"Premium",it:"Premium"},rating:{fr:"Note",ar:"التقييم",en:"Rating",ru:"Рейтинг",es:"Calificación",it:"Valutazione"},reviews:{fr:"avis",ar:"مراجعة",en:"reviews",ru:"отзывы",es:"reseñas",it:"recensioni"},hours:{fr:"Horaires",ar:"ساعات العمل",en:"Hours",ru:"Часы работы",es:"Horarios",it:"Orari"},services:{fr:"Services",ar:"الخدمات",en:"Services",ru:"Услуги",es:"Servicios",it:"Servizi"},address:{fr:"Adresse",ar:"العنوان",en:"Address",ru:"Адрес",es:"Dirección",it:"Indirizzo"},phone:{fr:"Téléphone",ar:"الهاتف",en:"Phone",ru:"Телефон",es:"Teléfono",it:"Telefono"},email:{fr:"Email",ar:"البريد الإلكتروني",en:"Email",ru:"Эл. почта",es:"Email",it:"Email"},website:{fr:"Site web",ar:"الموقع الإلكتروني",en:"Website",ru:"Веб-сайт",es:"Sitio web",it:"Sito web"},heroTitle:{fr:"Découvrez les Meilleurs Établissements avec daliltounes",ar:"اكتشف أفضل المؤسسات في تونس",en:"Discover the Best Establishments with daliltounes",ru:"Откройте для себя лучшие заведения Туниса",es:"Descubre los Mejores Establecimientos con daliltounes",it:"Scopri i Migliori Stabilimenti con daliltounes"},heroSubtitle:{fr:"Votre guide complet pour tous les services dans tous les gouvernorats de Tunisie",ar:"دليلك الشامل لجميع الخدمات في جميع ولايات تونس",en:"Your complete guide for all services in all governorates of Tunisia",ru:"Ваш полный путеводитель по всем услугам во всех губернаторствах Туниса",es:"Su guía completa para todos los servicios en todas las gobernaciones de Túnez",it:"La vostra guida completa per tutti i servizi in tutti i governatorati della Tunisia"},subscriptionTitle:{fr:"Plans d'Abonnement",ar:"خطط الاشتراك",en:"Subscription Plans",ru:"Планы подписки",es:"Planes de Suscripción",it:"Piani di Abbonamento"},subscriptionSubtitle:{fr:"Choisissez le plan qui convient le mieux à vos besoins",ar:"اختر الخطة التي تناسب احتياجاتك",en:"Choose the plan that best suits your needs",ru:"Выберите план, который лучше всего соответствует вашим потребностям",es:"Elija el plan que mejor se adapte a sus necesidades",it:"Scegli il piano che meglio si adatta alle tue esigenze"},choosePlan:{fr:"Choisir ce plan",ar:"اختر هذه الخطة",en:"Choose this plan",ru:"Выбрать этот план",es:"Elegir este plan",it:"Scegli questo piano"},popular:{fr:"Populaire",ar:"شائع",en:"Popular",ru:"Популярный",es:"Popular",it:"Popolare"},suggestTitle:{fr:"Suggérer un Établissement",ar:"اقتراح مؤسسة",en:"Suggest an Establishment",ru:"Предложить заведение",es:"Sugerir un Establecimiento",it:"Suggerisci uno Stabilimento"},suggestSubtitle:{fr:"Aidez-nous à enrichir notre base de données en suggérant un nouvel établissement",ar:"ساعدنا في إثراء قاعدة البيانات من خلال اقتراح مؤسسة جديدة",en:"Help us enrich our database by suggesting a new establishment",ru:"Помогите нам обогатить нашу базу данных, предложив новое заведение",es:"Ayúdanos a enriquecer nuestra base de datos sugiriendo un nuevo establecimiento",it:"Aiutaci ad arricchire il nostro database suggerendo un nuovo stabilimento"},establishmentName:{fr:"Nom de l'établissement",ar:"اسم المؤسسة",en:"Establishment name",ru:"Название заведения",es:"Nombre del establecimiento",it:"Nome dello stabilimento"},category:{fr:"Catégorie",ar:"الفئة",en:"Category",ru:"Категория",es:"Categoría",it:"Categoria"},subcategory:{fr:"Sous-catégorie",ar:"الفئة الفرعية",en:"Subcategory",ru:"Подкатегория",es:"Subcategoría",it:"Sottocategoria"},description:{fr:"Description",ar:"الوصف",en:"Description",ru:"Описание",es:"Descripción",it:"Descrizione"},governorate:{fr:"Gouvernorat",ar:"الولاية",en:"Governorate",ru:"Губернаторство",es:"Gobernación",it:"Governatorato"},openingHours:{fr:"Horaires d'ouverture",ar:"ساعات العمل",en:"Opening hours",ru:"Часы работы",es:"Horarios de apertura",it:"Orari di apertura"},servicesOffered:{fr:"Services offerts (séparés par des virgules)",ar:"الخدمات المقدمة (مفصولة بفواصل)",en:"Services offered (separated by commas)",ru:"Предлагаемые услуги (через запятую)",es:"Servicios ofrecidos (separados por comas)",it:"Servizi offerti (separati da virgole)"},yourName:{fr:"Votre nom",ar:"اسمك",en:"Your name",ru:"Ваше имя",es:"Su nombre",it:"Il tuo nome"},yourEmail:{fr:"Votre email",ar:"بريدك الإلكتروني",en:"Your email",ru:"Ваш email",es:"Su email",it:"La tua email"},submitSuggestion:{fr:"Envoyer la suggestion",ar:"إرسال الاقتراح",en:"Submit suggestion",ru:"Отправить предложение",es:"Enviar sugerencia",it:"Invia suggerimento"},cancel:{fr:"Annuler",ar:"إلغاء",en:"Cancel",ru:"Отмена",es:"Cancelar",it:"Annulla"},suggestionSuccess:{fr:"Votre suggestion a été envoyée avec succès ! Elle sera examinée par notre équipe.",ar:"تم إرسال اقتراحك بنجاح! سيتم فحصه من قبل فريقنا.",en:"Your suggestion has been sent successfully! It will be reviewed by our team.",ru:"Ваше предложение успешно отправлено! Оно будет рассмотрено нашей командой.",es:"Su sugerencia ha sido enviada con éxito! Será revisada por nuestro equipo.",it:"Il tuo suggerimento è stato inviato con successo! Sarà esaminato dal nostro team."},required:{fr:"Requis",ar:"مطلوب",en:"Required",ru:"Обязательно",es:"Requerido",it:"Richiesto"},footerDescription:{fr:"daliltounes - Votre guide complet pour découvrir tous les établissements de Tunisie.",ar:"daliltounes - دليلك الشامل لاكتشاف جميع المؤسسات في تونس.",en:"daliltounes - Your complete guide to discover all establishments in Tunisia.",ru:"daliltounes - Ваш полный путеводитель для открытия всех заведений в Тунисе.",es:"daliltounes - Su guía completa para descubrir todos los establecimientos en Túnez.",it:"daliltounes - La vostra guida completa per scoprire tutti gli stabilimenti in Tunisia."},navigation:{fr:"Navigation",ar:"التنقل",en:"Navigation",ru:"Навигация",es:"Navegación",it:"Navigazione"},categories:{fr:"Catégories",ar:"الفئات",en:"Categories",ru:"Категории",es:"Categorías",it:"Categorie"},allRightsReserved:{fr:"Tous droits réservés.",ar:"جميع الحقوق محفوظة.",en:"All rights reserved.",ru:"Все права защищены.",es:"Todos los derechos reservados.",it:"Tutti i diritti riservati."}},fe=()=>{const[t,s]=e.useState("fr");e.useEffect(()=>{const e=localStorage.getItem("language");e&&["fr","ar","en","ru","es","it"].includes(e)&&s(e)},[]);return{language:t,changeLanguage:e=>{s(e),localStorage.setItem("language",e),document.documentElement.dir="ar"===e?"rtl":"ltr",document.documentElement.lang=e},t:e=>{var s;return(null==(s=be[e])?void 0:s[t])||e},isRTL:"ar"===t}},xe=()=>{var e;const{language:t,changeLanguage:s}=fe(),r=[{code:"fr",name:"Français",flag:"🇫🇷"},{code:"ar",name:"العربية",flag:"🇹🇳"},{code:"en",name:"English",flag:"🇬🇧"},{code:"ru",name:"Русский",flag:"🇷🇺"},{code:"es",name:"Español",flag:"🇪🇸"},{code:"it",name:"Italiano",flag:"🇮🇹"}];return pe.jsxs("div",{className:"relative group",children:[pe.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[pe.jsx(a,{className:"h-4 w-4"}),pe.jsx("span",{className:"text-sm font-medium",children:null==(e=r.find(e=>e.code===t))?void 0:e.flag})]}),pe.jsx("div",{className:"absolute right-0 top-full mt-1 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[120px] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:r.map(e=>pe.jsxs("button",{onClick:()=>s(e.code),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 flex items-center space-x-2 "+(t===e.code?"bg-blue-50 text-blue-600":"text-gray-700"),children:[pe.jsx("span",{children:e.flag}),pe.jsx("span",{children:e.name})]},e.code))})]})},ve=({onMenuToggle:e,isMenuOpen:t,onSuggestClick:s})=>{const{t:r,isRTL:i}=fe();return pe.jsxs("header",{className:"bg-white/95 backdrop-blur-lg shadow-xl sticky top-0 z-50 border-b border-gray-100",children:[pe.jsx("div",{className:"container mx-auto px-4",children:pe.jsxs("div",{className:"flex items-center justify-between h-20 "+(i?"flex-row-reverse":""),children:[pe.jsxs("div",{className:"flex items-center space-x-2 "+(i?"space-x-reverse":""),children:[pe.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 p-2 rounded-xl shadow-lg",children:pe.jsx(n,{className:"h-8 w-8 text-white"})}),pe.jsxs("div",{children:[pe.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:r("appName")}),pe.jsx("p",{className:"text-sm text-gray-600 font-medium",children:r("appSubtitle")})]})]}),pe.jsxs("nav",{className:"hidden md:flex items-center space-x-8 "+(i?"space-x-reverse":""),children:[pe.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-300 hover:scale-105 transform",children:r("home")}),pe.jsx("button",{onClick:()=>{const e=document.getElementById("main-content");e&&e.scrollIntoView({behavior:"smooth"})},className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-300 hover:scale-105 transform",children:r("establishments")}),pe.jsx("button",{onClick:()=>{const e=document.querySelector('[data-section="subscriptions"]');e&&e.scrollIntoView({behavior:"smooth"})},className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-300 hover:scale-105 transform",children:r("subscriptions")}),pe.jsxs("button",{onClick:s,className:"flex items-center space-x-2 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 transform "+(i?"space-x-reverse":""),children:[pe.jsx(o,{className:"h-5 w-5"}),pe.jsx("span",{className:"text-sm font-bold",children:r("suggestEstablishment")})]}),pe.jsx("button",{onClick:()=>{const e=document.querySelector("footer");e&&e.scrollIntoView({behavior:"smooth"})},className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-300 hover:scale-105 transform",children:r("contact")})]}),pe.jsxs("div",{className:"flex items-center space-x-4 "+(i?"space-x-reverse":""),children:[pe.jsx(xe,{}),pe.jsxs("div",{className:"hidden md:flex items-center space-x-2 text-sm text-gray-600 bg-gray-100 px-4 py-2 rounded-xl "+(i?"space-x-reverse":""),children:[pe.jsx(l,{className:"h-4 w-4 text-blue-600"}),pe.jsx("a",{href:"mailto:contact@dalil-tounes.com",className:"font-semibold hover:text-blue-600 transition-colors",children:"contact@dalil-tounes.com"})]}),pe.jsx("button",{onClick:e,className:"md:hidden p-3 rounded-xl text-gray-700 hover:bg-gray-100 transition-colors duration-300",children:t?pe.jsx(c,{className:"h-6 w-6"}):pe.jsx(d,{className:"h-6 w-6"})})]})]})}),t&&pe.jsx("div",{className:"md:hidden bg-white/95 backdrop-blur-lg border-t border-gray-200 shadow-lg",children:pe.jsx("div",{className:"container mx-auto px-4 py-6",children:pe.jsxs("nav",{className:"flex flex-col space-y-6",children:[pe.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),e()},className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-300 text-left",children:r("home")}),pe.jsx("button",{onClick:()=>{const t=document.getElementById("main-content");t&&t.scrollIntoView({behavior:"smooth"}),e()},className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-300 text-left",children:r("establishments")}),pe.jsx("button",{onClick:()=>{const t=document.querySelector('[data-section="subscriptions"]');t&&t.scrollIntoView({behavior:"smooth"}),e()},className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-300 text-left",children:r("subscriptions")}),pe.jsxs("button",{onClick:s,className:"flex items-center space-x-2 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-300 w-fit shadow-lg "+(i?"space-x-reverse":""),children:[pe.jsx(o,{className:"h-5 w-5"}),pe.jsx("span",{className:"text-sm font-bold",children:r("suggestEstablishment")})]}),pe.jsx("button",{onClick:()=>{const t=document.querySelector("footer");t&&t.scrollIntoView({behavior:"smooth"}),e()},className:"text-gray-700 hover:text-blue-600 font-semibold transition-colors duration-300 text-left",children:r("contact")}),pe.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 pt-4 border-t bg-gray-100 px-4 py-3 rounded-xl "+(i?"space-x-reverse":""),children:[pe.jsx(l,{className:"h-4 w-4 text-blue-600"}),pe.jsx("a",{href:"mailto:contact@dalil-tounes.com",className:"font-semibold hover:text-blue-600 transition-colors",children:"contact@dalil-tounes.com"})]})]})})})]})},ye=()=>{const{t:e,isRTL:t}=fe();return pe.jsxs("div",{className:"relative py-24 overflow-hidden bg-gradient-to-br from-red-600 via-red-500 to-orange-500",children:[pe.jsx("div",{className:"absolute inset-0 opacity-40",children:pe.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:pe.jsx("div",{className:"w-[800px] h-[500px] relative transform rotate-8 scale-125",children:pe.jsx("div",{className:"w-full h-full bg-red-700 relative shadow-2xl border-4 border-red-800",children:pe.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-white rounded-full flex items-center justify-center shadow-xl border-2 border-gray-200",children:[pe.jsxs("div",{className:"relative w-40 h-40",children:[pe.jsx("div",{className:"absolute inset-0 bg-red-700 rounded-full shadow-lg"}),pe.jsx("div",{className:"absolute top-3 left-3 w-28 h-28 bg-white rounded-full"})]}),pe.jsx("svg",{className:"absolute w-16 h-16 text-red-700 ml-10 drop-shadow-lg",fill:"currentColor",viewBox:"0 0 24 24",children:pe.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]})})})})}),pe.jsx("div",{className:"absolute top-10 right-10 opacity-30",children:pe.jsx("div",{className:"w-48 h-32 relative transform rotate-12",children:pe.jsx("div",{className:"w-full h-full bg-red-700 relative shadow-xl border-2 border-red-800",children:pe.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:[pe.jsxs("div",{className:"relative w-10 h-10",children:[pe.jsx("div",{className:"absolute inset-0 bg-red-700 rounded-full"}),pe.jsx("div",{className:"absolute top-1 left-1 w-7 h-7 bg-white rounded-full"})]}),pe.jsx("svg",{className:"absolute w-4 h-4 text-red-700 ml-3",fill:"currentColor",viewBox:"0 0 24 24",children:pe.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]})})})}),pe.jsx("div",{className:"absolute bottom-10 left-10 opacity-30 transform -rotate-12",children:pe.jsx("div",{className:"w-48 h-32 relative",children:pe.jsx("div",{className:"w-full h-full bg-red-700 relative shadow-xl border-2 border-red-800",children:pe.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg",children:[pe.jsxs("div",{className:"relative w-10 h-10",children:[pe.jsx("div",{className:"absolute inset-0 bg-red-700 rounded-full"}),pe.jsx("div",{className:"absolute top-1 left-1 w-7 h-7 bg-white rounded-full"})]}),pe.jsx("svg",{className:"absolute w-4 h-4 text-red-700 ml-3",fill:"currentColor",viewBox:"0 0 24 24",children:pe.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]})})})}),pe.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[pe.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-white opacity-20 rounded-full shadow-2xl"}),pe.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-white opacity-20 rounded-full shadow-2xl"}),pe.jsx("div",{className:"absolute top-20 left-1/4 w-32 h-32 bg-white opacity-25 rounded-full shadow-xl"}),pe.jsx("div",{className:"absolute bottom-20 right-1/4 w-24 h-24 bg-white opacity-25 rounded-full shadow-xl"})]}),pe.jsx("div",{className:"relative z-10 container mx-auto px-4",children:pe.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[pe.jsx("h1",{className:`text-5xl md:text-7xl font-bold mb-8 text-white drop-shadow-2xl ${t?"font-arabic":""} leading-tight`,children:"Dalil Tounes"}),pe.jsxs("p",{className:`text-xl md:text-3xl text-white mb-12 max-w-3xl mx-auto drop-shadow-lg font-light ${t?"font-arabic":""} leading-relaxed`,children:["Votre annuaire complet des services et métiers en Tunisie.",pe.jsx("br",{}),pe.jsx("span",{className:"text-lg md:text-xl font-medium",children:"Trouvez tout, du médecin à l'artisan, en quelques clics."})]}),pe.jsx("div",{className:"mb-16",children:pe.jsx("button",{onClick:()=>{const e=document.querySelector('input[type="text"]');e&&(e.focus(),e.scrollIntoView({behavior:"smooth",block:"center"}))},className:"bg-white text-blue-600 px-8 py-4 rounded-2xl font-bold text-xl hover:bg-gray-100 transition-all duration-300 shadow-2xl hover:shadow-3xl hover:scale-105 transform",children:"🔍 Commencer ma recherche"})}),pe.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mt-16",children:[pe.jsxs("div",{className:"text-center",children:[pe.jsx("div",{className:"bg-white bg-opacity-25 backdrop-blur-lg rounded-2xl p-6 w-20 h-20 mx-auto mb-4 flex items-center justify-center border border-white border-opacity-40 shadow-xl hover:scale-110 transition-transform duration-300",children:pe.jsx(u,{className:"h-10 w-10 text-white"})}),pe.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white drop-shadow-lg",children:"2,000+"}),pe.jsx("div",{className:"text-white text-sm md:text-base drop-shadow-md font-medium",children:e("establishments")})]}),pe.jsxs("div",{className:"text-center",children:[pe.jsx("div",{className:"bg-white bg-opacity-25 backdrop-blur-lg rounded-2xl p-6 w-20 h-20 mx-auto mb-4 flex items-center justify-center border border-white border-opacity-40 shadow-xl hover:scale-110 transition-transform duration-300",children:pe.jsx(h,{className:"h-10 w-10 text-white"})}),pe.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white drop-shadow-lg",children:"Nouveau"}),pe.jsx("div",{className:"text-white text-sm md:text-base drop-shadow-md font-medium",children:"Plateforme"})]}),pe.jsxs("div",{className:"text-center",children:[pe.jsx("div",{className:"bg-white bg-opacity-25 backdrop-blur-lg rounded-2xl p-6 w-20 h-20 mx-auto mb-4 flex items-center justify-center border border-white border-opacity-40 shadow-xl hover:scale-110 transition-transform duration-300",children:pe.jsx(m,{className:"h-10 w-10 text-white"})}),pe.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white drop-shadow-lg",children:"100%"}),pe.jsx("div",{className:"text-white text-sm md:text-base drop-shadow-md font-medium",children:"Gratuit"})]}),pe.jsxs("div",{className:"text-center",children:[pe.jsx("div",{className:"bg-white bg-opacity-25 backdrop-blur-lg rounded-2xl p-6 w-20 h-20 mx-auto mb-4 flex items-center justify-center border border-white border-opacity-40 shadow-xl hover:scale-110 transition-transform duration-300",children:pe.jsx(n,{className:"h-10 w-10 text-white"})}),pe.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white drop-shadow-lg",children:"24"}),pe.jsx("div",{className:"text-white text-sm md:text-base drop-shadow-md font-medium",children:"Gouvernorats"})]})]})]})})]})};function we(t,s){const[r,i]=e.useState(t);return e.useEffect(()=>{const e=setTimeout(()=>{i(t)},s);return()=>{clearTimeout(e)}},[t,s]),r}const je=t=>e.useMemo(()=>{const e={byName:new Map,byCategory:new Map,byGovernorate:new Map,byServices:new Map,byAddress:new Map,bySubcategory:new Map};return t.forEach(t=>{t.name.toLowerCase().split(" ").forEach(s=>{s.length>2&&(e.byName.has(s)||e.byName.set(s,[]),e.byName.get(s).push(t))}),e.byCategory.has(t.category)||e.byCategory.set(t.category,[]),e.byCategory.get(t.category).push(t),e.byGovernorate.has(t.governorate)||e.byGovernorate.set(t.governorate,[]),e.byGovernorate.get(t.governorate).push(t),t.services.forEach(s=>{s.toLowerCase().split(" ").forEach(s=>{s.length>2&&(e.byServices.has(s)||e.byServices.set(s,[]),e.byServices.get(s).push(t))})});t.address.toLowerCase().split(" ").forEach(s=>{s.length>2&&(e.byAddress.has(s)||e.byAddress.set(s,[]),e.byAddress.get(s).push(t))});t.subcategory.toLowerCase().split(" ").forEach(s=>{s.length>2&&(e.bySubcategory.has(s)||e.bySubcategory.set(s,[]),e.bySubcategory.get(s).push(t))})}),e},[t]),Ne=(e,t)=>{if(!t||t.length<2)return[];const s=t.toLowerCase().split(" ").filter(e=>e.length>1),r=new Set;return s.forEach(t=>{var s,i,a,n;null==(s=e.byName.get(t))||s.forEach(e=>r.add(e)),null==(i=e.byServices.get(t))||i.forEach(e=>r.add(e)),null==(a=e.byAddress.get(t))||a.forEach(e=>r.add(e)),null==(n=e.bySubcategory.get(t))||n.forEach(e=>r.add(e)),e.byName.forEach((e,s)=>{s.startsWith(t)&&e.forEach(e=>r.add(e))}),e.byServices.forEach((e,s)=>{s.startsWith(t)&&e.forEach(e=>r.add(e))})}),Array.from(r)},Ce={hotel:["Hôtel 5 étoiles","Hôtel 4 étoiles","Hôtel 3 étoiles","Hôtel boutique","Resort","Auberge de jeunesse","Maison d'hôtes","Riad traditionnel"],cultural:["Musée","Théâtre","Galerie d'art","Centre culturel","Monument historique","Site archéologique","Bibliothèque","Artisanat traditionnel"],administrative:["Mairie","Préfecture","Consulat","Ambassade","Bureau de poste","Centre des impôts","Sécurité sociale","État civil"],sport:["Salle de sport","Piscine","Terrain de football","Club de tennis","Centre de fitness","Spa & Wellness","Club nautique","Centre équestre"],animal:["Vétérinaire","Animalerie","Zoo","Refuge pour animaux","Toilettage","Dressage","Ferme pédagogique","Clinique vétérinaire"],construction:["Entreprise de construction","Architecte","Ingénieur","Matériaux de construction","Plomberie","Électricité","Peinture","Carrelage"],alimentation:["Restaurant traditionnel","Restaurant français","Restaurant italien","Restaurant de poissons","Fast food","Café","Pâtisserie","Boulangerie","Supermarché","Épicerie","Marché"],sante:["Hôpital public","Clinique privée","Médecin généraliste","Médecin spécialiste","Dentiste","Pharmacie","Laboratoire","Centre d'imagerie","Kinésithérapeute","Psychologue","Ophtalmologue","Cardiologue","Dermatologue","Gynécologue","Pédiatre"],justice:["Tribunal de première instance","Tribunal d'appel","Cour de cassation","Tribunal administratif","Cabinet d'avocat","Étude notariale","Huissier de justice","Centre de médiation","Conseil juridique","Expert judiciaire"],ecole:["École primaire publique","École primaire privée","Collège public","Collège privé","Lycée public","Lycée privé","École internationale","Institut supérieur privé","Université publique","Formation professionnelle","École de langues","École d'art","École de musique","Crèche","Jardin d'enfants"],taxi:["Station de taxi","Taxi individuel","Taxi de luxe","Coopérative de taxi","Navette aéroport","Taxi spécialisé","Louage","Transport scolaire","Ambulance","Transport médical"],tourism:["Agence de voyage","Guide touristique","Site touristique","Parc d'attractions","Plage","Port de plaisance","Centre de loisirs","Excursions","Location de voitures","Office de tourisme"],divers:["Coiffeur","Salon de beauté","Pressing","Cordonnerie","Bijouterie","Horlogerie","Photographe","Imprimerie","Librairie","Fleuriste","Décoration","Électroménager","Informatique","Téléphonie","Banque","Assurance","Immobilier","Location de voitures","Garage automobile","Station-service","Lavage auto","Pièces détachées","Menuiserie","Serrurerie","Climatisation","Nettoyage","Sécurité","Déménagement","Coursier","Traduction","Formation","Consulting","Comptabilité","Marketing","Événementiel","Traiteur","Location matériel","Réparation","Autre service"]},_e=[{id:"1",name:"Hôtel Laico Tunis",category:"hotel",subcategory:"Hôtel 5 étoiles",description:"Hôtel de luxe 5 étoiles situé au cœur de Tunis, offrant des services haut de gamme et une vue panoramique sur la ville.",address:"Avenue Habib Bourguiba, Tunis",governorate:"tunis",phone:"+216 71 330 144",email:"reservation@laicotunishotel.com",website:"laicotunishotel.com",image:"https://images.pexels.com/photos/258154/pexels-photo-258154.jpeg",rating:4.5,reviewCount:324,hours:"24h/24",services:["WiFi gratuit","Parking","Restaurant","Spa","Piscine","Climatisation"],coordinates:{lat:36.8008,lng:10.1817},verified:!0,premium:!0},{id:"2",name:"Restaurant Dar El Jeld",category:"alimentation",subcategory:"Restaurant traditionnel",description:"Restaurant traditionnel tunisien dans un palais du 17ème siècle au cœur de la Médina de Tunis.",address:"5 Rue Dar El Jeld, Médina, Tunis",governorate:"tunis",phone:"+216 71 560 916",email:"contact@dareljeld.com.tn",website:"dareljeld.com.tn",image:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg",rating:4.7,reviewCount:189,hours:"12h00 - 15h00, 19h00 - 23h00",services:["Cuisine traditionnelle","Cadre historique","Climatisation","Réservation"],coordinates:{lat:36.7981,lng:10.1712},verified:!0,premium:!0},{id:"3",name:"Musée National du Bardo",category:"cultural",subcategory:"Musée",description:"Le plus important musée de Tunisie, abritant la plus riche collection de mosaïques romaines au monde.",address:"Place du Bardo, Le Bardo, Tunis",governorate:"tunis",phone:"+216 71 513 650",email:"musee.bardo@patrimoine.gov.tn",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.6,reviewCount:567,hours:"09h00 - 17h00 (fermé lundi)",services:["Visites guidées","Boutique souvenirs","Parking","Accessibilité PMR"],coordinates:{lat:36.8108,lng:10.1372},verified:!0,premium:!1},{id:"4",name:"Hôpital Charles Nicolle",category:"sante",subcategory:"Hôpital public",description:"Centre hospitalier universitaire de référence en Tunisie, spécialisé dans toutes les disciplines médicales.",address:"Boulevard 9 Avril 1938, Tunis",governorate:"tunis",phone:"+216 71 578 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.8,reviewCount:234,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie","Imagerie médicale","Laboratoire"],coordinates:{lat:36.8065,lng:10.1815},verified:!0,premium:!1},{id:"5",name:"Université de Tunis",category:"ecole",subcategory:"Université publique",description:"Principale université de Tunisie, offrant des formations dans diverses disciplines académiques.",address:"92 Avenue 9 Avril 1938, Tunis",governorate:"tunis",phone:"+216 71 567 422",email:"rectorat@utunis.rnu.tn",website:"utunis.rnu.tn",image:"https://images.pexels.com/photos/207692/pexels-photo-207692.jpeg",rating:4.1,reviewCount:445,hours:"08h00 - 17h00",services:["Bibliothèque","Laboratoires","Amphithéâtres","WiFi","Cafétéria"],coordinates:{lat:36.8028,lng:10.1797},verified:!0,premium:!1},{id:"6",name:"Clinique Pasteur",category:"sante",subcategory:"Clinique privée",description:"Clinique privée de référence à Tunis, spécialisée en chirurgie et médecine générale.",address:"Avenue Pasteur, Tunis",governorate:"tunis",phone:"+216 71 844 411",email:"contact@cliniquepasteur.com.tn",website:"cliniquepasteur.com.tn",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.3,reviewCount:156,hours:"08h00 - 18h00",services:["Consultations spécialisées","Chirurgie","Imagerie","Laboratoire","Parking"],coordinates:{lat:36.8015,lng:10.1825},verified:!0,premium:!0},{id:"7",name:"Pharmacie Centrale",category:"sante",subcategory:"Pharmacie",description:"Pharmacie centrale de Tunis, ouverte 24h/24, située sur l'Avenue Habib Bourguiba.",address:"Avenue Habib Bourguiba, Tunis",governorate:"tunis",phone:"+216 71 254 418",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.2,reviewCount:89,hours:"24h/24",services:["Médicaments","Garde de nuit","Conseil pharmaceutique","Produits parapharmaceutiques"],coordinates:{lat:36.8,lng:10.182},verified:!0,premium:!1},{id:"8",name:"Cabinet Dr. Amira Ben Salem",category:"sante",subcategory:"Médecin généraliste",description:"Cabinet de médecine générale, consultations sur rendez-vous et urgences.",address:"Rue de la Liberté, Tunis",governorate:"tunis",phone:"+216 71 789 456",email:"dr.bensalem@gmail.com",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.6,reviewCount:78,hours:"09h00 - 17h00 (lun-ven)",services:["Consultations générales","Certificats médicaux","Vaccinations","Suivi médical"],coordinates:{lat:36.802,lng:10.18},verified:!0,premium:!1},{id:"9",name:"Maître Ahmed Trabelsi - Avocat",category:"justice",subcategory:"Cabinet d'avocat",description:"Cabinet d'avocat spécialisé en droit des affaires et droit civil.",address:"Avenue Mohamed V, Tunis",governorate:"tunis",phone:"+216 71 567 890",email:"cabinet.trabelsi@avocat.tn",image:"https://images.pexels.com/photos/5668882/pexels-photo-5668882.jpeg",rating:4.4,reviewCount:45,hours:"09h00 - 17h00 (lun-ven)",services:["Droit des affaires","Droit civil","Conseil juridique","Représentation en justice"],coordinates:{lat:36.801,lng:10.183},verified:!0,premium:!0},{id:"10",name:"Plombier Mohamed Gharbi",category:"construction",subcategory:"Plomberie",description:"Artisan plombier expérimenté, interventions rapides 24h/24 dans le Grand Tunis.",address:"Cité Olympique, Tunis",governorate:"tunis",phone:"+216 98 123 456",image:"https://images.pexels.com/photos/8486944/pexels-photo-8486944.jpeg",rating:4.5,reviewCount:67,hours:"24h/24 (urgences)",services:["Réparation fuites","Installation sanitaire","Débouchage","Urgences 24h"],coordinates:{lat:36.81,lng:10.19},verified:!0,premium:!1},{id:"11",name:"Électricien Karim Sassi",category:"construction",subcategory:"Électricité",description:"Électricien professionnel, installation et réparation électrique pour particuliers et entreprises.",address:"El Menzah, Tunis",governorate:"tunis",phone:"+216 97 654 321",image:"https://images.pexels.com/photos/8486944/pexels-photo-8486944.jpeg",rating:4.3,reviewCount:52,hours:"08h00 - 18h00",services:["Installation électrique","Réparation","Mise aux normes","Dépannage"],coordinates:{lat:36.82,lng:10.17},verified:!0,premium:!1},{id:"12",name:"Salon de Coiffure Élégance",category:"divers",subcategory:"Coiffeur",description:"Salon de coiffure moderne pour hommes et femmes, services de coiffure et soins capillaires.",address:"Avenue de la République, Tunis",governorate:"tunis",phone:"+216 71 456 789",image:"https://images.pexels.com/photos/3993449/pexels-photo-3993449.jpeg",rating:4.4,reviewCount:134,hours:"09h00 - 19h00",services:["Coupe homme","Coupe femme","Coloration","Soins capillaires","Maquillage"],coordinates:{lat:36.803,lng:10.181},verified:!0,premium:!1},{id:"13",name:"Garage Auto Tunis",category:"divers",subcategory:"Garage automobile",description:"Garage automobile complet, réparation et entretien de tous types de véhicules.",address:"Route de Bizerte, Tunis",governorate:"tunis",phone:"+216 71 234 567",image:"https://images.pexels.com/photos/3806288/pexels-photo-3806288.jpeg",rating:4.1,reviewCount:98,hours:"08h00 - 17h00",services:["Réparation mécanique","Vidange","Pneus","Diagnostic électronique","Carrosserie"],coordinates:{lat:36.815,lng:10.165},verified:!0,premium:!1},{id:"14",name:"École Primaire Carthage",category:"ecole",subcategory:"École primaire publique",description:"École primaire publique de qualité, enseignement en français et arabe.",address:"Carthage, Tunis",governorate:"tunis",phone:"+216 71 730 200",image:"https://images.pexels.com/photos/207692/pexels-photo-207692.jpeg",rating:4,reviewCount:67,hours:"08h00 - 16h00",services:["Enseignement primaire","Cantine","Transport scolaire","Activités parascolaires"],coordinates:{lat:36.85,lng:10.33},verified:!0,premium:!1},{id:"15",name:"Taxi Amine Tunis",category:"taxi",subcategory:"Taxi individuel",description:"Service de taxi fiable et ponctuel dans le Grand Tunis, véhicule climatisé.",address:"Station Habib Bourguiba, Tunis",governorate:"tunis",phone:"+216 98 765 432",image:"https://images.pexels.com/photos/1119796/pexels-photo-1119796.jpeg",rating:4.2,reviewCount:156,hours:"24h/24",services:["Transport urbain","Aéroport","Climatisation","Paiement carte"],coordinates:{lat:36.8,lng:10.1815},verified:!0,premium:!1},{id:"16",name:"Hôtel Mövenpick Resort & Marine Spa Sousse",category:"hotel",subcategory:"Resort",description:"Resort de luxe en bord de mer avec spa marin et installations haut de gamme.",address:"Avenue Hedi Nouira, Port El Kantaoui, Sousse",governorate:"sousse",phone:"+216 73 348 444",email:"hotel.sousse@movenpick.com",website:"movenpick.com",image:"https://images.pexels.com/photos/261102/pexels-photo-261102.jpeg",rating:4.8,reviewCount:892,hours:"24h/24",services:["Spa","Piscine","Plage privée","Restaurant","WiFi gratuit","Parking"],coordinates:{lat:35.8256,lng:10.6411},verified:!0,premium:!0},{id:"17",name:"Médina de Sousse",category:"cultural",subcategory:"Site historique",description:"Médina classée au patrimoine mondial de l'UNESCO, avec ses remparts et monuments historiques.",address:"Médina, Sousse",governorate:"sousse",phone:"+216 73 220 157",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.5,reviewCount:678,hours:"08h00 - 18h00",services:["Visites guidées","Boutiques artisanales","Monuments historiques"],coordinates:{lat:35.8256,lng:10.6411},verified:!0,premium:!1},{id:"18",name:"Restaurant Le Lido",category:"alimentation",subcategory:"Restaurant de poissons",description:"Restaurant spécialisé en fruits de mer et poissons frais, vue sur mer.",address:"Port El Kantaoui, Sousse",governorate:"sousse",phone:"+216 73 348 633",image:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg",rating:4.4,reviewCount:234,hours:"12h00 - 23h00",services:["Fruits de mer","Poissons frais","Terrasse vue mer","Parking"],coordinates:{lat:35.83,lng:10.645},verified:!0,premium:!0},{id:"19",name:"Hôpital Sahloul",category:"sante",subcategory:"Hôpital public",description:"Centre hospitalier universitaire de Sousse, services médicaux complets.",address:"Route de Ceinture, Sousse",governorate:"sousse",phone:"+216 73 106 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.9,reviewCount:178,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie","Maternité","Pédiatrie"],coordinates:{lat:35.82,lng:10.63},verified:!0,premium:!1},{id:"20",name:"Menuisier Hedi Sousse",category:"construction",subcategory:"Menuiserie",description:"Menuisier artisan, fabrication sur mesure de meubles et aménagements.",address:"Zone industrielle, Sousse",governorate:"sousse",phone:"+216 98 456 789",image:"https://images.pexels.com/photos/8486944/pexels-photo-8486944.jpeg",rating:4.3,reviewCount:45,hours:"08h00 - 17h00",services:["Meubles sur mesure","Aménagement","Réparation","Livraison"],coordinates:{lat:35.81,lng:10.62},verified:!0,premium:!1},{id:"21",name:"Hôtel Novotel Sfax Centre",category:"hotel",subcategory:"Hôtel 4 étoiles",description:"Hôtel moderne au centre-ville de Sfax, idéal pour les voyages d'affaires et de loisirs.",address:"Avenue Habib Bourguiba, Sfax",governorate:"sfax",phone:"+216 74 225 700",email:"h1291@accor.com",website:"novotel.com",image:"https://images.pexels.com/photos/258154/pexels-photo-258154.jpeg",rating:4.3,reviewCount:267,hours:"24h/24",services:["WiFi gratuit","Restaurant","Salle de sport","Parking","Climatisation"],coordinates:{lat:34.7406,lng:10.7603},verified:!0,premium:!0},{id:"22",name:"CHU Hédi Chaker Sfax",category:"sante",subcategory:"Hôpital public",description:"Centre hospitalier universitaire de référence pour la région du centre de la Tunisie.",address:"Route de Tunis, Sfax",governorate:"sfax",phone:"+216 74 647 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.9,reviewCount:156,hours:"24h/24 (urgences)",services:["Urgences","Consultations spécialisées","Chirurgie","Maternité"],coordinates:{lat:34.7252,lng:10.7645},verified:!0,premium:!1},{id:"23",name:"Restaurant Chez Nous",category:"alimentation",subcategory:"Restaurant traditionnel",description:"Restaurant familial servant une cuisine tunisienne authentique.",address:"Médina de Sfax, Sfax",governorate:"sfax",phone:"+216 74 298 765",image:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg",rating:4.2,reviewCount:89,hours:"11h00 - 22h00",services:["Cuisine traditionnelle","Plats familiaux","Livraison","Terrasse"],coordinates:{lat:34.74,lng:10.76},verified:!0,premium:!1},{id:"24",name:"Université de Sfax",category:"ecole",subcategory:"Université publique",description:"Université publique de Sfax, formations en sciences et technologies.",address:"Route de Soukra, Sfax",governorate:"sfax",phone:"+216 74 674 354",email:"rectorat@uss.rnu.tn",website:"uss.rnu.tn",image:"https://images.pexels.com/photos/207692/pexels-photo-207692.jpeg",rating:4,reviewCount:234,hours:"08h00 - 17h00",services:["Formations supérieures","Recherche","Bibliothèque","Laboratoires"],coordinates:{lat:34.73,lng:10.75},verified:!0,premium:!1},{id:"25",name:"Grande Mosquée de Kairouan",category:"cultural",subcategory:"Monument historique",description:"Première mosquée construite en Afrique du Nord, classée au patrimoine mondial de l'UNESCO.",address:"Médina, Kairouan",governorate:"kairouan",phone:"+216 77 230 897",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.9,reviewCount:1234,hours:"08h00 - 14h00 (sauf vendredi)",services:["Visites guidées","Architecture islamique","Site UNESCO"],coordinates:{lat:35.6781,lng:10.0963},verified:!0,premium:!1},{id:"26",name:"Hôtel La Kasbah",category:"hotel",subcategory:"Hôtel 3 étoiles",description:"Hôtel traditionnel au cœur de Kairouan, proche des sites historiques.",address:"Avenue de la République, Kairouan",governorate:"kairouan",phone:"+216 77 237 301",image:"https://images.pexels.com/photos/258154/pexels-photo-258154.jpeg",rating:4,reviewCount:89,hours:"24h/24",services:["WiFi","Restaurant","Climatisation","Parking"],coordinates:{lat:35.6692,lng:10.0963},verified:!0,premium:!1},{id:"27",name:"Hôpital Régional de Kairouan",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional offrant des services médicaux pour la région de Kairouan.",address:"Route de Tunis, Kairouan",governorate:"kairouan",phone:"+216 77 234 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.7,reviewCount:67,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie générale","Maternité"],coordinates:{lat:35.67,lng:10.1},verified:!0,premium:!1},{id:"28",name:"Port de Bizerte",category:"tourism",subcategory:"Port de plaisance",description:"Port historique et touristique de Bizerte, point de départ pour découvrir la région.",address:"Quai Tarak Ibn Ziad, Bizerte",governorate:"bizerte",phone:"+216 72 432 897",image:"https://images.pexels.com/photos/1450360/pexels-photo-1450360.jpeg",rating:4.2,reviewCount:178,hours:"06h00 - 22h00",services:["Marina","Restaurants","Excursions","Parking"],coordinates:{lat:37.2744,lng:9.8739},verified:!0,premium:!1},{id:"29",name:"Hôpital de Bizerte",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Bizerte, services médicaux pour le nord de la Tunisie.",address:"Avenue Habib Bourguiba, Bizerte",governorate:"bizerte",phone:"+216 72 431 633",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.8,reviewCount:89,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie","Radiologie"],coordinates:{lat:37.27,lng:9.87},verified:!0,premium:!1},{id:"30",name:"Restaurant La Corniche",category:"alimentation",subcategory:"Restaurant de poissons",description:"Restaurant en bord de mer spécialisé dans les poissons frais et fruits de mer.",address:"Corniche de Bizerte, Bizerte",governorate:"bizerte",phone:"+216 72 456 123",image:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg",rating:4.3,reviewCount:145,hours:"12h00 - 23h00",services:["Poissons frais","Fruits de mer","Vue sur mer","Terrasse"],coordinates:{lat:37.275,lng:9.875},verified:!0,premium:!1},{id:"31",name:"Hôtel Kheops",category:"hotel",subcategory:"Hôtel 4 étoiles",description:"Hôtel en bord de mer à Nabeul, réputé pour ses services et sa proximité avec la plage.",address:"Avenue Habib Bourguiba, Nabeul",governorate:"nabeul",phone:"+216 72 287 555",email:"reservation@kheops.com.tn",image:"https://images.pexels.com/photos/261102/pexels-photo-261102.jpeg",rating:4.4,reviewCount:445,hours:"24h/24",services:["Plage","Piscine","Restaurant","WiFi gratuit","Spa"],coordinates:{lat:36.4561,lng:10.7376},verified:!0,premium:!0},{id:"32",name:"Marché de Nabeul",category:"tourism",subcategory:"Marché traditionnel",description:"Marché traditionnel célèbre pour la poterie et l'artisanat local de Nabeul.",address:"Centre-ville, Nabeul",governorate:"nabeul",phone:"+216 72 285 444",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.1,reviewCount:267,hours:"08h00 - 18h00",services:["Artisanat","Poterie","Souvenirs","Négociation"],coordinates:{lat:36.452,lng:10.7354},verified:!0,premium:!1},{id:"33",name:"Atelier Poterie Nabeul",category:"divers",subcategory:"Artisanat traditionnel",description:"Atelier de poterie traditionnelle de Nabeul, fabrication et vente de céramiques.",address:"Route de la Poterie, Nabeul",governorate:"nabeul",phone:"+216 72 285 678",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.5,reviewCount:78,hours:"08h00 - 18h00",services:["Poterie artisanale","Cours de poterie","Vente directe","Personnalisation"],coordinates:{lat:36.45,lng:10.73},verified:!0,premium:!1},{id:"34",name:"Ribat de Monastir",category:"cultural",subcategory:"Monument historique",description:"Forteresse islamique du 8ème siècle, l'un des monuments les plus importants de Monastir.",address:"Place du Ribat, Monastir",governorate:"monastir",phone:"+216 73 460 274",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.6,reviewCount:389,hours:"08h00 - 17h00",services:["Visites guidées","Musée","Architecture islamique","Vue panoramique"],coordinates:{lat:35.7643,lng:10.8113},verified:!0,premium:!1},{id:"35",name:"Hôpital Fattouma Bourguiba",category:"sante",subcategory:"Hôpital public",description:"Hôpital universitaire de Monastir, centre de formation médicale.",address:"Avenue 1er Juin, Monastir",governorate:"monastir",phone:"+216 73 106 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4,reviewCount:123,hours:"24h/24 (urgences)",services:["Urgences","Formation médicale","Recherche","Consultations"],coordinates:{lat:35.76,lng:10.81},verified:!0,premium:!1},{id:"36",name:"Port de Mahdia",category:"tourism",subcategory:"Port de pêche",description:"Port de pêche traditionnel de Mahdia, célèbre pour ses bateaux colorés et son marché aux poissons.",address:"Port de Mahdia, Mahdia",governorate:"mahdia",phone:"+216 73 681 078",image:"https://images.pexels.com/photos/1450360/pexels-photo-1450360.jpeg",rating:4.3,reviewCount:234,hours:"05h00 - 20h00",services:["Marché aux poissons","Restaurants","Excursions","Pêche"],coordinates:{lat:35.5047,lng:11.0622},verified:!0,premium:!1},{id:"37",name:"Restaurant El Medina",category:"alimentation",subcategory:"Restaurant traditionnel",description:"Restaurant traditionnel dans la médina de Mahdia, spécialités locales.",address:"Médina de Mahdia, Mahdia",governorate:"mahdia",phone:"+216 73 681 234",image:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg",rating:4.1,reviewCount:67,hours:"12h00 - 22h00",services:["Cuisine locale","Poissons frais","Cadre traditionnel","Terrasse"],coordinates:{lat:35.5,lng:11.06},verified:!0,premium:!1},{id:"38",name:"Oasis de Gafsa",category:"tourism",subcategory:"Site naturel",description:"Oasis naturelle au cœur de Gafsa, offrant un cadre verdoyant dans le désert tunisien.",address:"Centre-ville, Gafsa",governorate:"gafsa",phone:"+216 76 221 664",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4,reviewCount:123,hours:"07h00 - 19h00",services:["Promenades","Photographie","Détente","Nature"],coordinates:{lat:34.425,lng:8.7842},verified:!0,premium:!1},{id:"39",name:"Hôpital Régional de Gafsa",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Gafsa, services médicaux pour le sud-ouest tunisien.",address:"Avenue de l'Indépendance, Gafsa",governorate:"gafsa",phone:"+216 76 224 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.6,reviewCount:45,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie générale","Pédiatrie"],coordinates:{lat:34.42,lng:8.78},verified:!0,premium:!1},{id:"40",name:"Palmeraie de Tozeur",category:"tourism",subcategory:"Site naturel",description:"Magnifique palmeraie de Tozeur avec ses milliers de palmiers dattiers et ses oasis.",address:"Palmeraie, Tozeur",governorate:"tozeur",phone:"+216 76 454 503",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.7,reviewCount:567,hours:"06h00 - 18h00",services:["Promenades à dos de chameau","Visites guidées","Photographie","Oasis"],coordinates:{lat:33.9197,lng:8.1335},verified:!0,premium:!1},{id:"41",name:"Hôtel Dar Cheraït",category:"hotel",subcategory:"Hôtel 4 étoiles",description:"Hôtel de charme à Tozeur avec musée du patrimoine et architecture traditionnelle.",address:"Zone touristique, Tozeur",governorate:"tozeur",phone:"+216 76 452 597",image:"https://images.pexels.com/photos/258154/pexels-photo-258154.jpeg",rating:4.2,reviewCount:234,hours:"24h/24",services:["Musée","Piscine","Restaurant","WiFi","Excursions"],coordinates:{lat:33.92,lng:8.13},verified:!0,premium:!0},{id:"42",name:"Oasis de Gabès",category:"tourism",subcategory:"Oasis maritime",description:"Unique oasis maritime au monde, mélange exceptionnel entre mer et désert.",address:"Oasis de Gabès, Gabès",governorate:"gabes",phone:"+216 75 270 254",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.4,reviewCount:298,hours:"07h00 - 18h00",services:["Promenades","Observation nature","Photographie","Écotourisme"],coordinates:{lat:33.8815,lng:10.0982},verified:!0,premium:!1},{id:"43",name:"Hôpital Régional de Gabès",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Gabès, services médicaux pour le sud-est tunisien.",address:"Route de Sfax, Gabès",governorate:"gabes",phone:"+216 75 274 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.7,reviewCount:78,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie","Maternité"],coordinates:{lat:33.88,lng:10.1},verified:!0,premium:!1},{id:"44",name:"Ksar Ouled Soltane",category:"cultural",subcategory:"Site archéologique",description:"Ksar berbère traditionnel, lieu de tournage de Star Wars, architecture unique en Tunisie.",address:"Ouled Soltane, Médenine",governorate:"medenine",phone:"+216 75 640 018",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.8,reviewCount:445,hours:"08h00 - 17h00",services:["Visites guidées","Photographie","Architecture berbère","Cinéma"],coordinates:{lat:33.037,lng:10.4065},verified:!0,premium:!1},{id:"45",name:"Hôpital de Médenine",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Médenine, services médicaux pour l'extrême sud.",address:"Avenue Habib Bourguiba, Médenine",governorate:"medenine",phone:"+216 75 640 144",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.5,reviewCount:56,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie générale"],coordinates:{lat:33.35,lng:10.5},verified:!0,premium:!1},{id:"46",name:"Ksar Hadada",category:"cultural",subcategory:"Site archéologique",description:"Ksar berbère traditionnel transformé en hôtel, architecture authentique du sud tunisien.",address:"Hadada, Tataouine",governorate:"tataouine",phone:"+216 75 850 005",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.2,reviewCount:167,hours:"24h/24",services:["Hébergement traditionnel","Restaurant","Visites guidées","Architecture berbère"],coordinates:{lat:32.9297,lng:10.4518},verified:!0,premium:!1},{id:"47",name:"Centre Commercial Carrefour Ariana",category:"alimentation",subcategory:"Supermarché",description:"Grand centre commercial avec supermarché Carrefour et nombreuses boutiques.",address:"Centre Urbain Nord, Ariana",governorate:"ariana",phone:"+216 71 717 200",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.1,reviewCount:789,hours:"09h00 - 22h00",services:["Supermarché","Boutiques","Restaurants","Parking gratuit","WiFi"],coordinates:{lat:36.8625,lng:10.1956},verified:!0,premium:!1},{id:"48",name:"Clinique Les Oliviers",category:"sante",subcategory:"Clinique privée",description:"Clinique privée moderne à Ariana, spécialisée en chirurgie et médecine.",address:"Ariana Ville, Ariana",governorate:"ariana",phone:"+216 71 716 500",email:"contact@clinique-oliviers.tn",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.2,reviewCount:145,hours:"08h00 - 18h00",services:["Consultations","Chirurgie","Imagerie","Laboratoire","Parking"],coordinates:{lat:36.86,lng:10.19},verified:!0,premium:!0},{id:"49",name:"Aéroport International Tunis-Carthage",category:"administrative",subcategory:"Aéroport",description:"Principal aéroport international de Tunisie, porte d'entrée du pays.",address:"Tunis-Carthage, Ben Arous",governorate:"ben-arous",phone:"+216 71 754 000",website:"oaca.nat.tn",image:"https://images.pexels.com/photos/912050/pexels-photo-912050.jpeg",rating:3.8,reviewCount:1567,hours:"24h/24",services:["Vols internationaux","Duty free","Restaurants","Location voitures","WiFi"],coordinates:{lat:36.851,lng:10.2272},verified:!0,premium:!1},{id:"50",name:"Hôpital Abderrahman Mami",category:"sante",subcategory:"Hôpital spécialisé",description:"Hôpital spécialisé en pneumologie et maladies respiratoires.",address:"Ariana, Ben Arous",governorate:"ben-arous",phone:"+216 71 719 500",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.1,reviewCount:89,hours:"24h/24 (urgences)",services:["Pneumologie","Urgences respiratoires","Consultations","Imagerie"],coordinates:{lat:36.84,lng:10.2},verified:!0,premium:!1},{id:"51",name:"Université de la Manouba",category:"ecole",subcategory:"Université publique",description:"Université spécialisée dans les sciences humaines et sociales.",address:"Campus universitaire, Manouba",governorate:"manouba",phone:"+216 71 600 399",email:"rectorat@uma.rnu.tn",website:"uma.rnu.tn",image:"https://images.pexels.com/photos/207692/pexels-photo-207692.jpeg",rating:4,reviewCount:234,hours:"08h00 - 17h00",services:["Bibliothèque","Laboratoires","WiFi","Cafétéria","Transport universitaire"],coordinates:{lat:36.8028,lng:10.0969},verified:!0,premium:!1},{id:"52",name:"Temple des Eaux de Zaghouan",category:"cultural",subcategory:"Site archéologique",description:"Site archéologique romain, source d'eau historique alimentant Carthage.",address:"Zaghouan Ville, Zaghouan",governorate:"zaghouan",phone:"+216 72 675 123",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.3,reviewCount:156,hours:"08h00 - 17h00",services:["Visites guidées","Site romain","Photographie","Randonnée"],coordinates:{lat:36.4028,lng:10.1428},verified:!0,premium:!1},{id:"53",name:"Hôpital Régional de Béja",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Béja, services médicaux pour le nord-ouest.",address:"Avenue Habib Bourguiba, Béja",governorate:"beja",phone:"+216 78 454 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.6,reviewCount:67,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie","Maternité"],coordinates:{lat:36.7256,lng:9.1817},verified:!0,premium:!1},{id:"54",name:"Restaurant El Andalous",category:"alimentation",subcategory:"Restaurant traditionnel",description:"Restaurant traditionnel à Béja, cuisine locale et spécialités régionales.",address:"Centre-ville, Béja",governorate:"beja",phone:"+216 78 456 789",image:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg",rating:4,reviewCount:45,hours:"12h00 - 22h00",services:["Cuisine locale","Spécialités régionales","Terrasse","Parking"],coordinates:{lat:36.72,lng:9.18},verified:!0,premium:!1},{id:"55",name:"Site Archéologique de Bulla Regia",category:"cultural",subcategory:"Site archéologique",description:"Site archéologique romain unique avec ses villas souterraines.",address:"Bulla Regia, Jendouba",governorate:"jendouba",phone:"+216 78 605 044",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.5,reviewCount:234,hours:"08h00 - 17h00",services:["Visites guidées","Site romain","Mosaïques","Musée"],coordinates:{lat:36.5644,lng:8.7553},verified:!0,premium:!1},{id:"56",name:"Kasbah du Kef",category:"cultural",subcategory:"Monument historique",description:"Forteresse historique du Kef, panorama exceptionnel sur la région.",address:"Centre-ville, Le Kef",governorate:"kef",phone:"+216 78 204 567",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.2,reviewCount:123,hours:"08h00 - 17h00",services:["Visites guidées","Vue panoramique","Histoire","Photographie"],coordinates:{lat:36.1742,lng:8.7042},verified:!0,premium:!1},{id:"57",name:"Site de Makthar",category:"cultural",subcategory:"Site archéologique",description:"Site archéologique romain et punique, vestiges historiques importants.",address:"Makthar, Siliana",governorate:"siliana",phone:"+216 78 870 123",image:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg",rating:4.1,reviewCount:89,hours:"08h00 - 17h00",services:["Visites guidées","Vestiges romains","Musée","Recherche"],coordinates:{lat:35.8578,lng:9.2011},verified:!0,premium:!1},{id:"58",name:"Hôpital Régional de Kasserine",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Kasserine, services médicaux pour la région centre-ouest.",address:"Avenue de l'Indépendance, Kasserine",governorate:"kasserine",phone:"+216 77 474 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.5,reviewCount:67,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie","Pédiatrie"],coordinates:{lat:35.1678,lng:8.8364},verified:!0,premium:!1},{id:"59",name:"Hôpital de Sidi Bouzid",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Sidi Bouzid, services médicaux de base.",address:"Avenue Habib Bourguiba, Sidi Bouzid",governorate:"sidi-bouzid",phone:"+216 76 634 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.4,reviewCount:45,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Maternité","Pédiatrie"],coordinates:{lat:35.0378,lng:9.4856},verified:!0,premium:!1},{id:"60",name:"Oasis de Douz",category:"tourism",subcategory:"Site naturel",description:"Porte du Sahara, oasis de Douz célèbre pour ses excursions dans le désert.",address:"Douz, Kébili",governorate:"kebili",phone:"+216 75 495 123",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.6,reviewCount:345,hours:"06h00 - 18h00",services:["Excursions désert","Méharée","Camping","Guides locaux"],coordinates:{lat:33.4667,lng:9.0333},verified:!0,premium:!1},{id:"61",name:"Banque de Tunisie",category:"divers",subcategory:"Banque",description:"Agence bancaire principale de la Banque de Tunisie, services financiers complets.",address:"Avenue Habib Bourguiba, Tunis",governorate:"tunis",phone:"+216 71 340 733",website:"bt.com.tn",image:"https://images.pexels.com/photos/259200/pexels-photo-259200.jpeg",rating:3.8,reviewCount:234,hours:"08h00 - 15h00",services:["Comptes bancaires","Crédits","Change","Cartes bancaires","Virements"],coordinates:{lat:36.8005,lng:10.182},verified:!0,premium:!1},{id:"62",name:"Poste Tunisienne Centrale",category:"administrative",subcategory:"Bureau de poste",description:"Bureau de poste central de Tunis, services postaux et financiers.",address:"Rue Charles de Gaulle, Tunis",governorate:"tunis",phone:"+216 71 254 000",image:"https://images.pexels.com/photos/259200/pexels-photo-259200.jpeg",rating:3.5,reviewCount:156,hours:"08h00 - 17h00",services:["Courrier","Colis","Mandats","Timbres","Services financiers"],coordinates:{lat:36.801,lng:10.1825},verified:!0,premium:!1},{id:"63",name:"Vétérinaire Dr. Sami Khelil",category:"animal",subcategory:"Vétérinaire",description:"Clinique vétérinaire moderne, soins pour animaux domestiques et de compagnie.",address:"Rue de Marseille, Tunis",governorate:"tunis",phone:"+216 71 567 234",email:"dr.khelil@veterinaire.tn",image:"https://images.pexels.com/photos/6235234/pexels-photo-6235234.jpeg",rating:4.7,reviewCount:123,hours:"09h00 - 18h00",services:["Consultations","Vaccinations","Chirurgie","Urgences","Toilettage"],coordinates:{lat:36.802,lng:10.184},verified:!0,premium:!0},{id:"64",name:"Animalerie Tunis Pets",category:"animal",subcategory:"Animalerie",description:"Animalerie complète, vente d'animaux de compagnie et accessoires.",address:"Avenue de la Liberté, Tunis",governorate:"tunis",phone:"+216 71 789 123",image:"https://images.pexels.com/photos/6235234/pexels-photo-6235234.jpeg",rating:4.3,reviewCount:89,hours:"09h00 - 19h00",services:["Animaux de compagnie","Accessoires","Nourriture","Conseil"],coordinates:{lat:36.803,lng:10.185},verified:!0,premium:!1},{id:"65",name:"Salle de Sport Fitness Plus",category:"sport",subcategory:"Salle de sport",description:"Salle de sport moderne avec équipements dernière génération.",address:"Les Berges du Lac, Tunis",governorate:"tunis",phone:"+216 71 960 123",email:"contact@fitnessplus.tn",image:"https://images.pexels.com/photos/1552252/pexels-photo-1552252.jpeg",rating:4.4,reviewCount:267,hours:"06h00 - 22h00",services:["Musculation","Cardio","Cours collectifs","Coach personnel","Vestiaires"],coordinates:{lat:36.82,lng:10.23},verified:!0,premium:!0},{id:"66",name:"Piscine Olympique Tunis",category:"sport",subcategory:"Piscine",description:"Complexe aquatique avec piscine olympique et bassins d'apprentissage.",address:"Cité Olympique, Tunis",governorate:"tunis",phone:"+216 71 785 456",image:"https://images.pexels.com/photos/1552252/pexels-photo-1552252.jpeg",rating:4.1,reviewCount:178,hours:"08h00 - 20h00",services:["Natation","Cours de natation","Aquagym","Compétitions"],coordinates:{lat:36.81,lng:10.19},verified:!0,premium:!1},{id:"67",name:"Boulangerie Moderne",category:"alimentation",subcategory:"Boulangerie",description:"Boulangerie artisanale, pain frais et pâtisseries traditionnelles.",address:"Rue de Rome, Tunis",governorate:"tunis",phone:"+216 71 456 234",image:"https://images.pexels.com/photos/1775043/pexels-photo-1775043.jpeg",rating:4.5,reviewCount:156,hours:"05h00 - 20h00",services:["Pain frais","Pâtisseries","Viennoiseries","Gâteaux sur commande"],coordinates:{lat:36.8015,lng:10.1835},verified:!0,premium:!1},{id:"68",name:"Café de Paris",category:"alimentation",subcategory:"Café",description:"Café historique de Tunis, lieu de rencontre traditionnel.",address:"Avenue Habib Bourguiba, Tunis",governorate:"tunis",phone:"+216 71 254 567",image:"https://images.pexels.com/photos/302899/pexels-photo-302899.jpeg",rating:4.2,reviewCount:345,hours:"06h00 - 23h00",services:["Café","Thé","Pâtisseries","WiFi","Terrasse"],coordinates:{lat:36.8,lng:10.1815},verified:!0,premium:!1},{id:"69",name:"Librairie Alif",category:"divers",subcategory:"Librairie",description:"Librairie spécialisée en littérature arabe et française, livres scolaires.",address:"Avenue de France, Tunis",governorate:"tunis",phone:"+216 71 567 890",email:"contact@librairie-alif.tn",image:"https://images.pexels.com/photos/1370295/pexels-photo-1370295.jpeg",rating:4.3,reviewCount:89,hours:"09h00 - 19h00",services:["Livres","Manuels scolaires","Papeterie","Commandes spéciales"],coordinates:{lat:36.8025,lng:10.1845},verified:!0,premium:!1},{id:"70",name:"Pressing Moderne",category:"divers",subcategory:"Pressing",description:"Service de nettoyage à sec et pressing, qualité professionnelle.",address:"Rue de Yougoslavie, Tunis",governorate:"tunis",phone:"+216 71 234 890",image:"https://images.pexels.com/photos/3993449/pexels-photo-3993449.jpeg",rating:4.1,reviewCount:67,hours:"08h00 - 18h00",services:["Nettoyage à sec","Repassage","Retouches","Livraison"],coordinates:{lat:36.8035,lng:10.1855},verified:!0,premium:!1},{id:"71",name:"Clinique Hannibal",category:"sante",subcategory:"Clinique privée",description:"Clinique privée moderne à Sousse, spécialisée en chirurgie esthétique.",address:"Avenue Léopold Sédar Senghor, Sousse",governorate:"sousse",phone:"+216 73 225 800",email:"contact@clinique-hannibal.tn",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.3,reviewCount:156,hours:"08h00 - 18h00",services:["Chirurgie esthétique","Dermatologie","Consultations","Laser"],coordinates:{lat:35.82,lng:10.635},verified:!0,premium:!0},{id:"72",name:"Pharmacie Nuit Sousse",category:"sante",subcategory:"Pharmacie",description:"Pharmacie de garde 24h/24 à Sousse, service d'urgence.",address:"Avenue Habib Bourguiba, Sousse",governorate:"sousse",phone:"+216 73 224 567",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4,reviewCount:123,hours:"24h/24",services:["Médicaments","Garde de nuit","Urgences","Conseil"],coordinates:{lat:35.825,lng:10.64},verified:!0,premium:!1},{id:"73",name:"Auto-École Sousse",category:"ecole",subcategory:"Formation professionnelle",description:"Auto-école agréée, formation au permis de conduire toutes catégories.",address:"Avenue de la République, Sousse",governorate:"sousse",phone:"+216 73 226 789",image:"https://images.pexels.com/photos/1545743/pexels-photo-1545743.jpeg",rating:4.2,reviewCount:234,hours:"08h00 - 18h00",services:["Permis B","Permis moto","Code de la route","Conduite accompagnée"],coordinates:{lat:35.828,lng:10.638},verified:!0,premium:!1},{id:"74",name:"Bijouterie Sousse Gold",category:"divers",subcategory:"Bijouterie",description:"Bijouterie traditionnelle, or 18 carats et bijoux sur mesure.",address:"Médina de Sousse, Sousse",governorate:"sousse",phone:"+216 73 227 456",image:"https://images.pexels.com/photos/1927574/pexels-photo-1927574.jpeg",rating:4.4,reviewCount:89,hours:"09h00 - 19h00",services:["Bijoux or","Réparations","Sur mesure","Expertise"],coordinates:{lat:35.826,lng:10.642},verified:!0,premium:!0},{id:"75",name:"Clinique Espoir",category:"sante",subcategory:"Clinique privée",description:"Clinique privée de Sfax, spécialisée en cardiologie et chirurgie.",address:"Route de l'Aéroport, Sfax",governorate:"sfax",phone:"+216 74 400 500",email:"contact@clinique-espoir.tn",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.2,reviewCount:178,hours:"24h/24",services:["Cardiologie","Chirurgie cardiaque","Urgences","Consultations"],coordinates:{lat:34.73,lng:10.75},verified:!0,premium:!0},{id:"76",name:"Laboratoire d'Analyses Sfax",category:"sante",subcategory:"Laboratoire",description:"Laboratoire d'analyses médicales, prélèvements et résultats rapides.",address:"Avenue Ali Belhouane, Sfax",governorate:"sfax",phone:"+216 74 298 456",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.1,reviewCount:145,hours:"07h00 - 19h00",services:["Analyses sanguines","Biochimie","Microbiologie","Résultats en ligne"],coordinates:{lat:34.735,lng:10.755},verified:!0,premium:!1},{id:"77",name:"Dentiste Dr. Leila Mansouri",category:"sante",subcategory:"Dentiste",description:"Cabinet dentaire moderne, soins dentaires et orthodontie.",address:"Avenue Hedi Chaker, Sfax",governorate:"sfax",phone:"+216 74 225 678",email:"dr.mansouri@dentiste.tn",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.6,reviewCount:234,hours:"09h00 - 17h00",services:["Soins dentaires","Orthodontie","Implants","Blanchiment"],coordinates:{lat:34.738,lng:10.758},verified:!0,premium:!0},{id:"78",name:"Pâtisserie La Rose",category:"alimentation",subcategory:"Pâtisserie",description:"Pâtisserie artisanale, gâteaux traditionnels et modernes.",address:"Avenue Habib Bourguiba, Sfax",governorate:"sfax",phone:"+216 74 226 789",image:"https://images.pexels.com/photos/1775043/pexels-photo-1775043.jpeg",rating:4.5,reviewCount:189,hours:"07h00 - 20h00",services:["Pâtisseries","Gâteaux de mariage","Macarons","Chocolats"],coordinates:{lat:34.742,lng:10.762},verified:!0,premium:!1},{id:"79",name:"Tribunal de Première Instance Sfax",category:"justice",subcategory:"Tribunal de première instance",description:"Tribunal de première instance de Sfax, justice civile et pénale.",address:"Avenue de la Liberté, Sfax",governorate:"sfax",phone:"+216 74 298 000",image:"https://images.pexels.com/photos/5668882/pexels-photo-5668882.jpeg",rating:3.5,reviewCount:67,hours:"08h00 - 16h00",services:["Justice civile","Justice pénale","État civil","Greffe"],coordinates:{lat:34.74,lng:10.758},verified:!0,premium:!1},{id:"80",name:"Hôpital de Nabeul",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Nabeul, services médicaux pour la région du Cap Bon.",address:"Route de Tunis, Nabeul",governorate:"nabeul",phone:"+216 72 285 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.8,reviewCount:123,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Maternité","Pédiatrie"],coordinates:{lat:36.45,lng:10.73},verified:!0,premium:!1},{id:"81",name:"École Primaire Nabeul Centre",category:"ecole",subcategory:"École primaire publique",description:"École primaire publique au centre de Nabeul.",address:"Avenue Habib Bourguiba, Nabeul",governorate:"nabeul",phone:"+216 72 285 200",image:"https://images.pexels.com/photos/207692/pexels-photo-207692.jpeg",rating:3.9,reviewCount:78,hours:"08h00 - 16h00",services:["Enseignement primaire","Cantine","Activités","Transport"],coordinates:{lat:36.455,lng:10.735},verified:!0,premium:!1},{id:"82",name:"Aéroport Monastir Habib Bourguiba",category:"administrative",subcategory:"Aéroport",description:"Aéroport international de Monastir, vols charters et réguliers.",address:"Skanes, Monastir",governorate:"monastir",phone:"+216 73 520 000",website:"oaca.nat.tn",image:"https://images.pexels.com/photos/912050/pexels-photo-912050.jpeg",rating:3.9,reviewCount:456,hours:"24h/24",services:["Vols internationaux","Location voitures","Restaurants","Duty free"],coordinates:{lat:35.7581,lng:10.7547},verified:!0,premium:!1},{id:"83",name:"Marina de Monastir",category:"tourism",subcategory:"Port de plaisance",description:"Marina moderne de Monastir, port de plaisance et centre touristique.",address:"Marina de Monastir, Monastir",governorate:"monastir",phone:"+216 73 462 855",image:"https://images.pexels.com/photos/1450360/pexels-photo-1450360.jpeg",rating:4.3,reviewCount:234,hours:"24h/24",services:["Port de plaisance","Restaurants","Boutiques","Excursions"],coordinates:{lat:35.77,lng:10.82},verified:!0,premium:!1},{id:"84",name:"Hôpital de Mahdia",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Mahdia, services médicaux pour la région.",address:"Route de Sfax, Mahdia",governorate:"mahdia",phone:"+216 73 681 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.7,reviewCount:89,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie","Maternité"],coordinates:{lat:35.5,lng:11.05},verified:!0,premium:!1},{id:"85",name:"Coopérative de Pêche Mahdia",category:"alimentation",subcategory:"Marché",description:"Coopérative de pêcheurs, vente directe de poissons frais.",address:"Port de Mahdia, Mahdia",governorate:"mahdia",phone:"+216 73 681 456",image:"https://images.pexels.com/photos/1450360/pexels-photo-1450360.jpeg",rating:4.2,reviewCount:156,hours:"05h00 - 14h00",services:["Poissons frais","Vente directe","Commandes","Livraison"],coordinates:{lat:35.505,lng:11.062},verified:!0,premium:!1},{id:"86",name:"Pharmacie Centrale Gafsa",category:"sante",subcategory:"Pharmacie",description:"Pharmacie centrale de Gafsa, médicaments et produits de santé.",address:"Avenue Habib Bourguiba, Gafsa",governorate:"gafsa",phone:"+216 76 221 456",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.9,reviewCount:67,hours:"08h00 - 20h00",services:["Médicaments","Parapharmacie","Conseil","Livraison"],coordinates:{lat:34.422,lng:8.782},verified:!0,premium:!1},{id:"87",name:"Restaurant Oasis",category:"alimentation",subcategory:"Restaurant traditionnel",description:"Restaurant traditionnel de Gafsa, cuisine du sud tunisien.",address:"Centre-ville, Gafsa",governorate:"gafsa",phone:"+216 76 222 789",image:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg",rating:4,reviewCount:89,hours:"12h00 - 22h00",services:["Cuisine du sud","Spécialités locales","Terrasse","Climatisation"],coordinates:{lat:34.423,lng:8.783},verified:!0,premium:!1},{id:"88",name:"Agence de Voyage Sahara Tours",category:"tourism",subcategory:"Agence de voyage",description:"Agence spécialisée dans les excursions sahariennes et circuits touristiques.",address:"Avenue Abou El Kacem Chebbi, Tozeur",governorate:"tozeur",phone:"+216 76 454 789",email:"contact@sahara-tours.tn",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.5,reviewCount:234,hours:"08h00 - 18h00",services:["Circuits désert","Excursions","Hébergement","Transport 4x4"],coordinates:{lat:33.918,lng:8.132},verified:!0,premium:!0},{id:"89",name:"Hôpital de Tozeur",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Tozeur, services médicaux pour le Jérid.",address:"Route de Gafsa, Tozeur",governorate:"tozeur",phone:"+216 76 454 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.6,reviewCount:56,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie générale"],coordinates:{lat:33.915,lng:8.13},verified:!0,premium:!1},{id:"90",name:"Pharmacie de Garde Bizerte",category:"sante",subcategory:"Pharmacie",description:"Pharmacie de garde à Bizerte, service 24h/24.",address:"Avenue Habib Bourguiba, Bizerte",governorate:"bizerte",phone:"+216 72 431 789",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4,reviewCount:78,hours:"24h/24",services:["Médicaments","Garde de nuit","Urgences","Parapharmacie"],coordinates:{lat:37.272,lng:9.872},verified:!0,premium:!1},{id:"91",name:"École Primaire Bizerte Centre",category:"ecole",subcategory:"École primaire publique",description:"École primaire publique au centre de Bizerte.",address:"Rue de la République, Bizerte",governorate:"bizerte",phone:"+216 72 432 200",image:"https://images.pexels.com/photos/207692/pexels-photo-207692.jpeg",rating:3.8,reviewCount:67,hours:"08h00 - 16h00",services:["Enseignement primaire","Cantine","Transport","Activités"],coordinates:{lat:37.273,lng:9.873},verified:!0,premium:!1},{id:"92",name:"Pharmacie Kairouan",category:"sante",subcategory:"Pharmacie",description:"Pharmacie centrale de Kairouan, médicaments et conseil pharmaceutique.",address:"Avenue de la République, Kairouan",governorate:"kairouan",phone:"+216 77 231 456",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.9,reviewCount:89,hours:"08h00 - 20h00",services:["Médicaments","Conseil","Parapharmacie","Matériel médical"],coordinates:{lat:35.672,lng:10.098},verified:!0,premium:!1},{id:"93",name:"Artisan Tapis Kairouan",category:"divers",subcategory:"Artisanat traditionnel",description:"Atelier de fabrication de tapis traditionnels de Kairouan.",address:"Médina de Kairouan, Kairouan",governorate:"kairouan",phone:"+216 77 232 567",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.6,reviewCount:123,hours:"08h00 - 18h00",services:["Tapis artisanaux","Sur mesure","Réparation","Export"],coordinates:{lat:35.675,lng:10.095},verified:!0,premium:!0},{id:"94",name:"Pharmacie Gabès Centre",category:"sante",subcategory:"Pharmacie",description:"Pharmacie centrale de Gabès, service pharmaceutique complet.",address:"Avenue Habib Bourguiba, Gabès",governorate:"gabes",phone:"+216 75 270 456",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.8,reviewCount:67,hours:"08h00 - 20h00",services:["Médicaments","Parapharmacie","Conseil","Matériel médical"],coordinates:{lat:33.882,lng:10.1},verified:!0,premium:!1},{id:"95",name:"Restaurant Les Palmiers",category:"alimentation",subcategory:"Restaurant traditionnel",description:"Restaurant traditionnel dans l'oasis de Gabès, cuisine locale.",address:"Oasis de Gabès, Gabès",governorate:"gabes",phone:"+216 75 271 234",image:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg",rating:4.1,reviewCount:78,hours:"12h00 - 22h00",services:["Cuisine locale","Cadre oasis","Terrasse","Spécialités"],coordinates:{lat:33.88,lng:10.095},verified:!0,premium:!1},{id:"96",name:"Pharmacie Médenine",category:"sante",subcategory:"Pharmacie",description:"Pharmacie de Médenine, service pharmaceutique pour l'extrême sud.",address:"Avenue Habib Bourguiba, Médenine",governorate:"medenine",phone:"+216 75 640 456",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.7,reviewCount:45,hours:"08h00 - 20h00",services:["Médicaments","Conseil","Parapharmacie","Urgences"],coordinates:{lat:33.352,lng:10.502},verified:!0,premium:!1},{id:"97",name:"Guide Touristique Sahara",category:"tourism",subcategory:"Guide touristique",description:"Guide touristique professionnel pour excursions dans le désert.",address:"Centre-ville, Médenine",governorate:"medenine",phone:"+216 98 765 123",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.7,reviewCount:189,hours:"Sur rendez-vous",services:["Excursions désert","Circuits culturels","Transport 4x4","Hébergement"],coordinates:{lat:33.348,lng:10.498},verified:!0,premium:!0},{id:"98",name:"Hôpital de Tataouine",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Tataouine, services médicaux de base.",address:"Avenue de l'Indépendance, Tataouine",governorate:"tataouine",phone:"+216 75 860 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.4,reviewCount:34,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Chirurgie générale"],coordinates:{lat:32.93,lng:10.45},verified:!0,premium:!1},{id:"99",name:"Hôpital de Kébili",category:"sante",subcategory:"Hôpital public",description:"Hôpital régional de Kébili, services médicaux pour le Nefzaoua.",address:"Avenue Habib Bourguiba, Kébili",governorate:"kebili",phone:"+216 75 490 000",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:3.3,reviewCount:23,hours:"24h/24 (urgences)",services:["Urgences","Consultations","Maternité"],coordinates:{lat:33.7044,lng:8.9694},verified:!0,premium:!1},{id:"100",name:"Camping Sahara Douz",category:"hotel",subcategory:"Camping",description:"Camping dans le désert près de Douz, expérience authentique.",address:"Douz, Kébili",governorate:"kebili",phone:"+216 75 495 678",image:"https://images.pexels.com/photos/1058277/pexels-photo-1058277.jpeg",rating:4.2,reviewCount:167,hours:"24h/24",services:["Camping","Tentes berbères","Excursions","Restauration"],coordinates:{lat:33.465,lng:9.032},verified:!0,premium:!1},{id:"mahdia-001",name:"Restaurant Lella Hadria",category:"alimentation",subcategory:"Restaurant de poissons",description:"Restaurant traditionnel spécialisé dans les poissons frais et fruits de mer, vue sur le port de Mahdia.",address:"Port de Mahdia, Avenue Habib Bourguiba, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 508",email:"contact@lellahadria.tn",website:"lellahadria.tn",image:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg",rating:4.6,reviewCount:127,hours:"11h00 - 23h00",services:["Poissons frais","Fruits de mer","Terrasse vue mer","Parking","WiFi gratuit"],coordinates:{lat:35.5047,lng:11.0622},verified:!0,premium:!0},{id:"mahdia-002",name:"Hôtel El Borj",category:"hotel",subcategory:"Hôtel 3 étoiles",description:"Hôtel traditionnel au cœur de la médina de Mahdia, proche du port et des sites historiques.",address:"Médina de Mahdia, Rue Sidi Salem, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 018",email:"reservation@elborj-mahdia.tn",website:"elborj-mahdia.tn",image:"https://images.pexels.com/photos/258154/pexels-photo-258154.jpeg",rating:4.2,reviewCount:89,hours:"24h/24",services:["Réception 24h/24","Restaurant","WiFi gratuit","Climatisation","Vue mer"],coordinates:{lat:35.5035,lng:11.0615},verified:!0,premium:!1},{id:"mahdia-003",name:"Pharmacie Centrale Mahdia",category:"sante",subcategory:"Pharmacie",description:"Pharmacie centrale de Mahdia, garde de nuit, large gamme de médicaments et produits de santé.",address:"Avenue Habib Bourguiba, Centre-ville, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 125",email:"pharmacie.centrale.mahdia@gmail.com",website:"",image:"https://images.pexels.com/photos/5910955/pexels-photo-5910955.jpeg",rating:4.4,reviewCount:156,hours:"08h00 - 22h00 (Garde de nuit)",services:["Garde de nuit","Médicaments","Parapharmacie","Conseil pharmaceutique"],coordinates:{lat:35.5041,lng:11.0618},verified:!0,premium:!1},{id:"mahdia-004",name:"Garage Auto Mahdia",category:"divers",subcategory:"Garage automobile",description:"Garage spécialisé dans la réparation automobile, mécanique générale et carrosserie.",address:"Route de Sfax, Zone Industrielle, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 789",email:"garage.mahdia@gmail.com",website:"",image:"https://images.pexels.com/photos/3806288/pexels-photo-3806288.jpeg",rating:4.1,reviewCount:73,hours:"08h00 - 18h00",services:["Mécanique générale","Carrosserie","Peinture","Diagnostic électronique"],coordinates:{lat:35.4985,lng:11.0701},verified:!0,premium:!1},{id:"mahdia-005",name:"Boulangerie Patisserie Mahdia",category:"alimentation",subcategory:"Boulangerie",description:"Boulangerie traditionnelle proposant pain frais, viennoiseries et pâtisseries orientales.",address:"Rue de la République, Centre-ville, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 234",email:"",website:"",image:"https://images.pexels.com/photos/1775043/pexels-photo-1775043.jpeg",rating:4.5,reviewCount:92,hours:"05h30 - 20h00",services:["Pain frais","Viennoiseries","Pâtisseries orientales","Gâteaux sur commande"],coordinates:{lat:35.5038,lng:11.0625},verified:!0,premium:!1},{id:"mahdia-006",name:"Amphithéâtre d'El Jem",category:"cultural",subcategory:"Site archéologique",description:"Amphithéâtre romain classé UNESCO, l'un des mieux conservés au monde.",address:"Centre-ville, El Jem, Mahdia 5160",governorate:"mahdia",phone:"+216 73 630 018",email:"eljem.monument@patrimoine.tn",website:"patrimoine.tn",image:"https://images.pexels.com/photos/7740160/pexels-photo-7740160.jpeg",rating:4.8,reviewCount:2847,hours:"08h00 - 17h30",services:["Visites guidées","Musée","Boutique souvenirs","Parking","Accessibilité PMR"],coordinates:{lat:35.2989,lng:10.7156},verified:!0,premium:!0},{id:"mahdia-007",name:"Hôtel Julius",category:"hotel",subcategory:"Hôtel 3 étoiles",description:"Hôtel moderne près de l'amphithéâtre d'El Jem, idéal pour les touristes.",address:"Avenue Habib Bourguiba, El Jem, Mahdia 5160",governorate:"mahdia",phone:"+216 73 630 044",email:"reservation@hoteljulius.tn",website:"hoteljulius.tn",image:"https://images.pexels.com/photos/271624/pexels-photo-271624.jpeg",rating:4.3,reviewCount:156,hours:"24h/24",services:["Réception 24h/24","Restaurant","WiFi gratuit","Parking","Climatisation"],coordinates:{lat:35.2995,lng:10.7162},verified:!0,premium:!1},{id:"mahdia-008",name:"Restaurant Dar Dhiafa",category:"alimentation",subcategory:"Restaurant traditionnel",description:"Restaurant traditionnel tunisien dans une maison d'hôtes authentique à El Jem.",address:"Rue des Martyrs, El Jem, Mahdia 5160",governorate:"mahdia",phone:"+216 73 630 156",email:"dardhiafa@gmail.com",website:"",image:"https://images.pexels.com/photos/1581384/pexels-photo-1581384.jpeg",rating:4.4,reviewCount:78,hours:"12h00 - 15h00, 19h00 - 23h00",services:["Cuisine traditionnelle","Couscous","Tajines","Terrasse","Parking"],coordinates:{lat:35.2987,lng:10.7148},verified:!0,premium:!1},{id:"mahdia-009",name:"Coopérative Agricole Ksour Essef",category:"alimentation",subcategory:"Coopérative agricole",description:"Coopérative agricole spécialisée dans l'huile d'olive extra vierge et produits du terroir.",address:"Route de Mahdia, Ksour Essef, Mahdia 5170",governorate:"mahdia",phone:"+216 73 655 089",email:"coop.ksour@agriculture.tn",website:"",image:"https://images.pexels.com/photos/33783/olive-oil-salad-dressing-cooking-olive.jpg",rating:4.6,reviewCount:134,hours:"08h00 - 17h00",services:["Huile d'olive","Olives","Produits bio","Vente directe","Dégustation"],coordinates:{lat:35.4156,lng:10.9789},verified:!0,premium:!1},{id:"mahdia-010",name:"École Primaire Ksour Essef",category:"ecole",subcategory:"École primaire publique",description:"École primaire publique de Ksour Essef, enseignement en arabe et français.",address:"Centre-ville, Ksour Essef, Mahdia 5170",governorate:"mahdia",phone:"+216 73 655 012",email:"ecole.ksour@education.tn",website:"",image:"https://images.pexels.com/photos/289740/pexels-photo-289740.jpeg",rating:4.2,reviewCount:45,hours:"08h00 - 16h00",services:["Enseignement primaire","Cantine scolaire","Transport scolaire","Activités parascolaires"],coordinates:{lat:35.4162,lng:10.9795},verified:!0,premium:!1},{id:"mahdia-011",name:"Port de Pêche Chebba",category:"alimentation",subcategory:"Marché aux poissons",description:"Port de pêche traditionnel de Chebba, vente directe de poissons frais et fruits de mer.",address:"Port de Chebba, Chebba, Mahdia 5080",governorate:"mahdia",phone:"+216 73 689 045",email:"port.chebba@peche.tn",website:"",image:"https://images.pexels.com/photos/1907642/pexels-photo-1907642.jpeg",rating:4.3,reviewCount:89,hours:"05h00 - 14h00",services:["Poissons frais","Fruits de mer","Vente directe","Prix de gros","Livraison"],coordinates:{lat:35.2372,lng:11.1156},verified:!0,premium:!1},{id:"mahdia-012",name:"Clinique Vétérinaire Chebba",category:"animal",subcategory:"Vétérinaire",description:"Clinique vétérinaire moderne pour animaux domestiques et de ferme.",address:"Avenue de la République, Chebba, Mahdia 5080",governorate:"mahdia",phone:"+216 73 689 167",email:"vet.chebba@gmail.com",website:"",image:"https://images.pexels.com/photos/6235233/pexels-photo-6235233.jpeg",rating:4.5,reviewCount:67,hours:"08h00 - 18h00, Urgences 24h/24",services:["Consultation","Vaccination","Chirurgie","Urgences","Animaux de ferme"],coordinates:{lat:35.2378,lng:11.1162},verified:!0,premium:!1},{id:"mahdia-013",name:"Société SOTUMAG Rejiche",category:"construction",subcategory:"Matériaux de construction",description:"Société spécialisée dans la vente de matériaux de construction et équipements BTP.",address:"Zone Industrielle, Rejiche, Mahdia 5090",governorate:"mahdia",phone:"+216 73 677 234",email:"sotumag.rejiche@gmail.com",website:"sotumag.tn",image:"https://images.pexels.com/photos/1216589/pexels-photo-1216589.jpeg",rating:4.1,reviewCount:52,hours:"07h30 - 17h00",services:["Ciment","Fer à béton","Carrelage","Sanitaires","Livraison","Crédit"],coordinates:{lat:35.3845,lng:10.8934},verified:!0,premium:!1},{id:"mahdia-014",name:"Menuiserie Bois Noble",category:"construction",subcategory:"Menuiserie",description:"Atelier de menuiserie artisanale, fabrication de meubles sur mesure en bois noble.",address:"Rue de l'Artisanat, Rejiche, Mahdia 5090",governorate:"mahdia",phone:"+216 73 677 456",email:"boisnoble.rejiche@yahoo.fr",website:"",image:"https://images.pexels.com/photos/175709/pexels-photo-175709.jpeg",rating:4.7,reviewCount:38,hours:"08h00 - 17h00",services:["Meubles sur mesure","Restauration","Bois noble","Livraison","Installation"],coordinates:{lat:35.3851,lng:10.8941},verified:!0,premium:!1},{id:"mahdia-015",name:"Café Sidi Bou Said Hiboun",category:"alimentation",subcategory:"Café",description:"Café traditionnel tunisien avec terrasse, thé à la menthe et narguilé.",address:"Place Centrale, Hiboun, Mahdia 5140",governorate:"mahdia",phone:"+216 73 645 123",email:"",website:"",image:"https://images.pexels.com/photos/302899/pexels-photo-302899.jpeg",rating:4.2,reviewCount:67,hours:"06h00 - 24h00",services:["Thé à la menthe","Café turc","Narguilé","Terrasse","WiFi gratuit"],coordinates:{lat:35.3567,lng:10.9234},verified:!0,premium:!1},{id:"mahdia-016",name:"Banque Zitouna Hiboun",category:"divers",subcategory:"Banque",description:"Agence bancaire Zitouna offrant tous les services bancaires et financiers.",address:"Avenue Habib Bourguiba, Hiboun, Mahdia 5140",governorate:"mahdia",phone:"+216 73 645 200",email:"hiboun@banquezitouna.com.tn",website:"banquezitouna.com.tn",image:"https://images.pexels.com/photos/259200/pexels-photo-259200.jpeg",rating:4,reviewCount:89,hours:"08h00 - 15h00",services:["Comptes bancaires","Crédits","Change","Virements","Cartes bancaires"],coordinates:{lat:35.3572,lng:10.9241},verified:!0,premium:!1},{id:"mahdia-017",name:"Huilerie Sidi Alouane",category:"alimentation",subcategory:"Huilerie",description:"Huilerie traditionnelle produisant de l'huile d'olive extra vierge de qualité supérieure.",address:"Route de Mahdia, Sidi Alouane, Mahdia 5180",governorate:"mahdia",phone:"+216 73 658 078",email:"huilerie.sidialouane@gmail.com",website:"",image:"https://images.pexels.com/photos/33783/olive-oil-salad-dressing-cooking-olive.jpg",rating:4.8,reviewCount:145,hours:"08h00 - 17h00",services:["Huile d'olive extra vierge","Pressage à froid","Vente directe","Dégustation","Export"],coordinates:{lat:35.4234,lng:10.8567},verified:!0,premium:!0},{id:"mahdia-018",name:"Auto-École Salam",category:"ecole",subcategory:"Auto-école",description:"Auto-école agréée pour permis de conduire catégories A, B et C.",address:"Rue Principale, Sidi Alouane, Mahdia 5180",governorate:"mahdia",phone:"+216 73 658 234",email:"autoecole.salam@gmail.com",website:"",image:"https://images.pexels.com/photos/3807277/pexels-photo-3807277.jpeg",rating:4.3,reviewCount:156,hours:"08h00 - 18h00",services:["Permis B","Permis A","Permis C","Code de la route","Conduite accompagnée"],coordinates:{lat:35.4241,lng:10.8574},verified:!0,premium:!1},{id:"mahdia-019",name:"Ferme Avicole Chamekh",category:"animal",subcategory:"Élevage avicole",description:"Ferme moderne d'élevage de volailles, production d'œufs et poulets fermiers.",address:"Route Rurale, Ouled Chamekh, Mahdia 5190",governorate:"mahdia",phone:"+216 73 667 345",email:"ferme.chamekh@agriculture.tn",website:"",image:"https://images.pexels.com/photos/1300355/pexels-photo-1300355.jpeg",rating:4.4,reviewCount:67,hours:"06h00 - 18h00",services:["Œufs frais","Poulets fermiers","Vente directe","Livraison","Produits bio"],coordinates:{lat:35.3678,lng:10.7845},verified:!0,premium:!1},{id:"mahdia-020",name:"Dispensaire Rural Ouled Chamekh",category:"sante",subcategory:"Dispensaire",description:"Dispensaire rural offrant soins de base et consultations médicales.",address:"Centre-ville, Ouled Chamekh, Mahdia 5190",governorate:"mahdia",phone:"+216 73 667 089",email:"dispensaire.chamekh@sante.tn",website:"",image:"https://images.pexels.com/photos/263402/pexels-photo-263402.jpeg",rating:4.1,reviewCount:78,hours:"08h00 - 16h00",services:["Consultations","Soins infirmiers","Vaccinations","Urgences mineures"],coordinates:{lat:35.3685,lng:10.7852},verified:!0,premium:!1},{id:"mahdia-021",name:"Atelier Poterie Melloulech",category:"divers",subcategory:"Artisanat traditionnel",description:"Atelier de poterie traditionnelle tunisienne, fabrication artisanale de céramiques.",address:"Rue de l'Artisanat, Melloulech, Mahdia 5200",governorate:"mahdia",phone:"+216 73 672 156",email:"poterie.melloulech@artisanat.tn",website:"",image:"https://images.pexels.com/photos/1094767/pexels-photo-1094767.jpeg",rating:4.6,reviewCount:45,hours:"08h00 - 17h00",services:["Poterie traditionnelle","Céramiques","Cours de poterie","Vente directe","Export"],coordinates:{lat:35.2845,lng:10.6789},verified:!0,premium:!1},{id:"mahdia-022",name:"Épicerie Générale Melloulech",category:"alimentation",subcategory:"Épicerie",description:"Épicerie générale proposant produits alimentaires, légumes frais et articles ménagers.",address:"Place du Marché, Melloulech, Mahdia 5200",governorate:"mahdia",phone:"+216 73 672 089",email:"",website:"",image:"https://images.pexels.com/photos/264636/pexels-photo-264636.jpeg",rating:4.2,reviewCount:34,hours:"07h00 - 20h00",services:["Produits alimentaires","Légumes frais","Articles ménagers","Crédit","Livraison"],coordinates:{lat:35.2851,lng:10.6796},verified:!0,premium:!1},{id:"mahdia-023",name:"Coiffeur Moderne Boumerdes",category:"divers",subcategory:"Coiffeur",description:"Salon de coiffure moderne pour hommes et femmes, soins capillaires et esthétique.",address:"Avenue Principale, Boumerdes, Mahdia 5210",governorate:"mahdia",phone:"+216 73 681 234",email:"coiffeur.boumerdes@gmail.com",website:"",image:"https://images.pexels.com/photos/3993449/pexels-photo-3993449.jpeg",rating:4.4,reviewCount:89,hours:"09h00 - 19h00",services:["Coupe homme","Coupe femme","Coloration","Soins capillaires","Maquillage"],coordinates:{lat:35.3123,lng:10.7456},verified:!0,premium:!1},{id:"mahdia-024",name:"Station Service Total Boumerdes",category:"divers",subcategory:"Station-service",description:"Station-service Total avec carburants, boutique et services automobiles.",address:"Route Nationale GP1, Boumerdes, Mahdia 5210",governorate:"mahdia",phone:"+216 73 681 567",email:"station.boumerdes@total.tn",website:"total.tn",image:"https://images.pexels.com/photos/33688/delicate-arch-night-stars-landscape.jpg",rating:4,reviewCount:123,hours:"24h/24",services:["Essence","Gasoil","Boutique","Lavage auto","Gonflage pneus"],coordinates:{lat:35.3129,lng:10.7463},verified:!0,premium:!1},{id:"mahdia-025",name:"Laboratoire d'Analyses Souassi",category:"sante",subcategory:"Laboratoire",description:"Laboratoire d'analyses médicales, prélèvements et examens biologiques.",address:"Centre Médical, Souassi, Mahdia 5220",governorate:"mahdia",phone:"+216 73 695 234",email:"labo.souassi@analyses.tn",website:"",image:"https://images.pexels.com/photos/3786157/pexels-photo-3786157.jpeg",rating:4.3,reviewCount:156,hours:"07h00 - 14h00",services:["Analyses sanguines","Prélèvements","Examens biologiques","Résultats rapides"],coordinates:{lat:35.4567,lng:10.8123},verified:!0,premium:!1},{id:"mahdia-026",name:"Magasin Électroménager Souassi",category:"divers",subcategory:"Électroménager",description:"Magasin spécialisé dans la vente d'électroménager et équipements domestiques.",address:"Rue Commerciale, Souassi, Mahdia 5220",governorate:"mahdia",phone:"+216 73 695 456",email:"electromenager.souassi@gmail.com",website:"",image:"https://images.pexels.com/photos/4239146/pexels-photo-4239146.jpeg",rating:4.2,reviewCount:67,hours:"09h00 - 18h00",services:["Réfrigérateurs","Lave-linge","Climatiseurs","Installation","SAV","Crédit"],coordinates:{lat:35.4574,lng:10.813},verified:!0,premium:!1},{id:"mahdia-027",name:"Pressing Moderne Essouassi",category:"divers",subcategory:"Pressing",description:"Service de nettoyage à sec et pressing, repassage professionnel.",address:"Centre Commercial, Essouassi, Mahdia 5230",governorate:"mahdia",phone:"+216 73 687 123",email:"pressing.essouassi@gmail.com",website:"",image:"https://images.pexels.com/photos/5624983/pexels-photo-5624983.jpeg",rating:4.1,reviewCount:45,hours:"08h00 - 18h00",services:["Nettoyage à sec","Repassage","Retouches","Livraison à domicile"],coordinates:{lat:35.3789,lng:10.7234},verified:!0,premium:!1},{id:"mahdia-028",name:"Cabinet Dentaire Dr. Amira",category:"sante",subcategory:"Dentiste",description:"Cabinet dentaire moderne, soins dentaires généraux et esthétiques.",address:"Résidence Médicale, Essouassi, Mahdia 5230",governorate:"mahdia",phone:"+216 73 687 345",email:"dr.amira.dentiste@gmail.com",website:"",image:"https://images.pexels.com/photos/3845810/pexels-photo-3845810.jpeg",rating:4.7,reviewCount:123,hours:"09h00 - 17h00",services:["Soins dentaires","Détartrage","Blanchiment","Prothèses","Orthodontie"],coordinates:{lat:35.3796,lng:10.7241},verified:!0,premium:!0},{id:"mahdia-029",name:"Librairie Papeterie Chorbane",category:"divers",subcategory:"Librairie",description:"Librairie papeterie proposant livres, fournitures scolaires et articles de bureau.",address:"Rue de l'École, Chorbane, Mahdia 5240",governorate:"mahdia",phone:"+216 73 674 123",email:"librairie.chorbane@gmail.com",website:"",image:"https://images.pexels.com/photos/1370295/pexels-photo-1370295.jpeg",rating:4.3,reviewCount:56,hours:"08h00 - 18h00",services:["Livres scolaires","Fournitures","Papeterie","Photocopie","Reliure"],coordinates:{lat:35.2567,lng:10.6234},verified:!0,premium:!1},{id:"mahdia-030",name:"Pharmacie de Garde Chorbane",category:"sante",subcategory:"Pharmacie",description:"Pharmacie de garde assurant la continuité des soins pharmaceutiques.",address:"Place Centrale, Chorbane, Mahdia 5240",governorate:"mahdia",phone:"+216 73 674 456",email:"pharmacie.chorbane@gmail.com",website:"",image:"https://images.pexels.com/photos/5910955/pexels-photo-5910955.jpeg",rating:4.2,reviewCount:89,hours:"08h00 - 20h00 (Garde week-end)",services:["Médicaments","Parapharmacie","Garde week-end","Conseil pharmaceutique"],coordinates:{lat:35.2574,lng:10.6241},verified:!0,premium:!1},{id:"mahdia-031",name:"Bijouterie Or et Argent Mahdia",category:"divers",subcategory:"Bijouterie",description:"Bijouterie spécialisée dans l'or 18 carats, argent et bijoux traditionnels tunisiens.",address:"Souk de Mahdia, Médina, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 678",email:"bijouterie.mahdia@gmail.com",website:"",image:"https://images.pexels.com/photos/1927259/pexels-photo-1927259.jpeg",rating:4.5,reviewCount:78,hours:"09h00 - 19h00",services:["Or 18 carats","Argent","Bijoux traditionnels","Réparations","Sur mesure"],coordinates:{lat:35.5032,lng:11.0608},verified:!0,premium:!1},{id:"mahdia-032",name:"Agence Immobilière Mahdia Properties",category:"divers",subcategory:"Immobilier",description:"Agence immobilière spécialisée dans la vente et location de biens à Mahdia.",address:"Avenue Farhat Hached, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 890",email:"contact@mahdiaproperties.tn",website:"mahdiaproperties.tn",image:"https://images.pexels.com/photos/280229/pexels-photo-280229.jpeg",rating:4.3,reviewCount:67,hours:"09h00 - 17h00",services:["Vente immobilière","Location","Estimation","Conseil juridique","Gestion locative"],coordinates:{lat:35.5055,lng:11.0635},verified:!0,premium:!0},{id:"mahdia-033",name:"Taxi Mahdia Centre",category:"taxi",subcategory:"Station de taxi",description:"Station de taxi centrale de Mahdia, service 24h/24, tarifs officiels.",address:"Place de l'Indépendance, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 777",email:"taxi.mahdia@transport.tn",website:"",image:"https://images.pexels.com/photos/2882234/pexels-photo-2882234.jpeg",rating:4,reviewCount:234,hours:"24h/24",services:["Transport urbain","Courses longues","Aéroport","Tarifs officiels","Service 24h/24"],coordinates:{lat:35.5048,lng:11.0628},verified:!0,premium:!1},{id:"mahdia-034",name:"Salle de Sport Fitness Club Mahdia",category:"sport",subcategory:"Salle de sport",description:"Salle de sport moderne avec équipements de musculation et cours collectifs.",address:"Rue du Sport, Nouvelle Ville, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 999",email:"fitnessclub.mahdia@gmail.com",website:"",image:"https://images.pexels.com/photos/1552252/pexels-photo-1552252.jpeg",rating:4.4,reviewCount:145,hours:"06h00 - 22h00",services:["Musculation","Cardio","Cours collectifs","Coach personnel","Vestiaires"],coordinates:{lat:35.5062,lng:11.0645},verified:!0,premium:!1},{id:"mahdia-035",name:"Agence de Voyage Mahdia Tours",category:"tourism",subcategory:"Agence de voyage",description:"Agence de voyage spécialisée dans les circuits touristiques en Tunisie et voyages organisés.",address:"Avenue Habib Bourguiba, Mahdia 5100",governorate:"mahdia",phone:"+216 73 694 555",email:"contact@mahdiatours.tn",website:"mahdiatours.tn",image:"https://images.pexels.com/photos/1008155/pexels-photo-1008155.jpeg",rating:4.6,reviewCount:189,hours:"09h00 - 18h00",services:["Circuits Tunisie","Voyages organisés","Réservation hôtels","Billets d'avion","Visa"],coordinates:{lat:35.5044,lng:11.062},verified:!0,premium:!0}],ke=Object.freeze(Object.defineProperty({__proto__:null,establishments:_e},Symbol.toStringTag,{value:"Module"})),Se=({onSearch:t,onFilterChange:s,onEstablishmentSelect:r,establishments:i})=>{const[a,o]=e.useState(""),[l,d]=e.useState(!1),[u,h]=e.useState({}),[w,j]=e.useState([]),[N,C]=e.useState(0),[_,k]=e.useState([]),[S,T]=e.useState(!1),[P,E]=e.useState(!1),[A,R]=e.useState([]),[O,M]=e.useState(!1),{isListening:$,transcript:I,isSupported:L,startListening:q,stopListening:B,resetTranscript:z}=(()=>{const[t,s]=e.useState(!1),[r,i]=e.useState(""),[a,n]=e.useState(!1);return e.useEffect(()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;n(!!e)},[]),{isListening:t,transcript:r,isSupported:a,startListening:(e="fr")=>{if(!a)return;const t=new(window.SpeechRecognition||window.webkitSpeechRecognition);t.continuous=!1,t.interimResults=!1,t.lang={fr:"fr-FR",ar:"ar-TN",en:"en-US",ru:"ru-RU",es:"es-ES",it:"it-IT"}[e],t.onstart=()=>{s(!0)},t.onresult=e=>{const t=e.resultIndex,s=e.results[t][0].transcript;i(s)},t.onerror=e=>{s(!1)},t.onend=()=>{s(!1)},t.start()},stopListening:()=>{s(!1)},resetTranscript:()=>i("")}})(),{t:D,language:U,isRTL:H}=fe(),G=we(a,300),F=je(i||_e),K=["hotel","cultural","administrative","sport","animal","construction","alimentation","sante","justice","ecole","taxi","tourism","divers"],V=["tunis","ariana","ben-arous","manouba","nabeul","zaghouan","bizerte","beja","jendouba","kef","siliana","sousse","monastir","mahdia","sfax","kairouan","kasserine","sidi-bouzid","gabes","medenine","tataouine","gafsa","tozeur","kebili"];e.useEffect(()=>{I&&(o(I),z())},[I,t,z]),e.useEffect(()=>{G&&G.length>=1?t(G):""===G&&t("")},[G,t]),e.useEffect(()=>{const e=Object.values(u).filter(e=>null!=e&&""!==e).length;C(e),s&&s(u)},[u,s]),e.useEffect(()=>{if(a.length>=1){E(!0);const e=Ne(F,a);R(e.slice(0,12));const t=new Set;e.slice(0,8).forEach(e=>{t.add(e.name)});const s=new Set(e.map(e=>e.subcategory));Array.from(s).slice(0,5).forEach(e=>{t.add(e)}),K.forEach(e=>{const s=D(e);s.toLowerCase().includes(a.toLowerCase())&&t.add(s)}),V.forEach(e=>{const s=D(e);s.toLowerCase().includes(a.toLowerCase())&&t.add(s)}),k(Array.from(t).slice(0,10)),T(!0),M(e.length>0),E(!1)}else k([]),T(!1),R([]),M(!1)},[a,D,F]);const W=(e,t)=>{h(s=>({...s,[e]:t,..."category"===e?{subcategory:void 0}:{}})),"category"===e&&j(t&&Ce[t]||[])},J=()=>{h({})},Y=[{key:"verified",label:"Vérifiés",icon:x,color:"text-green-600"},{key:"premium",label:"Premium",icon:v,color:"text-yellow-600"},{key:"openNow",label:"Ouvert maintenant",icon:y,color:"text-blue-600"},{key:"hasParking",label:"Parking",icon:n,color:"text-purple-600"}];return pe.jsxs("div",{className:"relative group",children:[pe.jsx("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&t(a.trim()),T(!1)},children:pe.jsxs("div",{className:"relative flex items-center",children:[pe.jsx(p,{className:`absolute ${H?"right-6":"left-6"} h-6 w-6 text-gray-400 group-focus-within:text-blue-500 transition-colors`}),pe.jsx("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Rechercher : médecin, restaurant, plombier, avocat...",className:`w-full ${H?"pr-16 pl-32":"pl-16 pr-32"} py-6 text-lg border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all shadow-lg hover:shadow-xl bg-white ${H?"text-right":"text-left"} placeholder-gray-400 ${P?"bg-blue-50":""}`,dir:H?"rtl":"ltr","aria-label":"Rechercher un établissement",onFocus:()=>a.length>=1&&T(!0),onBlur:()=>setTimeout(()=>{T(!1),M(!1)},300),autoComplete:"off",autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&(T(!1),M(!1))}}),P&&pe.jsx("div",{className:`absolute ${H?"right-20":"left-20"} top-1/2 transform -translate-y-1/2`,children:pe.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})}),pe.jsxs("div",{className:`absolute ${H?"left-6":"right-6"} flex items-center space-x-2 ${H?"space-x-reverse":""}`,children:[pe.jsxs("button",{type:"button",onClick:()=>d(!l),className:"relative p-3 rounded-full transition-all shadow-md hover:shadow-lg "+(N>0?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-800"),"aria-label":"Filtres de recherche",children:[pe.jsx(g,{className:"h-5 w-5"}),N>0&&pe.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:N})]}),L&&pe.jsx("button",{type:"button",onClick:()=>{$?B():q(U)},className:"p-3 rounded-full transition-all shadow-md hover:shadow-lg "+($?"bg-red-500 text-white animate-pulse scale-110":"bg-blue-500 text-white hover:bg-blue-600 hover:scale-105"),"aria-label":$?"Arrêter l'écoute vocale":"Recherche vocale",children:$?pe.jsx(b,{className:"h-6 w-6"}):pe.jsx(f,{className:"h-6 w-6"})})]})]})}),(S||O)&&a.length>=1&&(_.length>0||A.length>0)&&pe.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-xl z-20 max-h-96 overflow-y-auto backdrop-blur-sm",children:[S&&_.length>0&&pe.jsxs("div",{className:"border-b border-gray-100",children:[pe.jsxs("div",{className:"px-4 py-2 bg-gray-50 text-sm font-medium text-gray-600",children:["Suggestions (",_.length,")"]}),_.map((e,s)=>pe.jsx("button",{onClick:()=>(e=>{o(e),t(e),T(!1),M(!1)})(e),className:`w-full px-4 py-3 text-left hover:bg-blue-50 transition-colors border-b border-gray-50 last:border-b-0 ${H?"text-right":"text-left"} group`,children:pe.jsxs("div",{className:"flex items-center space-x-3",children:[pe.jsx(p,{className:"h-4 w-4 text-gray-400 group-hover:text-blue-500"}),pe.jsx("span",{className:"text-gray-900 font-medium group-hover:text-blue-700",children:e})]})},`suggestion-${s}`))]}),O&&A.length>0&&pe.jsxs("div",{children:[pe.jsxs("div",{className:"px-4 py-2 bg-gray-50 text-sm font-medium text-gray-600",children:["Établissements (",A.length," résultats)"]}),A.map(e=>pe.jsx("button",{onClick:()=>(e=>{r&&r(e),T(!1),M(!1)})(e),className:`w-full px-4 py-3 text-left hover:bg-blue-50 transition-colors border-b border-gray-50 last:border-b-0 ${H?"text-right":"text-left"} group`,children:pe.jsxs("div",{className:"flex items-center space-x-3",children:[pe.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden flex-shrink-0",children:pe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"})}),pe.jsxs("div",{className:"flex-1 min-w-0",children:[pe.jsx("div",{className:"font-medium text-gray-900 group-hover:text-blue-700 truncate",children:e.name}),pe.jsxs("div",{className:"text-sm text-gray-500 truncate",children:[e.subcategory," • ",D(e.governorate)]}),pe.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[pe.jsxs("div",{className:"flex items-center",children:[pe.jsx("span",{className:"text-yellow-400",children:"★"}),pe.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e.rating})]}),e.verified&&pe.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Vérifié"})]})]})]})},`result-${e.id}`))]})]}),N>0&&pe.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[Object.entries(u).map(([e,t])=>{if(!t)return null;return pe.jsxs("span",{className:"inline-flex items-center space-x-1 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:[pe.jsx("span",{children:((e,t)=>{switch(e){case"category":case"governorate":return D(t);case"subcategory":return t;case"verified":return"Vérifiés";case"premium":return"Premium";case"minRating":return`${t}+ étoiles`;case"openNow":return"Ouvert maintenant";case"hasParking":return"Parking";case"hasWifi":return"WiFi";case"priceRange":return"budget"===t?"Économique":"moderate"===t?"Modéré":"Haut de gamme";case"distance":return`${t}km`;default:return e}})(e,t)}),pe.jsx("button",{onClick:()=>(e=>{h(t=>{const s={...t};return delete s[e],s})})(e),className:"hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:pe.jsx(c,{className:"h-3 w-3"})})]},e)}),pe.jsx("button",{onClick:J,className:"text-sm text-blue-600 hover:text-blue-700 font-medium px-2 py-1 hover:bg-blue-50 rounded transition-colors",children:"Tout effacer"})]}),l&&pe.jsxs("div",{className:"absolute top-full left-0 right-0 mt-4 p-6 bg-white border border-gray-200 rounded-xl shadow-xl z-10 max-h-96 overflow-y-auto",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-6 "+(H?"flex-row-reverse":""),children:[pe.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Filtres de recherche"}),pe.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Fermer les filtres",children:pe.jsx(c,{className:"h-5 w-5"})})]}),pe.jsxs("div",{className:"mb-6",children:[pe.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Filtres rapides"}),pe.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Y.map(e=>{const t=e.icon,s=u[e.key];return pe.jsxs("button",{onClick:()=>W(e.key,!s),className:"flex items-center space-x-2 p-3 rounded-lg border-2 transition-all "+(s?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[pe.jsx(t,{className:`h-4 w-4 ${s?"text-blue-600":e.color}`}),pe.jsx("span",{className:"text-sm font-medium",children:e.label})]},e.key)})})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Catégorie"}),pe.jsxs("select",{value:u.category||"",onChange:e=>W("category",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[pe.jsx("option",{value:"",children:"Toutes les catégories"}),K.map(e=>pe.jsx("option",{value:e,children:D(e)},e))]})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Gouvernorat"}),pe.jsxs("select",{value:u.governorate||"",onChange:e=>W("governorate",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[pe.jsx("option",{value:"",children:"Tous les gouvernorats"}),V.map(e=>pe.jsx("option",{value:e,children:D(e)},e))]})]}),u.category&&w.length>0&&pe.jsxs("div",{className:"md:col-span-2",children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Sous-catégorie"}),pe.jsxs("select",{value:u.subcategory||"",onChange:e=>W("subcategory",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[pe.jsx("option",{value:"",children:"Toutes les sous-catégories"}),w.map(e=>pe.jsx("option",{value:e,children:e},e))]})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Note minimale"}),pe.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(e=>pe.jsxs("button",{onClick:()=>W("minRating",e===u.minRating?void 0:e),className:"flex items-center space-x-1 px-3 py-2 rounded-lg border transition-all "+(u.minRating===e?"border-yellow-500 bg-yellow-50 text-yellow-700":"border-gray-200 hover:border-gray-300"),children:[pe.jsx(m,{className:"h-4 w-4 "+(u.minRating===e?"text-yellow-500 fill-current":"text-gray-400")}),pe.jsxs("span",{className:"text-sm",children:[e,"+"]})]},e))})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Gamme de prix"}),pe.jsx("div",{className:"space-y-2",children:[{value:"budget",label:"Économique (€)"},{value:"moderate",label:"Modéré (€€)"},{value:"expensive",label:"Haut de gamme (€€€)"}].map(e=>pe.jsxs("label",{className:"flex items-center space-x-2",children:[pe.jsx("input",{type:"radio",name:"priceRange",value:e.value,checked:u.priceRange===e.value,onChange:e=>W("priceRange",e.target.value),className:"text-blue-600 focus:ring-blue-500"}),pe.jsx("span",{className:"text-sm",children:e.label})]},e.value))})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Distance maximale"}),pe.jsxs("select",{value:u.distance||"",onChange:e=>W("distance",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[pe.jsx("option",{value:"",children:"Toutes distances"}),pe.jsx("option",{value:"1",children:"1 km"}),pe.jsx("option",{value:"5",children:"5 km"}),pe.jsx("option",{value:"10",children:"10 km"}),pe.jsx("option",{value:"25",children:"25 km"}),pe.jsx("option",{value:"50",children:"50 km"})]})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Services"}),pe.jsx("div",{className:"space-y-2",children:pe.jsxs("label",{className:"flex items-center space-x-2",children:[pe.jsx("input",{type:"checkbox",checked:u.hasWifi||!1,onChange:e=>W("hasWifi",e.target.checked||void 0),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),pe.jsx("span",{className:"text-sm",children:"WiFi gratuit"})]})})]})]}),pe.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex justify-between items-center",children:[pe.jsx("button",{onClick:J,className:"text-sm text-gray-600 hover:text-gray-800 font-medium",children:"Effacer tous les filtres"}),pe.jsxs("div",{className:"flex space-x-3",children:[pe.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),pe.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Appliquer les filtres"})]})]})]}),$&&pe.jsx("div",{className:"absolute top-full left-0 right-0 mt-4 p-4 bg-red-50 border border-red-200 rounded-xl shadow-lg animate-pulse",children:pe.jsxs("p",{className:`text-red-600 text-base font-medium ${H?"text-right":"text-left"} flex items-center justify-center space-x-2`,children:[pe.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-ping"}),D("listening")]})})]})},Te=({isOpen:t,onClose:r,onApplyFilters:i,currentFilters:a})=>{const[o,l]=e.useState(a),[d,u]=e.useState([]),{t:p,isRTL:b}=fe(),[f,x]=e.useState(""),v=we(f,300);s.useEffect(()=>{o.category?u(Ce[o.category]||[]):u([])},[o.category]);const _=(e,t)=>{l(s=>({...s,[e]:t,..."category"===e?{subcategory:void 0}:{}}))},k=["hotel","cultural","administrative","sport","animal","construction","alimentation","sante","justice","ecole","taxi","tourism","divers"].filter(e=>!v||p(e).toLowerCase().includes(v.toLowerCase())),S=["tunis","ariana","ben-arous","manouba","nabeul","zaghouan","bizerte","beja","jendouba","kef","siliana","sousse","monastir","mahdia","sfax","kairouan","kasserine","sidi-bouzid","gabes","medenine","tataouine","gafsa","tozeur","kebili"].filter(e=>!v||p(e).toLowerCase().includes(v.toLowerCase())),T=()=>Object.values(o).filter(e=>null!=e&&""!==e).length;return t?pe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:pe.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[pe.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-xl",children:[pe.jsxs("div",{className:"flex items-center justify-between "+(b?"flex-row-reverse":""),children:[pe.jsxs("div",{className:"flex items-center space-x-3 "+(b?"space-x-reverse":""),children:[pe.jsx(g,{className:"h-6 w-6 text-blue-600"}),pe.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Filtres avancés"}),T()>0&&pe.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium",children:[T()," actifs"]})]}),pe.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:pe.jsx(c,{className:"h-6 w-6"})})]}),pe.jsx("div",{className:"mb-6",children:pe.jsxs("div",{className:"relative",children:[pe.jsx("input",{type:"text",value:f,onChange:e=>x(e.target.value),placeholder:"Rechercher dans les filtres...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),pe.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:pe.jsx(g,{className:"h-4 w-4 text-gray-400"})}),f&&pe.jsx("button",{onClick:()=>x(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:pe.jsx(c,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]})})]}),pe.jsxs("div",{className:"p-6 space-y-8",children:[pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[pe.jsx(n,{className:"inline h-4 w-4 mr-2"}),"Gouvernorat"]}),pe.jsxs("select",{value:o.governorate||"",onChange:e=>_("governorate",e.target.value||void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[pe.jsx("option",{value:"",children:"Tous les gouvernorats"}),S.map(e=>pe.jsx("option",{value:e,children:p(e)},e))]})]}),o.category&&d.length>0&&pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Sous-catégorie"}),pe.jsxs("select",{value:o.subcategory||"",onChange:e=>_("subcategory",e.target.value||void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[pe.jsx("option",{value:"",children:"Toutes les sous-catégories"}),d.map(e=>pe.jsx("option",{value:e,children:e},e))]})]}),pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[pe.jsx(g,{className:"inline h-4 w-4 mr-2"}),"Catégorie"]}),pe.jsxs("select",{value:o.category||"",onChange:e=>_("category",e.target.value||void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[pe.jsx("option",{value:"",children:"Toutes les catégories"}),k.map(e=>pe.jsx("option",{value:e,children:p(e)},e))]})]})]}),pe.jsxs("div",{children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Qualité et certification"}),pe.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[pe.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[pe.jsx("input",{type:"checkbox",checked:o.verified||!1,onChange:e=>_("verified",e.target.checked||void 0),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),pe.jsxs("div",{className:"flex items-center space-x-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:pe.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:pe.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),pe.jsx("span",{className:"text-sm font-medium",children:"Vérifiés"})]})]}),pe.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[pe.jsx("input",{type:"checkbox",checked:o.premium||!1,onChange:e=>_("premium",e.target.checked||void 0),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),pe.jsxs("div",{className:"flex items-center space-x-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:pe.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:pe.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),pe.jsx("span",{className:"text-sm font-medium",children:"Premium"})]})]}),pe.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[pe.jsx("input",{type:"checkbox",checked:o.openNow||!1,onChange:e=>_("openNow",e.target.checked||void 0),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),pe.jsxs("div",{className:"flex items-center space-x-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:pe.jsx(y,{className:"w-4 h-4 text-blue-600"})}),pe.jsx("span",{className:"text-sm font-medium",children:"Ouvert maintenant"})]})]}),pe.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[pe.jsx("input",{type:"checkbox",checked:o.familyFriendly||!1,onChange:e=>_("familyFriendly",e.target.checked||void 0),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),pe.jsxs("div",{className:"flex items-center space-x-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:pe.jsx(h,{className:"w-4 h-4 text-purple-600"})}),pe.jsx("span",{className:"text-sm font-medium",children:"Familial"})]})]})]})]}),pe.jsxs("div",{children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Services et équipements"}),pe.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[pe.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[pe.jsx("input",{type:"checkbox",checked:o.hasParking||!1,onChange:e=>_("hasParking",e.target.checked||void 0),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),pe.jsxs("div",{className:"flex items-center space-x-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:pe.jsx(w,{className:"w-4 h-4 text-green-600"})}),pe.jsx("span",{className:"text-sm font-medium",children:"Parking"})]})]}),pe.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[pe.jsx("input",{type:"checkbox",checked:o.hasWifi||!1,onChange:e=>_("hasWifi",e.target.checked||void 0),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),pe.jsxs("div",{className:"flex items-center space-x-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:pe.jsx(j,{className:"w-4 h-4 text-blue-600"})}),pe.jsx("span",{className:"text-sm font-medium",children:"WiFi gratuit"})]})]}),pe.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[pe.jsx("input",{type:"checkbox",checked:o.acceptsCards||!1,onChange:e=>_("acceptsCards",e.target.checked||void 0),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),pe.jsxs("div",{className:"flex items-center space-x-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:pe.jsx(N,{className:"w-4 h-4 text-indigo-600"})}),pe.jsx("span",{className:"text-sm font-medium",children:"Cartes acceptées"})]})]}),pe.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[pe.jsx("input",{type:"checkbox",checked:o.wheelchairAccessible||!1,onChange:e=>_("wheelchairAccessible",e.target.checked||void 0),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),pe.jsxs("div",{className:"flex items-center space-x-2",children:[pe.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:pe.jsx(C,{className:"w-4 h-4 text-orange-600"})}),pe.jsx("span",{className:"text-sm font-medium",children:"Accessible PMR"})]})]})]})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[pe.jsx(m,{className:"inline h-4 w-4 mr-2"}),"Note minimale"]}),pe.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(e=>pe.jsxs("button",{onClick:()=>_("minRating",e===o.minRating?void 0:e),className:"flex items-center space-x-1 px-4 py-3 rounded-lg border transition-all "+(o.minRating===e?"border-yellow-500 bg-yellow-50 text-yellow-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[pe.jsx(m,{className:"h-4 w-4 "+(o.minRating===e?"text-yellow-500 fill-current":"text-gray-400")}),pe.jsxs("span",{className:"text-sm font-medium",children:[e,"+"]})]},e))})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Gamme de prix"}),pe.jsx("div",{className:"space-y-3",children:[{value:"budget",label:"Économique",desc:"Prix abordables"},{value:"moderate",label:"Modéré",desc:"Bon rapport qualité-prix"},{value:"expensive",label:"Haut de gamme",desc:"Services premium"}].map(e=>pe.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[pe.jsx("input",{type:"radio",name:"priceRange",value:e.value,checked:o.priceRange===e.value,onChange:e=>_("priceRange",e.target.value),className:"text-blue-600 focus:ring-blue-500"}),pe.jsxs("div",{children:[pe.jsx("div",{className:"font-medium text-gray-900",children:e.label}),pe.jsx("div",{className:"text-sm text-gray-500",children:e.desc})]})]},e.value))})]})]}),pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Distance maximale"}),pe.jsxs("select",{value:o.distance||"",onChange:e=>_("distance",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[pe.jsx("option",{value:"",children:"Toutes distances"}),pe.jsx("option",{value:"1",children:"Dans un rayon de 1 km"}),pe.jsx("option",{value:"5",children:"Dans un rayon de 5 km"}),pe.jsx("option",{value:"10",children:"Dans un rayon de 10 km"}),pe.jsx("option",{value:"25",children:"Dans un rayon de 25 km"}),pe.jsx("option",{value:"50",children:"Dans un rayon de 50 km"})]})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Trier par"}),pe.jsxs("select",{value:o.sortBy||"relevance",onChange:e=>_("sortBy",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[pe.jsx("option",{value:"relevance",children:"Pertinence"}),pe.jsx("option",{value:"rating",children:"Note"}),pe.jsx("option",{value:"distance",children:"Distance"}),pe.jsx("option",{value:"name",children:"Nom alphabétique"}),pe.jsx("option",{value:"newest",children:"Plus récents"})]})]})]})]}),pe.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-6 rounded-b-xl",children:pe.jsxs("div",{className:"flex justify-between items-center",children:[pe.jsx("button",{onClick:()=>{l({})},className:"text-gray-600 hover:text-gray-800 font-medium transition-colors",children:"Effacer tous les filtres"}),pe.jsxs("div",{className:"flex space-x-3",children:[pe.jsx("button",{onClick:r,className:"px-6 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Annuler"}),pe.jsxs("button",{onClick:()=>{i(o),r()},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:["Appliquer les filtres (",T(),")"]})]})]})})]})}):null},Pe=({filters:e,onRemoveFilter:t,onClearAll:s})=>{const{t:r,isRTL:i}=fe(),a=Object.entries(e).filter(([e,t])=>null!=t&&""!==t);return 0===a.length?null:pe.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[pe.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Filtres actifs:"}),a.map(([e,s])=>{const a=(e=>{switch(e){case"verified":return x;case"premium":return v;case"openNow":return y;case"hasParking":return w;case"hasWifi":return j;case"minRating":return m;case"governorate":case"distance":return n;default:return null}})(e),o=((e,t)=>{switch(e){case"category":case"governorate":return r(t);case"subcategory":return t;case"verified":return"Vérifiés";case"premium":return"Premium";case"minRating":return`${t}+ étoiles`;case"maxRating":return`Max ${t} étoiles`;case"openNow":return"Ouvert maintenant";case"hasParking":return"Parking";case"hasWifi":return"WiFi gratuit";case"acceptsCards":return"Cartes acceptées";case"wheelchairAccessible":return"Accessible PMR";case"familyFriendly":return"Familial";case"priceRange":return"budget"===t?"Économique":"moderate"===t?"Modéré":"Haut de gamme";case"distance":return`${t}km`;case"sortBy":return"Tri: "+("relevance"===t?"Pertinence":"rating"===t?"Note":"distance"===t?"Distance":"name"===t?"Nom":"Plus récents");default:return e}})(e,s),l=(e=>{switch(e){case"verified":return"bg-green-100 text-green-800 border-green-200";case"premium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"openNow":return"bg-blue-100 text-blue-800 border-blue-200";case"hasParking":return"bg-purple-100 text-purple-800 border-purple-200";case"hasWifi":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"minRating":case"maxRating":return"bg-orange-100 text-orange-800 border-orange-200";case"priceRange":return"bg-pink-100 text-pink-800 border-pink-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e);return pe.jsxs("div",{className:`inline-flex items-center space-x-2 px-3 py-1.5 rounded-full text-sm font-medium border ${l} ${i?"space-x-reverse":""}`,children:[a&&pe.jsx(a,{className:"h-3.5 w-3.5"}),pe.jsx("span",{children:o}),pe.jsx("button",{onClick:()=>t(e),className:"hover:bg-black hover:bg-opacity-10 rounded-full p-0.5 transition-colors","aria-label":`Supprimer le filtre ${o}`,children:pe.jsx(c,{className:"h-3 w-3"})})]},e)}),a.length>1&&pe.jsx("button",{onClick:s,className:"text-sm text-blue-600 hover:text-blue-700 font-medium px-2 py-1 hover:bg-blue-50 rounded transition-colors",children:"Tout effacer"})]})},Ee=({sortBy:e,sortOrder:t,onSortChange:s,className:r=""})=>{const i=[{value:"relevance",label:"Pertinence",icon:_},{value:"rating",label:"Note",icon:m},{value:"distance",label:"Distance",icon:n},{value:"name",label:"Nom",icon:k},{value:"newest",label:"Plus récents",icon:y}];return pe.jsxs("div",{className:`flex items-center space-x-2 ${r}`,children:[pe.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Trier par:"}),pe.jsx("div",{className:"flex items-center space-x-1 bg-white border border-gray-200 rounded-lg p-1",children:i.map(r=>{const i=r.icon,a=e===r.value;return pe.jsxs("button",{onClick:()=>{a&&"relevance"!==r.value?s(r.value,"asc"===t?"desc":"asc"):s(r.value,"name"===r.value?"asc":"desc")},className:"flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors "+(a?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[pe.jsx(i,{className:"h-4 w-4"}),pe.jsx("span",{children:r.label}),a&&"relevance"!==r.value&&pe.jsx("span",{className:"text-xs",children:"asc"===t?"↑":"↓"})]},r.value)})})]})},Ae=[{id:"hotel",icon:S,color:"bg-purple-500"},{id:"cultural",icon:T,color:"bg-pink-500"},{id:"administrative",icon:u,color:"bg-blue-500"},{id:"sport",icon:P,color:"bg-green-500"},{id:"animal",icon:E,color:"bg-yellow-500"},{id:"construction",icon:A,color:"bg-gray-600"},{id:"alimentation",icon:R,color:"bg-indigo-500"},{id:"sante",icon:O,color:"bg-red-500"},{id:"justice",icon:M,color:"bg-amber-600"},{id:"ecole",icon:$,color:"bg-emerald-600"},{id:"taxi",icon:w,color:"bg-orange-500"},{id:"tourism",icon:n,color:"bg-teal-500"},{id:"divers",icon:g,color:"bg-slate-500"}],Re=({selectedCategory:e,onCategoryChange:t})=>{const{t:r,isRTL:i}=fe(),[a,n]=s.useState(""),o=we(a,200),l=Ae.filter(e=>!o||r(e.id).toLowerCase().includes(o.toLowerCase()));return pe.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-gray-100 hover:shadow-2xl transition-shadow duration-300",children:[pe.jsxs("div",{className:"flex items-center space-x-3 mb-6 "+(i?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(g,{className:"h-6 w-6 text-blue-600"}),pe.jsx("h3",{className:"text-xl font-bold text-gray-900 "+(i?"text-right":"text-left"),children:"Catégories Populaires"})]}),pe.jsx("div",{className:"mb-6",children:pe.jsx("input",{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"Rechercher une catégorie...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})}),pe.jsxs("div",{className:"mb-8",children:[pe.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-4 uppercase tracking-wide",children:"Les Plus Recherchées"}),pe.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["sante","alimentation","construction","justice"].map(s=>{const i=Ae.find(e=>e.id===s);if(!i)return null;const a=i.icon;return pe.jsx("button",{onClick:()=>t(i.id),className:"p-6 rounded-xl border-2 transition-all duration-300 hover:scale-105 "+(e===i.id?"border-blue-500 bg-gradient-to-br from-blue-50 to-blue-100 text-blue-700 shadow-lg":"border-gray-200 hover:border-blue-300 hover:bg-blue-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),children:pe.jsxs("div",{className:"text-center",children:[pe.jsx("div",{className:`w-12 h-12 ${i.color} rounded-xl mx-auto mb-3 flex items-center justify-center shadow-md hover:shadow-lg transition-shadow`,children:pe.jsx(a,{className:"h-6 w-6 text-white"})}),pe.jsx("span",{className:"text-sm font-semibold",children:r(i.id)})]})},i.id)})})]}),pe.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[pe.jsx("button",{onClick:()=>t(null),className:"p-5 rounded-xl border-2 transition-all duration-300 hover:scale-105 "+(null===e?"border-blue-500 bg-gradient-to-br from-blue-50 to-blue-100 text-blue-700 shadow-lg":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"),"aria-label":"Toutes les catégories",children:pe.jsxs("div",{className:"text-center",children:[pe.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-500 rounded-xl mx-auto mb-3 flex items-center justify-center shadow-md",children:pe.jsx("span",{className:"text-white text-xs font-bold",children:"All"})}),pe.jsx("span",{className:"text-sm font-semibold",children:r("all")})]})}),l.map(s=>{const i=s.icon;return pe.jsx("button",{onClick:()=>t(s.id),className:"p-5 rounded-xl border-2 transition-all duration-300 hover:scale-105 "+(e===s.id?"border-blue-500 bg-gradient-to-br from-blue-50 to-blue-100 text-blue-700 shadow-lg":"border-gray-200 hover:border-blue-300 hover:bg-blue-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),"aria-label":`Catégorie ${r(s.id)}`,children:pe.jsxs("div",{className:"text-center",children:[pe.jsx("div",{className:`w-10 h-10 ${s.color} rounded-xl mx-auto mb-3 flex items-center justify-center shadow-md hover:shadow-lg transition-shadow`,children:pe.jsx(i,{className:"h-5 w-5 text-white"})}),pe.jsx("span",{className:"text-sm font-semibold",children:r(s.id)})]})},s.id)})]}),0===l.length&&a&&pe.jsx("div",{className:"text-center py-8 text-gray-500",children:pe.jsxs("p",{children:['Aucune catégorie trouvée pour "',a,'"']})})]})},Oe=["tunis","ariana","ben-arous","manouba","nabeul","zaghouan","bizerte","beja","jendouba","kef","siliana","sousse","monastir","mahdia","sfax","kairouan","kasserine","sidi-bouzid","gabes","medenine","tataouine","gafsa","tozeur","kebili"],Me=({selectedGovernorate:e,onGovernorateChange:t})=>{const{t:s}=fe();return pe.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg mb-6",children:[pe.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[pe.jsx(n,{className:"h-5 w-5"}),pe.jsx("span",{children:"Gouvernorats"})]}),pe.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:[pe.jsx("button",{onClick:()=>t(null),className:"p-3 rounded-lg border-2 transition-all text-sm "+(null===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:s("all")}),Oe.map(r=>pe.jsx("button",{onClick:()=>t(r),className:"p-3 rounded-lg border-2 transition-all text-sm "+(e===r?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:s(r)},r))]})]})},$e=["medina","bab-bhar","bab-souika","halfaouine","omrane","omrane-superieur","cite-olympique","el-menzah","ariana-ville","ennasr","manar","centre-ville","lafayette","passage","belvédère","mutuelleville","montplaisir","monfleury","notre-dame","bardo","zahrouni","kabaria","mellassine","hrairia","sidi-hassine","intilaka","khadra","sijoumi"],Ie=({selectedDistrict:e,onDistrictChange:t,show:s})=>{const{t:r,isRTL:i}=fe();return s?pe.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg mb-6",children:[pe.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2 "+(i?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(n,{className:"h-5 w-5"}),pe.jsx("span",{children:"Quartiers de Tunis"})]}),pe.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:[pe.jsx("button",{onClick:()=>t(null),className:"p-3 rounded-lg border-2 transition-all text-sm "+(null===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:r("all")}),$e.map(s=>pe.jsx("button",{onClick:()=>t(s),className:"p-3 rounded-lg border-2 transition-all text-sm "+(e===s?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:r(s)},s))]})]}):null},Le={},qe=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),a=(null==i?void 0:i.nonce)||(null==i?void 0:i.getAttribute("nonce"));r=Promise.allSettled(t.map(t=>{if(t=function(e,t){return new URL(e,t).href}(t,s),t in Le)return;Le[t]=!0;const r=t.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(!!s)for(let s=e.length-1;s>=0;s--){const i=e[s];if(i.href===t&&(!r||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;const n=document.createElement("link");return n.rel=r?"stylesheet":"modulepreload",r||(n.as="script"),n.crossOrigin="",n.href=t,a&&n.setAttribute("nonce",a),document.head.appendChild(n),r?new Promise((e,s)=>{n.addEventListener("load",e),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};class Be extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class ze extends Be{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class De extends Be{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ue extends Be{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var He,Ge;(Ge=He||(He={})).Any="any",Ge.ApNortheast1="ap-northeast-1",Ge.ApNortheast2="ap-northeast-2",Ge.ApSouth1="ap-south-1",Ge.ApSoutheast1="ap-southeast-1",Ge.ApSoutheast2="ap-southeast-2",Ge.CaCentral1="ca-central-1",Ge.EuCentral1="eu-central-1",Ge.EuWest1="eu-west-1",Ge.EuWest2="eu-west-2",Ge.EuWest3="eu-west-3",Ge.SaEast1="sa-east-1",Ge.UsEast1="us-east-1",Ge.UsWest1="us-west-1",Ge.UsWest2="us-west-2";var Fe=function(e,t,s,r){return new(s||(s=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}l((r=r.apply(e,t||[])).next())})};class Ke{constructor(e,{headers:t={},customFetch:s,region:r=He.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>qe(async()=>{const{default:e}=await Promise.resolve().then(()=>at);return{default:e}},void 0,import.meta.url).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Fe(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=t;let n={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(n["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(n["Content-Type"]="application/octet-stream",c=a):"string"==typeof a?(n["Content-Type"]="text/plain",c=a):"undefined"!=typeof FormData&&a instanceof FormData?c=a:(n["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(l.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},n),this.headers),r),body:c}).catch(e=>{throw new ze(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new De(d);if(!d.ok)throw new Ue(d);let h,m=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof Ue||r instanceof De?r.context:void 0}}})}}var Ve={},We={},Je={},Ye={},Ze={},Qe={},Xe=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const et=Xe.fetch,tt=Xe.fetch.bind(Xe),st=Xe.Headers,rt=Xe.Request,it=Xe.Response,at=Object.freeze(Object.defineProperty({__proto__:null,Headers:st,Request:rt,Response:it,default:tt,fetch:et},Symbol.toStringTag,{value:"Module"})),nt=r(at);var ot={};Object.defineProperty(ot,"__esModule",{value:!0});let lt=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ot.default=lt;var ct=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qe,"__esModule",{value:!0});const dt=ct(nt),ut=ct(ot);Qe.default=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(s=e.isMaybeSingle)&&void 0!==s&&s,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=dt.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,r,i;let a=null,n=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const s=await e.text();""===s||(n="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?s:JSON.parse(s))}const i=null===(s=this.headers.get("Prefer"))||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),d=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");i&&d&&d.length>1&&(o=parseInt(d[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(n)&&(n.length>1?(a={code:"PGRST116",details:`Results contain ${n.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},n=null,o=null,l=406,c="Not Acceptable"):n=1===n.length?n[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(n=[],a=null,l=200,c="OK")}catch(d){404===e.status&&""===t?(l=204,c="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(i=null==a?void 0:a.details)||void 0===i?void 0:i.includes("0 rows"))&&(a=null,l=200,c="OK"),a&&this.shouldThrowOnError)throw new ut.default(a)}return{error:a,data:n,count:o,status:l,statusText:c}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};var ht=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ze,"__esModule",{value:!0});const mt=ht(Qe);let pt=class extends mt.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",n=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${n?`${n},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=void 0===r?"offset":`${r}.offset`,a=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var n;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(n=this.headers.get("Accept"))&&void 0!==n?n:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ze.default=pt;var gt=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ye,"__esModule",{value:!0});const bt=gt(Ze);let ft=class extends bt.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const a=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Ye.default=ft;var xt=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Je,"__esModule",{value:!0});const vt=xt(Ye);Je.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new vt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new vt.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new vt.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}update(e,{count:t}={}){var s;return t&&this.headers.append("Prefer",`count=${t}`),new vt.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new vt.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}};var yt=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(We,"__esModule",{value:!0});const wt=yt(Je),jt=yt(Ye);We.default=class e{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new wt.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){var a;let n;const o=new URL(`${this.url}/rpc/${e}`);let l;s||r?(n=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{o.searchParams.append(e,t)})):(n="POST",l=t);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new jt.default({method:n,url:o,headers:c,schema:this.schemaName,body:l,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}};var Nt=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.PostgrestError=Ve.PostgrestBuilder=Ve.PostgrestTransformBuilder=Ve.PostgrestFilterBuilder=Ve.PostgrestQueryBuilder=Ve.PostgrestClient=void 0;const Ct=Nt(We);Ve.PostgrestClient=Ct.default;const _t=Nt(Je);Ve.PostgrestQueryBuilder=_t.default;const kt=Nt(Ye);Ve.PostgrestFilterBuilder=kt.default;const St=Nt(Ze);Ve.PostgrestTransformBuilder=St.default;const Tt=Nt(Qe);Ve.PostgrestBuilder=Tt.default;const Pt=Nt(ot);Ve.PostgrestError=Pt.default;var Et=Ve.default={PostgrestClient:Ct.default,PostgrestQueryBuilder:_t.default,PostgrestFilterBuilder:kt.default,PostgrestTransformBuilder:St.default,PostgrestBuilder:Tt.default,PostgrestError:Pt.default};const{PostgrestClient:At,PostgrestQueryBuilder:Rt,PostgrestFilterBuilder:Ot,PostgrestTransformBuilder:Mt,PostgrestBuilder:$t,PostgrestError:It}=Et;class Lt{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const qt=1e4;var Bt,zt,Dt,Ut,Ht,Gt,Ft,Kt,Vt,Wt,Jt;(zt=Bt||(Bt={}))[zt.connecting=0]="connecting",zt[zt.open=1]="open",zt[zt.closing=2]="closing",zt[zt.closed=3]="closed",(Ut=Dt||(Dt={})).closed="closed",Ut.errored="errored",Ut.joined="joined",Ut.joining="joining",Ut.leaving="leaving",(Gt=Ht||(Ht={})).close="phx_close",Gt.error="phx_error",Gt.join="phx_join",Gt.reply="phx_reply",Gt.leave="phx_leave",Gt.access_token="access_token",(Ft||(Ft={})).websocket="websocket",(Vt=Kt||(Kt={})).Connecting="connecting",Vt.Open="open",Vt.Closing="closing",Vt.Closed="closed";class Yt{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const n=s.decode(e.slice(a,a+r));a+=r;const o=s.decode(e.slice(a,a+i));a+=i;return{ref:null,topic:n,event:o,payload:JSON.parse(s.decode(e.slice(a,e.byteLength)))}}}class Zt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Jt=Wt||(Wt={})).abstime="abstime",Jt.bool="bool",Jt.date="date",Jt.daterange="daterange",Jt.float4="float4",Jt.float8="float8",Jt.int2="int2",Jt.int4="int4",Jt.int4range="int4range",Jt.int8="int8",Jt.int8range="int8range",Jt.json="json",Jt.jsonb="jsonb",Jt.money="money",Jt.numeric="numeric",Jt.oid="oid",Jt.reltime="reltime",Jt.text="text",Jt.time="time",Jt.timestamp="timestamp",Jt.timestamptz="timestamptz",Jt.timetz="timetz",Jt.tsrange="tsrange",Jt.tstzrange="tstzrange";const Qt=(e,t,s={})=>{var r;const i=null!==(r=s.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((s,r)=>(s[r]=Xt(r,e,t,i),s),{})},Xt=(e,t,s,r)=>{const i=t.find(t=>t.name===e),a=null==i?void 0:i.type,n=s[e];return a&&!r.includes(a)?es(a,n):ts(n)},es=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return as(t,s)}switch(e){case Wt.bool:return ss(t);case Wt.float4:case Wt.float8:case Wt.int2:case Wt.int4:case Wt.int8:case Wt.numeric:case Wt.oid:return rs(t);case Wt.json:case Wt.jsonb:return is(t);case Wt.timestamp:return ns(t);case Wt.abstime:case Wt.date:case Wt.daterange:case Wt.int4range:case Wt.int8range:case Wt.money:case Wt.reltime:case Wt.text:case Wt.time:case Wt.timestamptz:case Wt.timetz:case Wt.tsrange:case Wt.tstzrange:default:return ts(t)}},ts=e=>e,ss=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},rs=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},is=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},as=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,s);try{r=JSON.parse("["+a+"]")}catch(i){r=a?a.split(","):[]}return r.map(e=>es(t,e))}return e},ns=e=>"string"==typeof e?e.replace(" ","T"):e,os=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ls{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var cs,ds,us,hs,ms,ps,gs,bs;(ds=cs||(cs={})).SYNC="sync",ds.JOIN="join",ds.LEAVE="leave";class fs{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fs.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=fs.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=fs.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),a=this.transformState(t),n={},o={};return this.map(i,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const s=i[e];if(s){const r=t.map(e=>e.presence_ref),i=s.map(e=>e.presence_ref),a=t.filter(e=>i.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(n[e]=a),l.length>0&&(o[e]=l)}else n[e]=t}),this.syncDiff(i,{joins:n,leaves:o},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const a=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),a.length>0){const s=e[t].map(e=>e.presence_ref),r=a.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,a,r)}),this.map(a,(t,s)=>{let i=e[t];if(!i)return;const a=s.map(e=>e.presence_ref);i=i.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,s),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(hs=us||(us={})).ALL="*",hs.INSERT="INSERT",hs.UPDATE="UPDATE",hs.DELETE="DELETE",(ps=ms||(ms={})).BROADCAST="broadcast",ps.PRESENCE="presence",ps.POSTGRES_CHANGES="postgres_changes",ps.SYSTEM="system",(bs=gs||(gs={})).SUBSCRIBED="SUBSCRIBED",bs.TIMED_OUT="TIMED_OUT",bs.CLOSED="CLOSED",bs.CHANNEL_ERROR="CHANNEL_ERROR";class xs{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ls(this,Ht.join,this.params,this.timeout),this.rejoinTimer=new Zt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dt.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ht.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new fs(this),this.broadcastEndpointURL=os(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Dt.closed){const{config:{broadcast:a,presence:n,private:o}}=this.params,l=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[ms.PRESENCE]&&this.bindings[ms.PRESENCE].length>0||!0===(null===(i=this.params.config.presence)||void 0===i?void 0:i.enabled),d={},u={broadcast:a,presence:Object.assign(Object.assign({},n),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(gs.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(gs.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,i=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,a=[];for(let s=0;s<i;s++){const i=r[s],{filter:{event:n,schema:o,table:l,filter:c}}=i,d=t&&t[s];if(!d||d.event!==n||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=Dt.errored,void(null==e||e(gs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},i),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(gs.SUBSCRIBED))}null==e||e(gs.SUBSCRIBED)}).receive("error",t=>{this.state=Dt.errored,null==e||e(gs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(gs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Dt.joined&&e===ms.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,i,a;const n=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===a?void 0:a.ack)||s("ok"),n.receive("ok",()=>s("ok")),n.receive("error",()=>s("error")),n.receive("timeout",()=>s("timed out"))});{const{event:a,payload:n}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:n,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Dt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ht.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new ls(this,Ht.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Dt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ls(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const a=e.toLocaleLowerCase(),{close:n,error:o,leave:l,join:c}=Ht;if(s&&[n,o,l,c].indexOf(a)>=0&&s!==this._joinRef())return;let d=this._onMessage(a,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(d,s)):null===(i=this.bindings[a])||void 0===i||i.filter(e=>{var s,r,i,n,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,n=null===(s=e.filter)||void 0===s?void 0:s.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===n||(null==n?void 0:n.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const s=null===(o=null===(n=null==e?void 0:e.filter)||void 0===n?void 0:n.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:r,type:i,errors:a}=e,n={schema:t,table:s,commit_timestamp:r,eventType:i,new:{},old:{},errors:a};d=Object.assign(Object.assign({},n),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===Dt.closed}_isJoined(){return this.state===Dt.joined}_isJoining(){return this.state===Dt.joining}_isLeaving(){return this.state===Dt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&xs.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ht.close,{},e)}_onError(e){this._on(Ht.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Qt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Qt(e.columns,e.old_record)),t}}const vs=()=>{},ys=25e3,ws=10,js=100,Ns=[1e3,2e3,5e3,1e4];class Cs{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qt,this.transport=null,this.heartbeatIntervalMs=ys,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vs,this.ref=0,this.reconnectTimer=null,this.logger=vs,this.conn=null,this.sendBuffer=[],this.serializer=new Yt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>qe(async()=>{const{default:e}=await Promise.resolve().then(()=>at);return{default:e}},void 0,import.meta.url).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ft.websocket}`,this.httpEndpoint=os(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Lt.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Bt.connecting:return Kt.Connecting;case Bt.open:return Kt.Open;case Bt.closing:return Kt.Closing;default:return Kt.Closed}}isConnected(){return this.connectionState()===Kt.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new xs(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},js)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:i}=e,a=i?`(${i})`:"",n=r.status||"";this.log("receive",`${n} ${t} ${s} ${a}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ht.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.15.4"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(Ht.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Zt(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ws)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,i,a,n,o,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:qt,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:ys,this.worker=null!==(i=null==e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(a=null==e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(n=null==e?void 0:e.heartbeatCallback)&&void 0!==n?n:vs,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null==e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>Ns[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class _s extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ks(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Ss extends _s{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ts extends _s{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ps=function(e,t,s,r){return new(s||(s=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}l((r=r.apply(e,t||[])).next())})};const Es=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>qe(async()=>{const{default:e}=await Promise.resolve().then(()=>at);return{default:e}},void 0,import.meta.url).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},As=e=>{if(Array.isArray(e))return e.map(e=>As(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=As(s)}),t};var Rs=function(e,t,s,r){return new(s||(s=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}l((r=r.apply(e,t||[])).next())})};const Os=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ms=(e,t,s)=>Rs(void 0,void 0,void 0,function*(){const r=yield Ps(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield qe(()=>Promise.resolve().then(()=>at),void 0,import.meta.url)).Response:Response});e instanceof r&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const r=e.status||500,i=(null==s?void 0:s.statusCode)||r+"";t(new Ss(Os(s),r,i))}).catch(e=>{t(new Ts(Os(e),e))}):t(new Ts(Os(e),e))}),$s=(e,t,s,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,(null==t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),s)):i};function Is(e,t,s,r,i,a){return Rs(this,void 0,void 0,function*(){return new Promise((n,o)=>{e(s,$s(t,r,i,a)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>n(e)).catch(e=>Ms(e,o,r))})})}function Ls(e,t,s,r){return Rs(this,void 0,void 0,function*(){return Is(e,"GET",t,s,r)})}function qs(e,t,s,r,i){return Rs(this,void 0,void 0,function*(){return Is(e,"POST",t,r,i,s)})}function Bs(e,t,s,r,i){return Rs(this,void 0,void 0,function*(){return Is(e,"PUT",t,r,i,s)})}function zs(e,t,s,r,i){return Rs(this,void 0,void 0,function*(){return Is(e,"DELETE",t,r,i,s)})}var Ds=function(e,t,s,r){return new(s||(s=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}l((r=r.apply(e,t||[])).next())})};const Us={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gs{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Es(r)}uploadOrUpdate(e,t,s,r){return Ds(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Hs),r);let n=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=s,n["cache-control"]=`max-age=${a.cacheControl}`,n["content-type"]=a.contentType,o&&(n["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(n=Object.assign(Object.assign({},n),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?Bs:qs)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:n},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(ks(i))return{data:null,error:i};throw i}})}upload(e,t,s){return Ds(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Ds(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),n=new URL(this.url+`/object/upload/sign/${a}`);n.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Hs.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield Bs(this.fetch,n.toString(),e,{headers:a})).Key},error:null}}catch(o){if(ks(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Ds(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield qs(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),a=new URL(this.url+i.url),n=a.searchParams.get("token");if(!n)throw new _s("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:n},error:null}}catch(s){if(ks(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ds(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ds(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Ds(this,void 0,void 0,function*(){try{return{data:{path:(yield qs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Ds(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield qs(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const a=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Ds(this,void 0,void 0,function*(){try{const r=yield qs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}download(e,t){return Ds(this,void 0,void 0,function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Ls(this.fetch,`${this.url}/${s}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(a){if(ks(a))return{data:null,error:a};throw a}})}info(e){return Ds(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Ls(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:As(e),error:null}}catch(s){if(ks(s))return{data:null,error:s};throw s}})}exists(e){return Ds(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return Rs(this,void 0,void 0,function*(){return Is(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ks(s)&&s instanceof Ts){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&r.push(i);const a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==n&&r.push(n);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${o}`)}}}remove(e){return Ds(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ks(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ds(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Us),t),{prefix:e||""});return{data:yield qs(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}listV2(e,t){return Ds(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield qs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(ks(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Fs={"X-Client-Info":"storage-js/2.11.0"};var Ks=function(e,t,s,r){return new(s||(s=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}l((r=r.apply(e,t||[])).next())})};class Vs{constructor(e,t={},s,r){const i=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href,this.headers=Object.assign(Object.assign({},Fs),t),this.fetch=Es(s)}listBuckets(){return Ks(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ks(e))return{data:null,error:e};throw e}})}getBucket(e){return Ks(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ks(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ks(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ks(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Ks(this,void 0,void 0,function*(){try{return{data:yield Bs(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ks(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ks(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ks(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ks(this,void 0,void 0,function*(){try{return{data:yield zs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ks(t))return{data:null,error:t};throw t}})}}class Ws extends Vs{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new Gs(this.url,this.headers,e,this.fetch)}}let Js="";Js="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ys={headers:{"X-Client-Info":`supabase-js-${Js}/2.57.0`}},Zs={schema:"public"},Qs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xs={};var er=function(e,t,s,r){return new(s||(s=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}l((r=r.apply(e,t||[])).next())})};const tr=(e,t,s)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?tt:fetch),(...e)=>t(...e)})(s),i="undefined"==typeof Headers?st:Headers;return(s,a)=>er(void 0,void 0,void 0,function*(){var n;const o=null!==(n=yield t())&&void 0!==n?n:e;let l=new i(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(s,Object.assign(Object.assign({},a),{headers:l}))})};var sr=function(e,t,s,r){return new(s||(s=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}l((r=r.apply(e,t||[])).next())})};const rr="2.71.1",ir=3e4,ar=9e4,nr={"X-Client-Info":`gotrue-js/${rr}`},or="X-Supabase-Api-Version",lr={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},cr=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class dr extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function ur(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class hr extends dr{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class mr extends dr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class pr extends dr{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class gr extends pr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class br extends pr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fr extends pr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xr extends pr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vr extends pr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yr extends pr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function wr(e){return ur(e)&&"AuthRetryableFetchError"===e.name}class jr extends pr{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Nr extends pr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_r=" \t\n\r=".split(""),kr=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_r.length;t+=1)e[_r[t].charCodeAt(0)]=-2;for(let t=0;t<Cr.length;t+=1)e[Cr[t].charCodeAt(0)]=t;return e})();function Sr(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Cr[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Cr[e]),t.queuedBits-=6}}function Tr(e,t,s){const r=kr[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Pr(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let n=0;n<e.length;n+=1)Tr(e.charCodeAt(n),i,a);return t.join("")}function Er(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Ar(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)Tr(e.charCodeAt(i),s,r);return new Uint8Array(t)}function Rr(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Er(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Or(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Sr(e,s,r)),Sr(null,s,r),t.join("")}const Mr=()=>"undefined"!=typeof window&&"undefined"!=typeof document,$r={tested:!1,writable:!1},Ir=()=>{if(!Mr())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if($r.tested)return $r.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),$r.tested=!0,$r.writable=!0}catch(t){$r.tested=!0,$r.writable=!1}return $r.writable};const Lr=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>qe(async()=>{const{default:e}=await Promise.resolve().then(()=>at);return{default:e}},void 0,import.meta.url).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},qr=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Br=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}},zr=async(e,t)=>{await e.removeItem(t)};class Dr{constructor(){this.promise=new Dr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Ur(e){const t=e.split(".");if(3!==t.length)throw new Nr("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!cr.test(t[s]))throw new Nr("JWT not in base64url format");return{header:JSON.parse(Pr(t[0])),payload:JSON.parse(Pr(t[1])),signature:Ar(t[2]),raw:{header:t[0],payload:t[1]}}}function Hr(e){return("0"+e.toString(16)).substr(-2)}async function Gr(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fr(e,t,s=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Hr).join("")}();let i=r;s&&(i+="/PASSWORD_RECOVERY"),await qr(e,`${t}-code-verifier`,i);const a=await Gr(r);return[a,r===a?"plain":"s256"]}Dr.promiseConstructor=Promise;const Kr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Vr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wr(e){if(!Vr.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jr(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yr(e){return JSON.parse(JSON.stringify(e))}const Zr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Qr=[502,503,504];async function Xr(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new yr(Zr(e),0);if(Qr.includes(e.status))throw new yr(Zr(e),e.status);let r,i;try{r=await e.json()}catch(n){throw new mr(Zr(n),n)}const a=function(e){const t=e.headers.get(or);if(!t)return null;if(!t.match(Kr))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(n){return null}}(e);if(a&&a.getTime()>=lr.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?i=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new jr(Zr(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new gr}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new jr(Zr(r),e.status,r.weak_password.reasons);throw new hr(Zr(r),e.status||500,i)}async function ei(e,t,s,r){var i;const a=Object.assign({},null==r?void 0:r.headers);a[or]||(a[or]=lr.name),(null==r?void 0:r.jwt)&&(a.Authorization=`Bearer ${r.jwt}`);const n=null!==(i=null==r?void 0:r.query)&&void 0!==i?i:{};(null==r?void 0:r.redirectTo)&&(n.redirect_to=r.redirectTo);const o=Object.keys(n).length?"?"+new URLSearchParams(n).toString():"",l=await async function(e,t,s,r,i,a){const n=((e,t,s,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))})(t,r,i,a);let o;try{o=await e(s,Object.assign({},n))}catch(l){throw new yr(Zr(l),0)}o.ok||await Xr(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await Xr(l)}}(e,t,s+o,{headers:a,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function ti(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function si(e){const t=ti(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ri(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ii(e){return{data:e,error:null}}function ai(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:i,verification_type:a}=e,n=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:i,verification_type:a},user:Object.assign({},n)},error:null}}function ni(e){return e}const oi=["global","local","others"];class li{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Lr(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=oi[0]){if(oi.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oi.join(", ")}`);try{return await ei(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ur(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await ei(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ri})}catch(s){if(ur(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]])}return s}(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),await ei(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ai,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(ur(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ei(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ri})}catch(t){if(ur(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,a,n,o;try{const l={nextPage:null,lastPage:0,total:0},c=await ei(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(i=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:ni});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(n=c.headers.get("link"))||void 0===n?void 0:n.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(ur(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Wr(e);try{return await ei(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ri})}catch(t){if(ur(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Wr(e);try{return await ei(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ri})}catch(s){if(ur(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Wr(e);try{return await ei(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ri})}catch(s){if(ur(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Wr(e.userId);try{const{data:t,error:s}=await ei(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(ur(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Wr(e.userId),Wr(e.id);try{return{data:await ei(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ur(t))return{data:null,error:t};throw t}}}function ci(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const di=!!(globalThis&&Ir()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class ui extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class hi extends ui{}async function mi(e,t,s){const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw new hi(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(di)try{await globalThis.navigator.locks.query()}catch(i){}return await s()}try{return await s()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const pi={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nr,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gi(e,t,s){return await s()}const bi={};class fi{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fi.nextInstanceID,fi.nextInstanceID+=1,this.instanceID>0&&Mr();const r=Object.assign(Object.assign({},pi),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new li({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Lr(r.fetch),this.lock=r.lock||gi,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Mr()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=mi:this.lock=gi,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Ir()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ci(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=ci(this.memoryStorage)),Mr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=bi[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){bi[this.storageKey]=Object.assign(Object.assign({},bi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=bi[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){bi[this.storageKey]=Object.assign(Object.assign({},bi[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rr}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(r){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Mr()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return ur(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:n}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",n),await this._saveSession(a),setTimeout(async()=>{"recovery"===n?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ur(t)?{error:t}:{error:new mr("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const i=await ei(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:ti}),{data:a,error:n}=i;if(n||!a)return{data:{user:null,session:null},error:n};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(ur(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,r;try{let i;if("email"in e){const{email:s,password:r,options:a}=e;let n=null,o=null;"pkce"===this.flowType&&([n,o]=await Fr(this.storage,this.storageKey)),i=await ei(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:n,code_challenge_method:o},xform:ti})}else{if(!("phone"in e))throw new fr("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:n}=e;i=await ei(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},channel:null!==(r=null==n?void 0:n.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:ti})}}const{data:a,error:n}=i;if(n||!a)return{data:{user:null,session:null},error:n};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(ur(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:r,options:i}=e;t=await ei(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:si})}else{if(!("phone"in e))throw new fr("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:i}=e;t=await ei(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:si})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r}):{data:{user:null,session:null},error:new br}}catch(t){if(ur(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,i,a,n,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:g,options:b}=e;let f;if(Mr())if("object"==typeof h)f=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");f=e.solana}else{if("object"!=typeof h||!(null==b?void 0:b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=h}const x=new URL(null!==(t=null==b?void 0:b.url)&&void 0!==t?t:window.location.href);if("signIn"in f&&f.signIn){const e=await f.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==b?void 0:b.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in f&&"function"==typeof f.signMessage&&"publicKey"in f&&"object"==typeof f&&f.publicKey&&"toBase58"in f.publicKey&&"function"==typeof f.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${x.host} wants you to sign in with your Solana account:`,f.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${null!==(r=null===(s=null==b?void 0:b.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(i=null==b?void 0:b.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...(null===(a=null==b?void 0:b.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...(null===(n=null==b?void 0:b.signInWithSolana)||void 0===n?void 0:n.chainId)?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...(null===(o=null==b?void 0:b.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...(null===(l=null==b?void 0:b.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==b?void 0:b.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...b.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await f.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=await ei(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Or(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ti});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new br}}catch(g){if(ur(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await Br(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await ei(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ti});if(await zr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new br}}catch(i){if(ur(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:i,nonce:a}=e,n=await ei(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ti}),{data:o,error:l}=n;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new br}}catch(t){if(ur(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,a;try{if("email"in e){const{email:r,options:i}=e;let a=null,n=null;"pkce"===this.flowType&&([a,n]=await Fr(this.storage,this.storageKey));const{error:o}=await ei(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(s=null==i?void 0:i.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:n},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:n,error:o}=await ei(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(i=null==s?void 0:s.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(a=null==s?void 0:s.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:o}}throw new fr("You must provide either an email or phone number.")}catch(n){if(ur(n))return{data:{user:null,session:null},error:n};throw n}}async verifyOtp(e){var t,s;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:a,error:n}=await ei(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:ti});if(n)throw n;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(ur(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let i=null,a=null;return"pkce"===this.flowType&&([i,a]=await Fr(this.storage,this.storageKey)),await ei(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:ii})}catch(i){if(ur(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new gr;const{error:r}=await ei(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ur(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:a}=await ei(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:s,type:r,options:i}=e,{data:a,error:n}=await ei(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:n}}throw new fr("You must provide either an email or phone number and a type")}catch(t){if(ur(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Br(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<ar;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=await Br(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Jr()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,r)=>(t||"user"!==s||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await ei(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ri}):await this._useSession(async e=>{var t,s,r;const{data:i,error:a}=e;if(a)throw a;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await ei(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:ri}):{data:{user:null},error:new gr}})}catch(t){if(ur(t))return function(e){return ur(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await zr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new gr;const a=r.session;let n=null,o=null;"pkce"===this.flowType&&null!=e.email&&([n,o]=await Fr(this.storage,this.storageKey));const{data:l,error:c}=await ei(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:n,code_challenge_method:o}),jwt:a.access_token,xform:ri});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(ur(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new gr;const t=Date.now()/1e3;let s=t,r=!0,i=null;const{payload:a}=Ur(e.access_token);if(a.exp&&(s=a.exp,r=s<=t),r){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ur(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new gr;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ur(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Mr())throw new xr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new vr("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new xr("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vr("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:n,expires_at:o,token_type:l}=e;if(!(i&&n&&a&&l))throw new xr("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(n);let u=c+d;o&&(u=parseInt(o));const{data:h,error:m}=await this._getUser(i);if(m)throw m;const p={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(s){if(ur(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Br(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const a=null===(s=r.session)||void 0===s?void 0:s.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return ur(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await zr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;"pkce"===this.flowType&&([s,r]=await Fr(this.storage,this.storageKey,!0));try{return await ei(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ur(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(ur(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async t=>{var s,r,i,a,n;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await ei(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(n=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==n?n:void 0})});if(r)throw r;return Mr()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(s){if(ur(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:a}=t;if(a)throw a;return await ei(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})})}catch(t){if(ur(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await ei(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ti})),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&wr(t)&&Date.now()+s-i<ir},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await s(a);if(!r(a,null,t))return void e(t)}catch(i){if(!r(a,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),ur(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var s,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Mr()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await Br(this.storage,this.storageKey);if(i&&this.userStorage){let t=await Br(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await qr(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Jr()}else if(i&&!i.user&&!i.user){const e=await Br(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(i.user=e.user,await zr(this.storage,this.storageKey+"-user"),await qr(this.storage,this.storageKey,i)):i.user=Jr()}if(this._debug(s,"session from storage",i),!this._isValidSession(i))return this._debug(s,"session is not valid"),void(null!==i&&await this._removeSession());const a=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<ar;if(this._debug(s,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&(wr(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null==e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return void this._debug(s,"error",i)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new gr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Dr;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new gr;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),ur(i)){const e={session:null,error:i};return wr(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(i){r.push(i)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await qr(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Yr(e);await qr(this.storage,this.storageKey,r)}else{const e=Yr(t);await qr(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await zr(this.storage,this.storageKey),await zr(this.storage,this.storageKey+"-code-verifier"),await zr(this.storage,this.storageKey+"-user"),this.userStorage&&await zr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Mr()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ir);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-t)/ir);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof ui))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mr()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await Fr(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await ei(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(ur(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const n=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await ei(this.fetch,"POST",`${this.url}/factors`,{body:n,headers:this.headers,jwt:null===(s=null==i?void 0:i.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(ur(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:n}=await ei(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return n?{data:null,error:n}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:n})})}catch(t){if(ur(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await ei(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(ur(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ur(r.access_token);let n=null;a.aal&&(n=a.aal);let o=n;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:n,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>r)return s;const{data:i,error:a}=await ei(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=r,s=i.keys.find(t=>t.kid===e),s||null):null}async getClaims(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:r,payload:i,signature:a,raw:{header:n,payload:o}}=Ur(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:i,header:r,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,a,Rr(`${n}.${o}`))))throw new Nr("Invalid JWT signature");return{data:{claims:i,header:r,signature:a},error:null}}catch(s){if(ur(s))return{data:null,error:s};throw s}}}fi.nextInstanceID=0;const xi=fi;class vi extends xi{constructor(e){super(e)}}var yi=function(e,t,s,r){return new(s||(s=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,o)}l((r=r.apply(e,t||[])).next())})};class wi{constructor(e,t,s){var r,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const n=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(n);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,r;const{db:i,auth:a,realtime:n,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),n),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>sr(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:Zs,realtime:Xs,auth:Object.assign(Object.assign({},Qs),{storageKey:c}),global:Ys});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=d.global.headers)&&void 0!==i?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,d.global.fetch),this.fetch=tr(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new At(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Ws(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ke(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return yi(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:i,storageKey:a,flowType:n,lock:o,debug:l},c,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vi({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),c),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:i,flowType:n,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Cs(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}();const ji=new wi("https://galrmxlvixiyiiijraml.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdhbHJteGx2aXhpeWlpaWpyYW1sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzMDYyNTIsImV4cCI6MjA3MTg4MjI1Mn0.LMXYFNSiQsP5CmwiQWUp4t9hfelGtXftnyCxAP82Vkk",Ni);var Ni;const Ci=t=>{const[s,r]=e.useState(null),[i,a]=e.useState(!0),[n,o]=e.useState(!1);e.useEffect(()=>{a(!1)},[t]);const l=e=>"hotel"!==e&&"alimentation"!==e||n;return{subscription:s,loading:i,hasActiveSubscription:n,canViewContactInfo:l,canViewServices:e=>l(e),refetch:async()=>{}}},_i=({establishment:e,onSelect:t})=>{const{t:s,isRTL:r}=fe(),{canViewContactInfo:i,canViewServices:a}=Ci();return pe.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer border border-gray-100 group touch-manipulation",onClick:()=>t(e),children:[pe.jsxs("div",{className:"relative",children:[pe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-52 object-cover group-hover:scale-110 transition-transform duration-500",loading:"lazy",decoding:"async"}),pe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),pe.jsxs("div",{className:`absolute top-4 ${r?"right-4":"left-4"} flex space-x-2 ${r?"space-x-reverse":""}`,children:[pe.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-semibold backdrop-blur-sm ${{hotel:"bg-purple-100 text-purple-800",cultural:"bg-pink-100 text-pink-800",administrative:"bg-blue-100 text-blue-800",sport:"bg-green-100 text-green-800",animal:"bg-yellow-100 text-yellow-800",construction:"bg-gray-100 text-gray-800",alimentation:"bg-indigo-100 text-indigo-800",sante:"bg-red-100 text-red-800",justice:"bg-amber-100 text-amber-800",ecole:"bg-emerald-100 text-emerald-800",taxi:"bg-orange-100 text-orange-800",tourism:"bg-teal-100 text-teal-800",divers:"bg-slate-100 text-slate-800"}[e.category]} shadow-lg`,children:s(e.category)}),e.verified&&pe.jsxs("div",{className:"bg-green-500 text-white px-3 py-1.5 rounded-full flex items-center space-x-1 backdrop-blur-sm shadow-lg "+(r?"space-x-reverse":""),children:[pe.jsx(x,{className:"h-3.5 w-3.5"}),pe.jsx("span",{className:"text-xs font-semibold",children:s("verified")})]}),e.premium&&pe.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-white px-3 py-1.5 rounded-full flex items-center space-x-1 backdrop-blur-sm shadow-lg "+(r?"space-x-reverse":""),children:[pe.jsx(v,{className:"h-3.5 w-3.5"}),pe.jsx("span",{className:"text-xs font-semibold",children:s("premium")})]})]})]}),pe.jsxs("div",{className:"p-7",children:[pe.jsxs("div",{className:"flex items-start justify-between mb-3 "+(r?"flex-row-reverse":""),children:[pe.jsxs("div",{className:"flex-1 "+(r?"text-right":"text-left"),children:[pe.jsx("h3",{className:"text-xl font-bold text-gray-900 line-clamp-1 group-hover:text-blue-600 transition-colors",children:e.name}),pe.jsx("p",{className:"text-sm text-gray-600 font-medium",children:e.subcategory})]}),pe.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-50 px-3 py-1 rounded-full "+(r?"space-x-reverse":""),children:[pe.jsx(m,{className:"h-4 w-4 text-yellow-500 fill-current"}),pe.jsx("span",{className:"text-sm font-bold text-gray-800",children:e.rating}),pe.jsxs("span",{className:"text-xs text-gray-600",children:["(",e.reviewCount,")"]})]})]}),pe.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 "+(r?"text-right":"text-left"),children:e.description}),pe.jsxs("div",{className:"space-y-2",children:[pe.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(n,{className:"h-4 w-4 flex-shrink-0 text-blue-500"}),pe.jsx("span",{className:"line-clamp-1",title:e.address,children:e.address})]}),pe.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-600 "+(r?"space-x-reverse flex-row-reverse":""),children:pe.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full font-medium",children:s(e.governorate)})}),pe.jsxs("div",{className:"flex items-center space-x-2 text-sm "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(I,{className:"h-4 w-4 flex-shrink-0 text-green-500"}),i(e.category)?pe.jsx("a",{href:`tel:${e.phone}`,className:"hover:text-blue-600 transition-colors text-blue-600 font-medium min-h-[44px] flex items-center",onClick:e=>e.stopPropagation(),children:e.phone}):pe.jsx("span",{className:"text-gray-400 italic",children:"Abonnement requis"})]}),pe.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(y,{className:"h-4 w-4 flex-shrink-0 text-orange-500"}),pe.jsx("span",{children:e.hours})]})]}),pe.jsxs("div",{className:"flex items-center space-x-3 mt-3 "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsx("button",{onClick:t=>{t.stopPropagation();const{lat:s,lng:r}=e.coordinates;if(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){const e=`comgooglemaps://?daddr=${s},${r}&directionsmode=driving`,t=`https://www.google.com/maps/dir/?api=1&destination=${s},${r}`,i=document.createElement("a");i.href=e;const a=setTimeout(()=>{window.open(t,"_blank")},1e3);window.addEventListener("blur",()=>{clearTimeout(a)},{once:!0}),i.click()}else{const e=`https://www.google.com/maps/dir/?api=1&destination=${s},${r}`;window.open(e,"_blank")}},className:"flex items-center space-x-1 text-blue-500 hover:text-blue-700 transition-colors p-2 rounded-lg hover:bg-blue-50 min-h-[44px] min-w-[44px] justify-center",title:"Navigation rapide",children:pe.jsx(L,{className:"h-4 w-4"})}),a(e.category)&&e.services.some(e=>e.toLowerCase().includes("wifi"))&&pe.jsx("div",{className:"flex items-center space-x-1 text-blue-500",title:"WiFi disponible",children:pe.jsx(j,{className:"h-4 w-4"})}),a(e.category)&&e.services.some(e=>e.toLowerCase().includes("parking"))&&pe.jsx("div",{className:"flex items-center space-x-1 text-green-500",title:"Parking disponible",children:pe.jsx(w,{className:"h-4 w-4"})})]}),pe.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:a(e.category)?pe.jsxs(pe.Fragment,{children:[e.services.slice(0,3).map((e,t)=>pe.jsx("span",{className:"px-3 py-1.5 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 text-xs rounded-full font-medium hover:from-blue-100 hover:to-blue-200 transition-colors",children:e},t)),e.services.length>3&&pe.jsxs("span",{className:"px-3 py-1.5 bg-gradient-to-r from-blue-100 to-blue-200 text-blue-700 text-xs rounded-full font-medium",children:["+",e.services.length-3," autres"]})]}):pe.jsx("span",{className:"px-3 py-1.5 bg-gradient-to-r from-yellow-100 to-yellow-200 text-yellow-700 text-xs rounded-full font-medium",children:"🔒 Services disponibles avec abonnement"})})]})]})},ki=({establishment:e,onClose:t})=>{const{t:s,isRTL:r}=fe(),{canViewContactInfo:i,canViewServices:o}=Ci(),d=(e,t)=>{const s=document.createElement("div");s.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",s.innerHTML='\n      <div class="bg-white rounded-xl p-6 max-w-sm w-full">\n        <h3 class="text-lg font-bold text-gray-900 mb-4 text-center">Choisir l\'application de navigation</h3>\n        <div class="space-y-3">\n          <button id="google-maps-btn" class="w-full flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">\n            <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">\n              <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">\n                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>\n              </svg>\n            </div>\n            <div class="text-left">\n              <div class="font-medium text-gray-900">Google Maps</div>\n              <div class="text-sm text-gray-500">Navigation GPS</div>\n            </div>\n          </button>\n          \n          <button id="waze-btn" class="w-full flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">\n            <div class="w-10 h-10 bg-blue-400 rounded-lg flex items-center justify-center">\n              <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">\n                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>\n              </svg>\n            </div>\n            <div class="text-left">\n              <div class="font-medium text-gray-900">Waze</div>\n              <div class="text-sm text-gray-500">Navigation communautaire</div>\n            </div>\n          </button>\n          \n          <button id="apple-maps-btn" class="w-full flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">\n            <div class="w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center">\n              <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">\n                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>\n              </svg>\n            </div>\n            <div class="text-left">\n              <div class="font-medium text-gray-900">Apple Plans</div>\n              <div class="text-sm text-gray-500">Navigation iOS</div>\n            </div>\n          </button>\n        </div>\n        \n        <button id="cancel-btn" class="w-full mt-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">\n          Annuler\n        </button>\n      </div>\n    ',document.body.appendChild(s);const r=s.querySelector("#google-maps-btn"),i=s.querySelector("#waze-btn"),a=s.querySelector("#apple-maps-btn"),n=s.querySelector("#cancel-btn");null==r||r.addEventListener("click",()=>{u(e,t),document.body.removeChild(s)}),null==i||i.addEventListener("click",()=>{h(e,t),document.body.removeChild(s)}),null==a||a.addEventListener("click",()=>{p(e,t),document.body.removeChild(s)}),null==n||n.addEventListener("click",()=>{document.body.removeChild(s)}),s.addEventListener("click",e=>{e.target===s&&document.body.removeChild(s)})},u=(e,t)=>{if(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){const s=`comgooglemaps://?daddr=${e},${t}&directionsmode=driving`,r=`https://www.google.com/maps/dir/?api=1&destination=${e},${t}`,i=document.createElement("a");i.href=s;const a=setTimeout(()=>{window.open(r,"_blank")},1e3);window.addEventListener("blur",()=>{clearTimeout(a)},{once:!0}),i.click()}else{const s=`https://www.google.com/maps/dir/?api=1&destination=${e},${t}`;window.open(s,"_blank")}},h=(e,t)=>{if(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){const s=`waze://?ll=${e},${t}&navigate=yes`,r=`https://www.waze.com/ul?ll=${e}%2C${t}&navigate=yes`,i=document.createElement("a");i.href=s;const a=setTimeout(()=>{window.open(r,"_blank")},1e3);window.addEventListener("blur",()=>{clearTimeout(a)},{once:!0}),i.click()}else{const s=`https://www.waze.com/ul?ll=${e}%2C${t}&navigate=yes`;window.open(s,"_blank")}},p=(e,t)=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)){const s=`maps://maps.google.com/maps?daddr=${e},${t}&amp;ll=`;window.location.href=s}else u(e,t)};return pe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:pe.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[pe.jsxs("div",{className:"relative",children:[pe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-64 object-cover rounded-t-xl",loading:"lazy",decoding:"async"}),pe.jsx("button",{onClick:t,className:`absolute top-4 ${r?"left-4":"right-4"} bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition-colors`,children:pe.jsx(c,{className:"h-5 w-5"})}),pe.jsxs("div",{className:`absolute top-4 ${r?"right-4":"left-4"} flex space-x-2 ${r?"space-x-reverse":""}`,children:[pe.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${{hotel:"bg-purple-100 text-purple-800",cultural:"bg-pink-100 text-pink-800",administrative:"bg-blue-100 text-blue-800",sport:"bg-green-100 text-green-800",animal:"bg-yellow-100 text-yellow-800",construction:"bg-gray-100 text-gray-800",alimentation:"bg-indigo-100 text-indigo-800",sante:"bg-red-100 text-red-800",justice:"bg-amber-100 text-amber-800",ecole:"bg-emerald-100 text-emerald-800",taxi:"bg-orange-100 text-orange-800",tourism:"bg-teal-100 text-teal-800",divers:"bg-slate-100 text-slate-800"}[e.category]}`,children:s(e.category)}),e.verified&&pe.jsxs("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full flex items-center space-x-1 "+(r?"space-x-reverse":""),children:[pe.jsx(x,{className:"h-4 w-4"}),pe.jsx("span",{className:"text-sm font-medium",children:s("verified")})]}),e.premium&&pe.jsxs("div",{className:"bg-yellow-500 text-white px-3 py-1 rounded-full flex items-center space-x-1 "+(r?"space-x-reverse":""),children:[pe.jsx(v,{className:"h-4 w-4"}),pe.jsx("span",{className:"text-sm font-medium",children:s("premium")})]})]})]}),pe.jsxs("div",{className:"p-6",children:[pe.jsxs("div",{className:"flex items-start justify-between mb-4 "+(r?"flex-row-reverse":""),children:[pe.jsxs("div",{className:"flex-1 "+(r?"text-right":"text-left"),children:[pe.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),pe.jsx("p",{className:"text-lg text-gray-600",children:e.subcategory}),pe.jsxs("p",{className:"text-sm text-gray-500 flex items-center space-x-1",children:[pe.jsx(n,{className:"h-4 w-4"}),pe.jsx("span",{children:s(e.governorate)})]})]}),pe.jsxs("div",{className:"flex items-center space-x-2 "+(r?"space-x-reverse":""),children:[pe.jsx("button",{onClick:async()=>{if(navigator.share)try{await navigator.share({title:e.name,text:e.description,url:window.location.href})}catch(t){}else navigator.clipboard.writeText(window.location.href),alert("Lien copié dans le presse-papiers !")},className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",title:"Partager",children:pe.jsx(q,{className:"h-6 w-6"})}),pe.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Ajouter aux favoris",children:pe.jsx(B,{className:"h-6 w-6"})})]})]}),pe.jsxs("div",{className:"flex items-center space-x-3 mb-4 "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsxs("div",{className:"flex items-center space-x-1 "+(r?"space-x-reverse":""),children:[pe.jsx(m,{className:"h-5 w-5 text-yellow-400 fill-current"}),pe.jsx("span",{className:"text-lg font-medium text-gray-700",children:e.rating})]}),pe.jsxs("span",{className:"text-gray-500",children:["(",e.reviewCount," ",s("reviews"),")"]})]}),pe.jsx("p",{className:"text-gray-600 mb-6 "+(r?"text-right":"text-left"),children:e.description}),pe.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[pe.jsxs("div",{className:"space-y-4",children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900 "+(r?"text-right":"text-left"),children:"Informations de contact"}),pe.jsxs("div",{className:"space-y-3",children:[pe.jsxs("div",{className:"flex items-center space-x-3 "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(n,{className:"h-5 w-5 text-gray-400"}),pe.jsx("span",{className:"text-gray-700",children:e.address})]}),pe.jsxs("div",{className:"flex items-center space-x-3 "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(I,{className:"h-5 w-5 text-gray-400"}),i(e.category)?pe.jsx("a",{href:`tel:${e.phone}`,className:"text-blue-600 hover:underline",children:e.phone}):pe.jsx("span",{className:"text-gray-400 italic",children:"Abonnement requis pour voir le téléphone"})]}),i(e.category)&&e.email&&pe.jsxs("div",{className:"flex items-center space-x-3 "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(l,{className:"h-5 w-5 text-gray-400"}),pe.jsx("a",{href:`mailto:${e.email}`,className:"text-blue-600 hover:underline",children:e.email})]}),i(e.category)&&e.website&&pe.jsxs("div",{className:"flex items-center space-x-3 "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(a,{className:"h-5 w-5 text-gray-400"}),pe.jsx("a",{href:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:e.website})]}),!i(e.category)&&pe.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4",children:[pe.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[pe.jsx(v,{className:"h-5 w-5"}),pe.jsx("span",{className:"font-medium",children:"Informations de contact premium"})]}),pe.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Souscrivez à un abonnement pour accéder aux coordonnées complètes de cet établissement."})]}),pe.jsxs("div",{className:"flex items-center space-x-3 "+(r?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(y,{className:"h-5 w-5 text-gray-400"}),pe.jsx("span",{className:"text-gray-700",children:e.hours})]})]})]}),pe.jsxs("div",{className:"space-y-4",children:[pe.jsx("h3",{className:"text-lg font-semibold text-gray-900 "+(r?"text-right":"text-left"),children:s("services")}),o(e.category)?pe.jsx("div",{className:"flex flex-wrap gap-2",children:e.services.map((e,t)=>pe.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:e},t))}):pe.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[pe.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[pe.jsx(v,{className:"h-5 w-5"}),pe.jsx("span",{className:"font-medium",children:"Services détaillés premium"})]}),pe.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Souscrivez à un abonnement pour voir la liste complète des services proposés."})]})]})]}),pe.jsxs("div",{className:"mt-6 flex space-x-3",children:[i(e.category)?pe.jsx("button",{className:"flex-1 bg-blue-600 text-white py-4 px-6 rounded-lg hover:bg-blue-700 transition-colors font-medium min-h-[48px] touch-target",children:pe.jsxs("a",{href:`tel:${e.phone}`,className:"flex items-center justify-center space-x-2",children:[pe.jsx(I,{className:"h-5 w-5"}),pe.jsx("span",{children:"Appeler"})]})}):pe.jsxs("button",{className:"flex-1 bg-gray-400 text-white py-4 px-6 rounded-lg cursor-not-allowed font-medium flex items-center justify-center space-x-2 min-h-[48px]",children:[pe.jsx(v,{className:"h-5 w-5"}),pe.jsx("span",{children:"Abonnement requis"})]}),pe.jsxs("button",{onClick:()=>{const{lat:t,lng:s}=e.coordinates;if(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))d(t,s);else{const e=`https://www.google.com/maps/dir/?api=1&destination=${t},${s}`;window.open(e,"_blank")}},className:"flex-1 border border-gray-300 text-gray-700 py-4 px-6 rounded-lg hover:bg-gray-50 transition-colors font-medium flex items-center justify-center space-x-2 min-h-[48px] touch-target",children:[pe.jsx(L,{className:"h-5 w-5"}),pe.jsx("span",{children:"Itinéraire"})]})]}),pe.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[pe.jsxs("div",{className:"flex items-center space-x-2 mb-2 "+(r?"space-x-reverse":""),children:[pe.jsx(C,{className:"h-5 w-5 text-blue-600"}),pe.jsx("h4",{className:"font-medium text-blue-900",children:"Accessibilité"})]}),pe.jsx("p",{className:"text-sm text-blue-800",children:o(e.category)&&e.services.some(e=>e.toLowerCase().includes("accessibilité")||e.toLowerCase().includes("pmr"))?"Établissement accessible aux personnes à mobilité réduite":"Informations d'accessibilité non disponibles. Contactez l'établissement pour plus de détails."})]})]})]})})},Si=e=>({id:e.id,name:e.name,category:e.category,subcategory:e.subcategory,description:e.description,address:e.address,governorate:e.governorate,phone:e.phone,email:e.email||"",website:e.website||"",image:e.image||"https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg",rating:e.rating||4,reviewCount:e.review_count||0,hours:e.hours||"09:00 - 18:00",services:e.services||[],coordinates:{lat:e.latitude,lng:e.longitude},verified:e.verified||!1,premium:e.premium||!1}),Ti=async()=>{try{const{data:e,error:t}=await ji.from("establishments").select("*").order("created_at",{ascending:!1});if(t)throw new Error(`Erreur Supabase: ${t.message}`);return e&&0!==e.length?e.map(Si):[]}catch(e){throw new Error("Impossible de récupérer les données depuis Supabase")}},Pi=async e=>{var t,s;try{const{data:r,error:i}=await ji.from("establishments").insert({name:e.name,category:e.category,subcategory:e.subcategory,description:e.description,address:e.address,governorate:e.governorate,district:"tunis"===e.governorate?"centre-ville":null,phone:e.phone,email:e.email,website:e.website,hours:e.hours,services:e.services||[],latitude:(null==(t=e.coordinates)?void 0:t.lat)||36.8065,longitude:(null==(s=e.coordinates)?void 0:s.lng)||10.1815,verified:!1,premium:!1}).select().single();return i?null:r.id}catch(r){return null}},Ei=Object.freeze(Object.defineProperty({__proto__:null,addEstablishmentToSupabase:Pi,fetchEstablishmentsFromSupabase:Ti},Symbol.toStringTag,{value:"Module"})),Ai=({onClose:t})=>{const{t:s,isRTL:r}=fe(),[i,a]=e.useState(!1),[n,l]=e.useState({name:"",category:"",subcategory:"",description:"",address:"",governorate:"",phone:"",email:"",website:"",hours:"",services:"",suggestedBy:"",suggestedByEmail:""}),d=e=>{const{name:t,value:s}=e.target;l(e=>({...e,[t]:s}))};return i?pe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:pe.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-8 text-center",children:[pe.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:pe.jsx(z,{className:"h-8 w-8 text-green-600"})}),pe.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Merci !"}),pe.jsx("p",{className:"text-gray-600",children:s("suggestionSuccess")})]})}):pe.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:pe.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[pe.jsx("div",{className:"p-6 border-b border-gray-200",children:pe.jsxs("div",{className:"flex items-center justify-between "+(r?"flex-row-reverse":""),children:[pe.jsxs("div",{children:[pe.jsx("h2",{className:"text-2xl font-bold text-gray-900 "+(r?"text-right":"text-left"),children:s("suggestTitle")}),pe.jsx("p",{className:"text-gray-600 mt-1 "+(r?"text-right":"text-left"),children:s("suggestSubtitle")})]}),pe.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:pe.jsx(c,{className:"h-6 w-6"})})]})}),pe.jsxs("form",{onSubmit:e=>{e.preventDefault();(async()=>{try{const e={name:n.name,category:n.category,subcategory:n.subcategory,description:n.description,address:n.address,governorate:n.governorate,phone:n.phone,email:n.email,website:n.website,hours:n.hours,services:n.services.split(",").map(e=>e.trim()).filter(e=>e),coordinates:{lat:36.8065,lng:10.1815}};if(!(await Pi(e)))throw new Error("Échec de l'ajout à Supabase");a(!0),setTimeout(()=>{t()},3e3)}catch(e){alert("Erreur lors de l'envoi de la suggestion. Veuillez réessayer.")}})()},className:"p-6 space-y-6",children:[pe.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("establishmentName")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsx("input",{type:"text",name:"name",value:n.name,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]}),pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("category")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsxs("select",{name:"category",value:n.category,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),children:[pe.jsx("option",{value:"",children:"Sélectionner une catégorie"}),["hotel","cultural","administrative","sport","animal","construction","alimentation","sante","justice","ecole","taxi","tourism","divers"].map(e=>pe.jsx("option",{value:e,children:s(e)},e))]})]}),pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("subcategory")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsx("input",{type:"text",name:"subcategory",value:n.subcategory,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]}),pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("governorate")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsxs("select",{name:"governorate",value:n.governorate,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),children:[pe.jsx("option",{value:"",children:"Sélectionner un gouvernorat"}),["tunis","ariana","ben-arous","manouba","nabeul","zaghouan","bizerte","beja","jendouba","kef","siliana","sousse","monastir","mahdia","sfax","kairouan","kasserine","sidi-bouzid","gabes","medenine","tataouine","gafsa","tozeur","kebili"].map(e=>pe.jsx("option",{value:e,children:s(e)},e))]})]}),pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("phone")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:s("email")}),pe.jsx("input",{type:"email",name:"email",value:n.email,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:s("website")}),pe.jsx("input",{type:"url",name:"website",value:n.website,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]}),pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("openingHours")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsx("input",{type:"text",name:"hours",value:n.hours,onChange:d,required:!0,placeholder:"Ex: 08h00 - 18h00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]})]}),pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("address")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsx("input",{type:"text",name:"address",value:n.address,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]}),pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("description")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsx("textarea",{name:"description",value:n.description,onChange:d,required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]}),pe.jsxs("div",{children:[pe.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:s("servicesOffered")}),pe.jsx("input",{type:"text",name:"services",value:n.services,onChange:d,placeholder:"Service 1, Service 2, Service 3...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]}),pe.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("yourName")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsx("input",{type:"text",name:"suggestedBy",value:n.suggestedBy,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]}),pe.jsxs("div",{children:[pe.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 "+(r?"text-right":"text-left"),children:[s("yourEmail")," ",pe.jsx("span",{className:"text-red-500",children:"*"})]}),pe.jsx("input",{type:"email",name:"suggestedByEmail",value:n.suggestedByEmail,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(r?"text-right":"text-left"),dir:r?"rtl":"ltr"})]})]}),pe.jsxs("div",{className:"flex space-x-4 pt-6 "+(r?"space-x-reverse":""),children:[pe.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:s("cancel")}),pe.jsxs("button",{type:"submit",className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center justify-center space-x-2 "+(r?"space-x-reverse":""),children:[pe.jsx(o,{className:"h-5 w-5"}),pe.jsx("span",{children:s("submitSuggestion")})]})]})]})]})})},Ri=()=>pe.jsx("div",{className:"bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 py-20",children:pe.jsx("div",{className:"container mx-auto px-4",children:pe.jsx("div",{className:"text-center",children:pe.jsx("div",{className:"max-w-3xl mx-auto",children:pe.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-12 border border-gray-200 relative overflow-hidden",children:[pe.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"}),pe.jsx("div",{className:"flex items-center justify-center mb-6",children:pe.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-purple-100 p-6 rounded-full",children:pe.jsx(v,{className:"h-16 w-16 text-blue-600"})})}),pe.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Fonctionnalités Premium"}),pe.jsxs("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:["Les abonnements et fonctionnalités premium seront bientôt disponibles !",pe.jsx("br",{}),"En attendant, profitez de toutes les fonctionnalités gratuites."]}),pe.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-8 mb-8 border border-blue-100",children:[pe.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[pe.jsx(y,{className:"h-8 w-8 text-blue-600"}),pe.jsx("span",{className:"text-2xl font-bold text-blue-900",children:"Bientôt disponible"})]}),pe.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[pe.jsxs("div",{className:"space-y-4",children:[pe.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:"Pour les Entreprises"}),pe.jsxs("ul",{className:"space-y-3 text-left",children:[pe.jsxs("li",{className:"flex items-center space-x-3",children:[pe.jsx(x,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),pe.jsx("span",{className:"text-gray-700",children:"Plans d'abonnement flexibles"})]}),pe.jsxs("li",{className:"flex items-center space-x-3",children:[pe.jsx(x,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),pe.jsx("span",{className:"text-gray-700",children:'Badge "Vérifié" premium'})]}),pe.jsxs("li",{className:"flex items-center space-x-3",children:[pe.jsx(x,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),pe.jsx("span",{className:"text-gray-700",children:"Mise en avant dans les résultats"})]}),pe.jsxs("li",{className:"flex items-center space-x-3",children:[pe.jsx(x,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),pe.jsx("span",{className:"text-gray-700",children:"Statistiques détaillées"})]})]})]}),pe.jsxs("div",{className:"space-y-4",children:[pe.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:"Pour les Touristes"}),pe.jsxs("ul",{className:"space-y-3 text-left",children:[pe.jsxs("li",{className:"flex items-center space-x-3",children:[pe.jsx(x,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),pe.jsx("span",{className:"text-gray-700",children:"Guides touristiques exclusifs"})]}),pe.jsxs("li",{className:"flex items-center space-x-3",children:[pe.jsx(x,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),pe.jsx("span",{className:"text-gray-700",children:"Réductions partenaires"})]}),pe.jsxs("li",{className:"flex items-center space-x-3",children:[pe.jsx(x,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),pe.jsx("span",{className:"text-gray-700",children:"Concierge virtuel"})]}),pe.jsxs("li",{className:"flex items-center space-x-3",children:[pe.jsx(x,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),pe.jsx("span",{className:"text-gray-700",children:"Support prioritaire"})]})]})]})]})]}),pe.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white py-4 px-8 rounded-xl mb-6",children:pe.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[pe.jsx(m,{className:"h-6 w-6 fill-current"}),pe.jsx("p",{className:"font-bold text-lg",children:"En attendant, profitez de toutes les fonctionnalités gratuites !"})]})}),pe.jsxs("div",{className:"text-sm text-gray-500",children:[pe.jsx("p",{children:"Les paiements seront activés dès que notre système Stripe sera opérationnel."}),pe.jsx("p",{className:"mt-1",children:"Restez connectés pour les mises à jour ! 🚀"})]})]})})})})}),Oi=()=>{const[t,s]=e.useState(null),[r,i]=e.useState(!1),[a,n]=e.useState(!1),[o,l]=e.useState(navigator.onLine),[c,d]=e.useState(!1);e.useEffect(()=>{(()=>{const e=window.matchMedia("(display-mode: standalone)").matches,t=!0===window.navigator.standalone;n(e||t)})();const e=e=>{e.preventDefault(),s(e),i(!0)},t=()=>{n(!0),i(!1),s(null)},r=()=>l(!0),a=()=>l(!1);return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),window.addEventListener("online",r),window.addEventListener("offline",a),!("serviceWorker"in navigator)||window.location.hostname.includes("stackblitz")||window.location.hostname.includes("webcontainer.io")||"localhost"===window.location.hostname||navigator.serviceWorker.register("/sw.js").then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&d(!0)})})}).catch(e=>{}),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t),window.removeEventListener("online",r),window.removeEventListener("offline",a)}},[]);return{isInstallable:r,isInstalled:a,isOnline:o,updateAvailable:c,installApp:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:e}=await t.userChoice;return"accepted"===e&&(n(!0),i(!1),s(null),!0)}catch(e){return!1}},updateApp:()=>{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(e=>{e&&e.waiting&&(e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())})},requestNotificationPermission:async()=>{if("Notification"in window){return"granted"===await Notification.requestPermission()}return!1},showNotification:(e,t)=>{"serviceWorker"in navigator&&"Notification"in window&&navigator.serviceWorker.ready.then(s=>{s.showNotification(e,{icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",vibrate:[200,100,200],...t})})}}},Mi=()=>{const{isInstallable:t,isInstalled:s,isOnline:r,updateAvailable:i,installApp:a,updateApp:n}=Oi(),{isRTL:o}=fe(),[l,d]=e.useState(!0),[u,h]=e.useState(!1),m=()=>{n()};return i?pe.jsx("div",{className:"fixed top-0 left-0 right-0 bg-blue-600 text-white p-4 z-50 shadow-lg",children:pe.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[pe.jsxs("div",{className:"flex items-center space-x-3 "+(o?"space-x-reverse":""),children:[pe.jsx(D,{className:"h-5 w-5"}),pe.jsx("span",{className:"font-medium",children:"Une nouvelle version est disponible"})]}),pe.jsx("button",{onClick:m,className:"bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Mettre à jour"})]})}):r?!s&&t&&l?pe.jsxs("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm bg-white rounded-xl shadow-2xl border border-gray-200 p-6 z-50 animate-slide-up",children:[pe.jsx("button",{onClick:()=>d(!1),className:`absolute top-3 ${o?"left-3":"right-3"} text-gray-400 hover:text-gray-600 transition-colors`,children:pe.jsx(c,{className:"h-5 w-5"})}),pe.jsxs("div",{className:"mb-4",children:[pe.jsxs("div",{className:"flex items-center space-x-3 mb-3 "+(o?"space-x-reverse":""),children:[pe.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:pe.jsx(H,{className:"h-6 w-6 text-blue-600"})}),pe.jsxs("div",{children:[pe.jsx("h3",{className:"font-bold text-gray-900",children:"Installer daliltounes"}),pe.jsx("p",{className:"text-sm text-gray-600",children:"Guide des établissements"})]})]}),pe.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Installez notre application pour une expérience optimale avec :"}),pe.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 mb-4",children:[pe.jsxs("li",{className:"flex items-center space-x-2 "+(o?"space-x-reverse":""),children:[pe.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),pe.jsx("span",{children:"Accès rapide depuis votre écran d'accueil"})]}),pe.jsxs("li",{className:"flex items-center space-x-2 "+(o?"space-x-reverse":""),children:[pe.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),pe.jsx("span",{children:"Fonctionnement hors ligne"})]}),pe.jsxs("li",{className:"flex items-center space-x-2 "+(o?"space-x-reverse":""),children:[pe.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),pe.jsx("span",{children:"Notifications push"})]}),pe.jsxs("li",{className:"flex items-center space-x-2 "+(o?"space-x-reverse":""),children:[pe.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),pe.jsx("span",{children:"Interface native"})]})]})]}),pe.jsxs("div",{className:"flex space-x-3",children:[pe.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Plus tard"}),pe.jsxs("button",{onClick:async()=>{h(!0);const e=await a();h(!1),e&&d(!1)},disabled:u,className:`flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center space-x-2 ${u?"opacity-50 cursor-not-allowed":""} ${o?"space-x-reverse":""}`,children:[pe.jsx(D,{className:"h-4 w-4"}),pe.jsx("span",{children:u?"Installation...":"Installer"})]})]})]}):null:pe.jsx("div",{className:"fixed top-0 left-0 right-0 bg-orange-500 text-white p-3 z-50 shadow-lg",children:pe.jsxs("div",{className:"container mx-auto flex items-center justify-center space-x-2",children:[pe.jsx(U,{className:"h-5 w-5"}),pe.jsx("span",{className:"font-medium",children:"Mode hors ligne - Fonctionnalités limitées"})]})})},$i=()=>{const{isOnline:e}=Oi();return e?null:pe.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-orange-500 text-white rounded-xl shadow-lg p-4 z-40 animate-slide-up",children:pe.jsxs("div",{className:"flex items-center justify-between",children:[pe.jsxs("div",{className:"flex items-center space-x-3",children:[pe.jsx(U,{className:"h-5 w-5"}),pe.jsxs("div",{children:[pe.jsx("p",{className:"font-medium",children:"Mode hors ligne"}),pe.jsx("p",{className:"text-sm opacity-90",children:"Certaines fonctionnalités sont limitées"})]})]}),pe.jsx("button",{onClick:()=>{window.location.reload()},className:"bg-white bg-opacity-20 hover:bg-opacity-30 p-2 rounded-lg transition-colors",title:"Réessayer la connexion",children:pe.jsx(G,{className:"h-4 w-4"})})]})})},Ii=({activeTab:e,onTabChange:t,onSuggestClick:s})=>{const{t:r}=fe(),i=[{id:"home",icon:F,label:r("home")},{id:"search",icon:p,label:"Recherche"},{id:"suggest",icon:o,label:"Suggérer",action:s},{id:"favorites",icon:B,label:"Favoris"},{id:"profile",icon:K,label:"Profil"}];return pe.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40 md:hidden",children:pe.jsx("div",{className:"grid grid-cols-5 h-16",children:i.map(s=>{const r=s.icon,i=e===s.id;return pe.jsxs("button",{onClick:()=>s.action?s.action():t(s.id),className:`flex flex-col items-center justify-center space-y-1 transition-colors ${i?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"} ${"suggest"===s.id?"relative":""}`,children:["suggest"===s.id?pe.jsx("div",{className:"bg-blue-600 text-white p-2 rounded-full shadow-lg",children:pe.jsx(r,{className:"h-5 w-5"})}):pe.jsx(r,{className:`h-5 w-5 ${i?"scale-110":""} transition-transform`}),pe.jsx("span",{className:"text-xs font-medium "+("suggest"===s.id?"text-blue-600":""),children:s.label})]},s.id)})})})},Li=({onRefresh:t,children:s})=>{const[r,i]=e.useState(!1),[a,n]=e.useState(!1),[o,l]=e.useState(0),c=e.useRef(0),d=e.useRef(0),u=e.useRef(null);e.useEffect(()=>{const e=u.current;if(!e)return;let s=!0;const h=()=>{s=0===e.scrollTop},m=e=>{s&&!a&&(c.current=e.touches[0].clientY,i(!0))},p=e=>{if(!r||!s||a)return;d.current=e.touches[0].clientY;const t=d.current-c.current;if(t>0){e.preventDefault();const s=Math.min(.5*t,120);l(s)}},g=async()=>{if(r&&!a){if(i(!1),o>=80){n(!0);try{await t()}catch(e){}finally{n(!1)}}l(0)}};return e.addEventListener("scroll",h),e.addEventListener("touchstart",m,{passive:!1}),e.addEventListener("touchmove",p,{passive:!1}),e.addEventListener("touchend",g),()=>{e.removeEventListener("scroll",h),e.removeEventListener("touchstart",m),e.removeEventListener("touchmove",p),e.removeEventListener("touchend",g)}},[r,o,a,t]);const h=Math.min(o/80,1),m=o/80*360;return pe.jsxs("div",{ref:u,className:"h-full overflow-auto",children:[pe.jsx("div",{className:"flex items-center justify-center py-4 transition-all duration-200",style:{transform:`translateY(${o-60}px)`,opacity:h},children:pe.jsx("div",{className:"bg-white rounded-full p-3 shadow-lg",children:pe.jsx(G,{className:"h-6 w-6 text-blue-600 transition-transform duration-200 "+(a?"animate-spin":""),style:{transform:`rotate(${m}deg)`}})})}),pe.jsx("div",{style:{transform:`translateY(${o}px)`,transition:r?"none":"transform 0.2s ease-out"},children:s})]})},qi=({title:e="daliltounes - Guide complet des établissements tunisiens | Hôtels, Restaurants, Services",description:t="Découvrez plus de 2000 établissements en Tunisie avec daliltounes. Guide complet des hôtels, restaurants, services administratifs, culturels et touristiques dans tous les gouvernorats tunisiens.",keywords:r="daliltounes, Tunisie, établissements tunisiens, hôtels Tunisie, restaurants Tunisie, guide Tunisie, tourisme Tunisie, services Tunisie, annuaire Tunisie, business Tunisie, Tunis, Sousse, Sfax",canonical:i="https://www.dalil-tounes.com/",ogImage:a="https://www.dalil-tounes.com/icons/icon-512x512.png"})=>{const{language:n}=fe();return s.useEffect(()=>{document.title=e;const s=(e,t)=>{let s=document.querySelector(`meta[name="${e}"]`);s||(s=document.createElement("meta"),s.name=e,document.head.appendChild(s)),s.content=t},o=(e,t)=>{let s=document.querySelector(`meta[property="${e}"]`);s||(s=document.createElement("meta"),s.setAttribute("property",e),document.head.appendChild(s)),s.content=t};s("description",t),s("keywords",r),s("language",n),o("og:title",e),o("og:description",t),o("og:image",a),o("og:url",i),s("twitter:title",e),s("twitter:description",t),s("twitter:image",a);let l=document.querySelector('link[rel="canonical"]');l||(l=document.createElement("link"),l.rel="canonical",document.head.appendChild(l)),l.href=i},[e,t,r,i,a,n]),null},Bi=()=>{const{t:e,isRTL:t}=fe();return pe.jsx("footer",{className:"bg-gray-900 text-white py-12",children:pe.jsxs("div",{className:"container mx-auto px-4",children:[pe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[pe.jsxs("div",{children:[pe.jsxs("div",{className:"flex items-center space-x-2 mb-4 "+(t?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(n,{className:"h-8 w-8 text-blue-400"}),pe.jsxs("div",{children:[pe.jsx("h3",{className:"text-xl font-bold",children:e("appName")}),pe.jsx("p",{className:"text-gray-400 text-sm",children:e("appSubtitle")})]})]}),pe.jsx("p",{className:"text-gray-400 mb-4 "+(t?"text-right":"text-left"),children:e("footerDescription")}),pe.jsxs("div",{className:"flex space-x-4 "+(t?"space-x-reverse flex-row-reverse":""),children:[pe.jsx("a",{href:"#",className:"text-gray-400 hover:text-blue-400 transition-colors",children:pe.jsx(V,{className:"h-6 w-6"})}),pe.jsx("a",{href:"#",className:"text-gray-400 hover:text-blue-400 transition-colors",children:pe.jsx(W,{className:"h-6 w-6"})}),pe.jsx("a",{href:"#",className:"text-gray-400 hover:text-blue-400 transition-colors",children:pe.jsx(J,{className:"h-6 w-6"})})]})]}),pe.jsxs("div",{children:[pe.jsx("h4",{className:"text-lg font-semibold mb-4 "+(t?"text-right":"text-left"),children:e("navigation")}),pe.jsxs("ul",{className:"space-y-2",children:[pe.jsx("li",{children:pe.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"text-gray-400 hover:text-white transition-colors",children:e("home")})}),pe.jsx("li",{children:pe.jsx("button",{onClick:()=>{const e=document.getElementById("main-content");e&&e.scrollIntoView({behavior:"smooth"})},className:"text-gray-400 hover:text-white transition-colors",children:e("establishments")})}),pe.jsx("li",{children:pe.jsx("button",{onClick:()=>{const e=document.getElementById("subscriptions-section");e&&e.scrollIntoView({behavior:"smooth"})},className:"text-gray-400 hover:text-white transition-colors",children:e("subscriptions")})}),pe.jsx("li",{children:pe.jsx("button",{onClick:()=>{const e=document.getElementById("footer-section");e&&e.scrollIntoView({behavior:"smooth"})},className:"text-gray-400 hover:text-white transition-colors",children:e("contact")})})]})]}),pe.jsxs("div",{children:[pe.jsx("h4",{className:"text-lg font-semibold mb-4 "+(t?"text-right":"text-left"),children:e("categories")}),pe.jsxs("ul",{className:"space-y-2",children:[pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("hotel")})}),pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("cultural")})}),pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("administrative")})}),pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("sport")})}),pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("sante")})}),pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("justice")})}),pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("ecole")})}),pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("taxi")})}),pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("alimentation")})}),pe.jsx("li",{children:pe.jsx("span",{className:"text-gray-400",children:e("divers")})})]})]}),pe.jsxs("div",{children:[pe.jsx("h4",{className:"text-lg font-semibold mb-4 "+(t?"text-right":"text-left"),children:e("contact")}),pe.jsx("div",{className:"space-y-3",children:pe.jsxs("div",{className:"flex items-center space-x-2 "+(t?"space-x-reverse flex-row-reverse":""),children:[pe.jsx(l,{className:"h-5 w-5 text-gray-400"}),pe.jsx("a",{href:"mailto:contact@dalil-tounes.com",className:"text-gray-400 hover:text-white transition-colors",children:"contact@dalil-tounes.com"})]})})]})]}),pe.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center",children:pe.jsxs("p",{className:"text-gray-400",children:["© 2024 Dalil Tounes. ",e("allRightsReserved")]})})]})})},zi=()=>{const e=[];return e.push("VITE_GOOGLE_MAPS_API_KEY manquante"),!(e.length>0)};zi();const Di=({establishments:t,selectedEstablishment:s,onEstablishmentSelect:r,center:i={lat:36.8065,lng:10.1815},zoom:n=7})=>{const o=e.useRef(null),[l,c]=e.useState(!1),[d,u]=e.useState("roadmap"),[h,m]=e.useState(null),[p,g]=e.useState("Google Maps temporairement désactivé - Utilisation d'alternatives de navigation"),[b,f]=e.useState(!1),{isRTL:x}=fe();e.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{m({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{})},[]),e.useEffect(()=>{g("Google Maps non configuré - Affichage de la liste des établissements")},[t,s,i,n,d,h,r]);return e.useEffect(()=>{window.openNavigation=(e,t)=>{const s=`https://www.google.com/maps/dir/?api=1&destination=${e},${t}`;window.open(s,"_blank")}},[]),pe.jsxs("div",{className:"relative bg-white rounded-xl shadow-lg overflow-hidden "+(l?"fixed inset-0 z-50":"h-96"),children:[p&&pe.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-20",children:pe.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[pe.jsx(a,{className:"h-16 w-16 text-blue-500 mx-auto mb-4"}),pe.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Vue carte alternative"}),pe.jsx("p",{className:"text-gray-600 mb-4",children:p}),pe.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-4",children:[pe.jsxs("h4",{className:"font-semibold text-gray-900",children:["Établissements (",t.length,")"]}),pe.jsx("button",{onClick:()=>f(!b),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:b?"Masquer":"Voir tous"})]}),t.slice(0,5).map(e=>pe.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border text-left",children:[pe.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:e.name}),pe.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.address}),pe.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[pe.jsx("span",{className:"text-yellow-400 text-xs",children:"★"}),pe.jsx("span",{className:"text-xs text-gray-600",children:e.rating}),pe.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full",children:e.category})]}),pe.jsxs("div",{className:"flex space-x-2",children:[pe.jsx("button",{onClick:()=>{const t=`https://www.google.com/maps/dir/?api=1&destination=${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")},className:"flex-1 bg-blue-600 text-white text-xs py-1 px-2 rounded hover:bg-blue-700 transition-colors",children:"Navigation"}),pe.jsx("button",{onClick:()=>r&&r(e),className:"flex-1 bg-gray-600 text-white text-xs py-1 px-2 rounded hover:bg-gray-700 transition-colors",children:"Détails"})]})]},e.id)),t.length>5&&pe.jsxs("p",{className:"text-sm text-gray-500",children:["+",t.length-5," autres établissements",pe.jsx("button",{onClick:()=>f(!0),className:"text-blue-600 hover:text-blue-700 ml-2",children:"Voir tous"})]}),b&&pe.jsx("div",{className:"mt-4 max-h-96 overflow-y-auto space-y-2",children:t.map(e=>pe.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border text-left",children:[pe.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:e.name}),pe.jsx("p",{className:"text-xs text-gray-600 mb-1",children:e.subcategory}),pe.jsx("p",{className:"text-xs text-gray-500 mb-2",children:e.address}),pe.jsxs("div",{className:"flex space-x-2",children:[pe.jsx("button",{onClick:()=>{const t=`https://www.google.com/maps/dir/?api=1&destination=${e.coordinates.lat},${e.coordinates.lng}`;window.open(t,"_blank")},className:"flex-1 bg-blue-600 text-white text-xs py-1 px-2 rounded hover:bg-blue-700 transition-colors",children:"Navigation"}),pe.jsx("button",{onClick:()=>r&&r(e),className:"flex-1 bg-gray-600 text-white text-xs py-1 px-2 rounded hover:bg-gray-700 transition-colors",children:"Détails"})]})]},e.id))})]})]})}),!p&&pe.jsxs("div",{className:`absolute top-4 ${x?"left-4":"right-4"} z-10 flex flex-col space-y-2`,children:[pe.jsx("button",{onClick:()=>{c(!l)},className:"bg-white p-2 rounded-lg shadow-md hover:shadow-lg transition-shadow",title:l?"Quitter le plein écran":"Plein écran",children:l?pe.jsx(Y,{className:"h-5 w-5"}):pe.jsx(Z,{className:"h-5 w-5"})}),pe.jsx("button",{onClick:()=>u("roadmap"===d?"satellite":"roadmap"),className:"bg-white p-2 rounded-lg shadow-md hover:shadow-lg transition-shadow",title:"Changer le type de carte",children:pe.jsx(Q,{className:"h-5 w-5"})}),h&&t.length>0&&pe.jsx("button",{onClick:()=>{if(h&&t.length>0){const e=t[0],s=`https://www.google.com/maps/dir/${h.lat},${h.lng}/${e.coordinates.lat},${e.coordinates.lng}`;window.open(s,"_blank")}},className:"bg-green-600 text-white p-2 rounded-lg shadow-md hover:shadow-lg transition-shadow",title:"Itinéraire vers tous les établissements",children:pe.jsx(L,{className:"h-5 w-5"})})]}),pe.jsx("div",{ref:o,className:"w-full h-full"})]})},Ui=()=>(e.useEffect(()=>{(()=>{const e=document.createElement("link");e.rel="preload",e.href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",e.as="style",document.head.appendChild(e);const t=document.createElement("link");t.rel="modulepreload",t.href="/src/components/SearchBar.tsx",document.head.appendChild(t)})(),(()=>{const e=document.querySelectorAll('img[loading="lazy"]');if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const s=e.target;s.dataset.src&&(s.src=s.dataset.src,s.removeAttribute("data-src"),t.unobserve(s))}})},{rootMargin:"50px 0px"});e.forEach(e=>t.observe(e))}})(),document.querySelectorAll("script[data-defer]").forEach(e=>{const t=document.createElement("script");t.src=e.getAttribute("src")||"",t.async=!0,document.head.appendChild(t)}),(()=>{const e=document.createElement("meta");e.httpEquiv="Cache-Control",e.content="public, max-age=31536000",document.head.appendChild(e)})();const e=async()=>{try{const{getCLS:e,getFID:t,getFCP:s,getLCP:r,getTTFB:i}=await qe(async()=>{const{getCLS:e,getFID:t,getFCP:s,getLCP:r,getTTFB:i}=await Promise.resolve().then(()=>Fi);return{getCLS:e,getFID:t,getFCP:s,getLCP:r,getTTFB:i}},void 0,import.meta.url);e(console.log),t(console.log),s(console.log),r(console.log),i(console.log)}catch(e){}};return"complete"===document.readyState?e():window.addEventListener("load",e),()=>{window.removeEventListener("load",e)}},[]),null),Hi=({onClose:t})=>{const[s,r]=e.useState(!1),[i,a]=e.useState(null);return pe.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center p-4",children:pe.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative",children:[pe.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Fermer les instructions",children:pe.jsx(c,{className:"h-6 w-6"})}),pe.jsxs("div",{className:"p-8",children:[pe.jsxs("div",{className:"text-center",children:[pe.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[pe.jsx(X,{className:"h-8 w-8 text-blue-600"}),pe.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuration Stripe + Supabase"})]}),pe.jsx("p",{className:"text-gray-600",children:"Suivez ces étapes pour configurer complètement votre système de paiement"})]}),pe.jsx("div",{className:"grid md:grid-cols-2 gap-6 mt-8",children:[{title:"1. Configuration Stripe",items:[{text:"Créer un compte Stripe",link:"https://dashboard.stripe.com/register",status:"pending"},{text:"Récupérer les clés API (Développeurs > Clés API)",link:"https://dashboard.stripe.com/apikeys",status:"pending"},{text:"Configurer les webhooks",link:"https://dashboard.stripe.com/webhooks",status:"pending"}]},{title:"2. Configuration Supabase",items:[{text:"Créer un projet Supabase",link:"https://supabase.com/dashboard",status:"pending"},{text:"Récupérer les clés API (Settings > API)",status:"pending"},{text:"Exécuter les migrations SQL",status:"pending"}]},{title:"3. Configuration Google Maps",items:[{text:"Créer un projet Google Cloud",link:"https://console.cloud.google.com/",status:"pending"},{text:"Activer l'API Maps JavaScript",link:"https://console.cloud.google.com/apis/library/maps-backend.googleapis.com",status:"pending"},{text:"Activer l'API Places",link:"https://console.cloud.google.com/apis/library/places-backend.googleapis.com",status:"pending"},{text:"Créer une clé API",link:"https://console.cloud.google.com/apis/credentials",status:"pending"}]}].map((e,t)=>pe.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[pe.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:e.title}),pe.jsx("div",{className:"space-y-3",children:e.items.map((e,t)=>pe.jsxs("div",{className:"flex items-center space-x-3",children:[pe.jsx(x,{className:"h-5 w-5 text-gray-300"}),pe.jsx("span",{className:"flex-1 text-gray-700",children:e.text}),e.link&&pe.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:pe.jsx(ee,{className:"h-4 w-4"})})]},t))})]},t))}),pe.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mt-6",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[pe.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Variables d'environnement"}),pe.jsxs("button",{onClick:()=>r(!s),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800",children:[s?pe.jsx(te,{className:"h-4 w-4"}):pe.jsx(se,{className:"h-4 w-4"}),pe.jsxs("span",{children:[s?"Masquer":"Afficher"," les secrets"]})]})]}),pe.jsx("div",{className:"space-y-4",children:[{key:"VITE_STRIPE_PUBLISHABLE_KEY",value:"pk_test_...",description:"Clé publique Stripe (commence par pk_test_)"},{key:"STRIPE_SECRET_KEY",value:"sk_test_...",description:"Clé secrète Stripe (commence par sk_test_)",secret:!0},{key:"STRIPE_WEBHOOK_SECRET",value:"whsec_...",description:"Secret webhook Stripe (commence par whsec_)",secret:!0},{key:"VITE_SUPABASE_URL",value:"https://xxx.supabase.co",description:"URL de votre projet Supabase"},{key:"VITE_SUPABASE_ANON_KEY",value:"",description:"Clé anonyme Supabase"},{key:"SUPABASE_SERVICE_ROLE_KEY",value:"",description:"Clé service role Supabase",secret:!0},{key:"VITE_GOOGLE_MAPS_API_KEY",value:"",description:"Clé API Google Maps pour les cartes et géolocalisation (configurée)"}].map((e,t)=>pe.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-2",children:[pe.jsx("code",{className:"text-sm font-mono text-blue-600",children:e.key}),pe.jsxs("button",{onClick:()=>{return t=`${e.key}=${e.value}`,s=e.key,navigator.clipboard.writeText(t),a(s),void setTimeout(()=>a(null),2e3);var t,s},className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700",children:[pe.jsx(re,{className:"h-4 w-4"}),i===e.key&&pe.jsx("span",{className:"text-green-600 text-sm",children:"Copié!"})]})]}),pe.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),pe.jsx("div",{className:"bg-white rounded p-2",children:pe.jsx("code",{className:"text-sm text-gray-800",children:e.secret&&!s?"••••••••••••••••":e.value})})]},t))}),pe.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:pe.jsxs("p",{className:"text-sm text-yellow-800",children:[pe.jsx("strong",{children:"Important :"})," Créez un fichier ",pe.jsx("code",{children:".env"})," à la racine de votre projet et ajoutez-y ces variables avec vos vraies valeurs."]})})]}),pe.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mt-6",children:[pe.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Cartes de test Stripe"}),pe.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[pe.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[pe.jsx("h4",{className:"font-semibold text-green-600 mb-2",children:"Paiement réussi"}),pe.jsx("code",{className:"text-sm",children:"4242 4242 4242 4242"})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[pe.jsx("h4",{className:"font-semibold text-red-600 mb-2",children:"Paiement échoué"}),pe.jsx("code",{className:"text-sm",children:"4000 0000 0000 0002"})]}),pe.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[pe.jsx("h4",{className:"font-semibold text-blue-600 mb-2",children:"3D Secure"}),pe.jsx("code",{className:"text-sm",children:"4000 0025 0000 3155"})]})]}),pe.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:["Date d'expiration : n'importe quelle date future (ex: 12/25)",pe.jsx("br",{}),"CVV : n'importe quel code à 3 chiffres (ex: 123)"]})]}),pe.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mt-6",children:[pe.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Liens utiles"}),pe.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[pe.jsxs("a",{href:"https://stripe.com/docs",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-100",children:[pe.jsx(ee,{className:"h-5 w-5 text-blue-600"}),pe.jsx("span",{children:"Documentation Stripe"})]}),pe.jsxs("a",{href:"https://supabase.com/docs",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-100",children:[pe.jsx(ee,{className:"h-5 w-5 text-green-600"}),pe.jsx("span",{children:"Documentation Supabase"})]}),pe.jsxs("a",{href:"https://dashboard.stripe.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-100",children:[pe.jsx(ee,{className:"h-5 w-5 text-blue-600"}),pe.jsx("span",{children:"Dashboard Stripe"})]}),pe.jsxs("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-100",children:[pe.jsx(ee,{className:"h-5 w-5 text-green-600"}),pe.jsx("span",{children:"Dashboard Supabase"})]})]})]})]})]})})};function Gi(){const[t,r]=e.useState(!1),[i,a]=e.useState(""),[n,o]=e.useState({}),[l,c]=e.useState(!1),[d,u]=e.useState("relevance"),[h,m]=e.useState("desc"),[p,g]=e.useState(null),[b,f]=e.useState(null),[x,v]=e.useState(null),[y,w]=e.useState(null),[j,N]=e.useState(!1),[C,_]=e.useState(!1),[k,S]=e.useState("home"),[,T]=e.useState(!1),[P,E]=e.useState(!1),{t:A,isRTL:R}=fe(),{requestNotificationPermission:O}=Oi(),{establishments:M,loading:$,error:I,isSupabaseConfigured:L,refreshData:q}=(()=>{const[t,s]=e.useState([]),[r,i]=e.useState(!0),[a,n]=e.useState(null),[o,l]=e.useState(!1);e.useEffect(()=>{(async()=>{try{i(!0),n(null);const e=zi();if(l(e),!e){n("Configuration Supabase manquante. Vérifiez vos variables d'environnement.");const{establishments:e}=await qe(async()=>{const{establishments:e}=await Promise.resolve().then(()=>ke);return{establishments:e}},void 0,import.meta.url);return void s(e)}const t=await Ti();if(0===t.length){const{establishments:e}=await qe(async()=>{const{establishments:e}=await Promise.resolve().then(()=>ke);return{establishments:e}},void 0,import.meta.url);s(e),n("Aucun établissement trouvé dans Supabase. Utilisation des données de démonstration.")}else s(t)}catch(e){n("Erreur lors du chargement des données depuis Supabase");try{const{establishments:e}=await qe(async()=>{const{establishments:e}=await Promise.resolve().then(()=>ke);return{establishments:e}},void 0,import.meta.url);s(e)}catch(t){s([])}}finally{i(!1)}})()},[]);const c=async()=>{if(o)try{i(!0);const e=await Ti();s(e)}catch(e){n("Erreur lors du rafraîchissement des données")}finally{i(!1)}};return{establishments:t,loading:r,error:a,isSupabaseConfigured:o,refreshData:c,addEstablishment:async e=>{try{const{addEstablishmentToSupabase:t}=await qe(async()=>{const{addEstablishmentToSupabase:e}=await Promise.resolve().then(()=>Ei);return{addEstablishmentToSupabase:e}},void 0,import.meta.url),s=await t(e);return s?(await c(),s):null}catch(t){return null}}}})(),B=we(i,200),z=je(M),D=e.useMemo(()=>{let e;if(B&&B.length>=2){const t=Ne(z,B);e=0===t.length?M.filter(e=>e.name.toLowerCase().includes(B.toLowerCase())||e.description.toLowerCase().includes(B.toLowerCase())||e.phone.includes(B)||e.email&&e.email.toLowerCase().includes(B.toLowerCase())):t}else e=M;return e=e.filter(e=>{const t=null===p||e.category===p,s=null===b||e.governorate===b,r=null===x||"tunis"!==b||!0,i=!n.verified||e.verified,a=!n.premium||e.premium,o=!n.minRating||e.rating>=n.minRating,l=!n.maxRating||e.rating<=n.maxRating,c=!n.hasParking||e.services.some(e=>e.toLowerCase().includes("parking")),d=!n.hasWifi||e.services.some(e=>e.toLowerCase().includes("wifi")),u=!n.acceptsCards||e.services.some(e=>e.toLowerCase().includes("carte")),h=!n.wheelchairAccessible||e.services.some(e=>e.toLowerCase().includes("accessib"));return t&&s&&r&&i&&a&&o&&l&&c&&d&&u&&h}),"rating"===d?e.sort((e,t)=>"asc"===h?e.rating-t.rating:t.rating-e.rating):"name"===d?e.sort((e,t)=>"asc"===h?e.name.localeCompare(t.name):t.name.localeCompare(e.name)):"newest"===d&&e.sort((e,t)=>"asc"===h?e.id.localeCompare(t.id):t.id.localeCompare(e.id)),e},[B,p,b,x,n,d,h,z,M]),U=e=>{o(e)},H=e=>{w(e)},G=()=>{N(!0),r(!1)};return s.useEffect(()=>{(async()=>{"Notification"in window&&"default"===Notification.permission&&await O()})()},[O]),pe.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 ${R?"rtl":"ltr"} pb-16 md:pb-0`,dir:R?"rtl":"ltr",children:[pe.jsx(Ui,{}),pe.jsx(qi,{title:p?`${A("establishments")} ${A(p)} - daliltounes`:"daliltounes - Guide des établissements tunisiens",description:p?`Découvrez les meilleurs établissements ${A(p)} en Tunisie`:"Votre annuaire complet des services et métiers en Tunisie. Trouvez médecins, restaurants, artisans et plus.",keywords:`daliltounes, tunisie, ${p?A(p):"établissements"}, ${b?A(b):"guide"}`}),pe.jsx("a",{href:"#main-content",className:"skip-link",children:"Aller au contenu principal"}),pe.jsx(ve,{onMenuToggle:()=>r(!t),isMenuOpen:t,onSuggestClick:G}),pe.jsx(ye,{}),pe.jsx(Li,{onRefresh:async()=>{T(!0),await q(),T(!1)},children:pe.jsxs("main",{id:"main-content",className:"container mx-auto px-4 py-8",children:[$&&pe.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:pe.jsxs("div",{className:"flex items-center space-x-3",children:[pe.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),pe.jsx("span",{className:"text-blue-800 font-medium",children:"Chargement des établissements depuis Supabase..."})]})}),I&&pe.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:pe.jsxs("div",{className:"flex items-center space-x-3",children:[pe.jsx("span",{className:"text-yellow-600",children:"⚠️"}),pe.jsxs("div",{children:[pe.jsx("p",{className:"text-yellow-800 font-medium",children:"Problème de connexion Supabase"}),pe.jsx("p",{className:"text-yellow-700 text-sm",children:I}),!L&&pe.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"Configurez vos variables d'environnement Supabase pour voir vos données."})]})]})}),pe.jsx("div",{className:"max-w-5xl mx-auto mb-12",children:pe.jsx(Se,{onSearch:e=>{a(e)},onFilterChange:U,onEstablishmentSelect:H,establishments:M})}),pe.jsx(Pe,{filters:n,onRemoveFilter:e=>{o(t=>{const s={...t};return delete s[e],s})},onClearAll:()=>{o({})}}),pe.jsx(Me,{selectedGovernorate:b,onGovernorateChange:e=>{f(e),"tunis"!==e&&v(null)}}),pe.jsx(Ie,{selectedDistrict:x,onDistrictChange:e=>{v(e)},show:"tunis"===b}),pe.jsx(Re,{selectedCategory:p,onCategoryChange:e=>{g(e)}}),pe.jsxs("div",{className:"mt-8",children:[pe.jsxs("div",{className:"flex items-center justify-between mb-6 "+(R?"flex-row-reverse":""),children:[pe.jsxs("div",{children:[pe.jsxs("h2",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent "+(R?"text-right":"text-left"),children:[p?`${A("establishments")} ${A(p)} - daliltounes`:A("establishments"),b&&` - ${A(b)}`,x&&` - ${A(x)}`]}),pe.jsxs("p",{className:"text-gray-600 mt-1",children:[D.length," résultat",1!==D.length?"s":""," trouvé",1!==D.length?"s":"",L&&pe.jsx("span",{className:"text-green-600 ml-2",children:"🗄️ Données Supabase"})]})]}),pe.jsxs("div",{className:"flex items-center space-x-3 "+(R?"space-x-reverse":""),children:[pe.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Filtres avancés"}),pe.jsx("button",{onClick:()=>E(!P),className:"px-4 py-2 rounded-full font-semibold transition-colors "+(P?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:P?"Liste":"Carte"})]})]}),!P&&D.length>0&&pe.jsx("div",{className:"mb-6",children:pe.jsx(Ee,{sortBy:d,sortOrder:h,onSortChange:(e,t)=>{u(e),m(t)}})}),P?pe.jsx(Di,{establishments:D,selectedEstablishment:y,onEstablishmentSelect:H}):pe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:D.map(e=>pe.jsx(_i,{establishment:e,onSelect:H},e.id))}),0===D.length&&pe.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl shadow-xl",children:[pe.jsx("div",{className:"text-gray-400 text-2xl mb-6 font-bold",children:"Aucun établissement trouvé"}),pe.jsx("p",{className:"text-gray-600 text-lg",children:"Essayez de modifier votre recherche ou vos filtres"}),pe.jsx("button",{onClick:()=>{a(""),g(null),f(null),v(null)},className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Réinitialiser les filtres"})]})]})]})}),pe.jsx(Ri,{}),pe.jsx("div",{"data-section":"subscriptions",children:pe.jsx(Ri,{})}),pe.jsx(Bi,{}),y&&pe.jsx(ki,{establishment:y,onClose:()=>{w(null)}}),j&&pe.jsx(Ai,{onClose:()=>{N(!1)}}),C&&pe.jsx(Hi,{onClose:()=>{_(!1)}}),pe.jsx(Te,{isOpen:l,onClose:()=>c(!1),onApplyFilters:U,currentFilters:n}),pe.jsx(Mi,{}),pe.jsx($i,{}),pe.jsx(Ii,{activeTab:k,onTabChange:e=>{var t;switch(S(e),e){case"home":g(null),f(null),v(null),a("");break;case"search":null==(t=document.querySelector('input[type="text"]'))||t.focus()}},onSuggestClick:G})]})}zi(),me(document.getElementById("root")).render(pe.jsx(e.StrictMode,{children:pe.jsx(Gi,{})}));const Fi=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));
